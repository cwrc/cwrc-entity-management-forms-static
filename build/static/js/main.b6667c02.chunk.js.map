{"version":3,"sources":["static/images/Logo_White.png","static/images/Logo.png","static/images/cwrc_logo_full_white_300.png","containers/App/style.jsx","components/elements/Logo/index.jsx","components/parts/Footer/style.jsx","components/parts/Footer/index.jsx","actions/layout/index.js","styles/utils.jsx","components/parts/Header/style.jsx","styles/base.jsx","routing/history.js","containers/Dashboard/index.jsx","containers/NotFound/style.jsx","containers/EntityForm/components/SegmentRepeater.jsx","containers/EntityForm/components/FormControls.jsx","containers/EntityForm/components/FieldValidation.js","containers/EntityForm/components/NameParts.jsx","containers/EntityForm/components/LanguageSelector.jsx","api/utils/simpleFetch.js","api/utils/index.js","containers/EntityForm/components/ProjectSelector.jsx","containers/EntityForm/components/VariantNames.jsx","containers/EntityForm/components/EntityLookup.jsx","containers/EntityForm/components/IdentityGroup.jsx","containers/EntityForm/components/NotesGroup.jsx","containers/EntityForm/components/DateRepeater.jsx","containers/EntityForm/components/MessageDialog.jsx","selectors/index.js","api/CollectionsSvc/index.js","containers/EntityForm/components/CollectionsDialog.jsx","containers/EntityForm/components/options.js","api/utils/conversion_utilities.js","api/EntitiesSvc/Person/json2xml.js","api/EntitiesSvc/Person/xml2json.js","api/EntitiesSvc/Organization/xml2json.js","api/EntitiesSvc/Place/xml2json.js","api/EntitiesSvc/index.js","api/EntitiesSvc/Place/json2xml.js","api/EntitiesSvc/Organization/json2xml.js","actions/entities/index.js","containers/EntityForm/Person/components/PersonForm.jsx","containers/EntityForm/Person/index.jsx","static/countries.js","containers/EntityForm/Place/components/PlaceForm.jsx","containers/EntityForm/Place/index.jsx","containers/EntityForm/Organization/components/OrganizationForm.jsx","containers/EntityForm/Organization/index.jsx","routing/routes.js","components/parts/Header/index.jsx","components/addons/RoutingWrapper/index.jsx","actions/common/index.js","reducers/layout/index.js","reducers/entities/index.js","api/LocalStorageCookiesSvc/index.js","actions/utils/awral.js","actions/utils/index.js","api/AuthSvc/index.js","actions/auth/index.js","reducers/auth/index.js","reducers/index.js","index.js","app/configureStore/index.js","styles/theme.jsx"],"names":["module","exports","__webpack_require__","p","PageLayout","styled","div","_templateObject","MainLayout","_templateObject2","props","theme","primaryTextColor","primaryColorText","MainContent","main","_templateObject3","MainContainer","Sidebar","Pusher","_templateObject4","_ref","isloggedin","ismobile","css","_templateObject5","Pushable","_templateObject6","Container","_templateObject7","Dimmer","_templateObject8","LogoLarge","_ref2","rest","Object","esm_extends","logoImg","require","react_default","a","createElement","Image","assign","src","StyledFooter","footer","style_templateObject","primaryColorLight","Footer","href","target","rel","Logo_LogoLarge","alt","UI_TOGGLE_SIDEBAR","UI_WINDOW_RESIZE","sizes","_","mapValues","xs","sm","md","lg","xl","value","key","media","utils_templateObject4","apply","arguments","StyledHeader","header","Header_style_templateObject","primaryColor","primaryColorDark","HeaderInner","style_templateObject2","PageTitle","span","style_templateObject3","style_templateObject4","style_templateObject5","Button","style_templateObject6","Spacer","base_templateObject","process","BROWSER","createBrowserHistory","createMemoryHistory","Dashboard","Helmet","List","Item","as","Link","to","NotFound_style_templateObject","renderSegment","fields","RepeatableComponent","headerLabel","componentLabel","_ref2$meta","meta","touched","error","submitFailed","objectWithoutProperties","Segment","secondary","clearing","basic","style","padding","Header_Header","floated","Popup","size","position","trigger","type","color","icon","onClick","push","content","concat","map","name","index","Grid","Column","width","remove","SegmentRepeater","fieldArrayName","FieldArray","component","InputField","input","label","_ref$labelText","labelText","required","inline","_ref$meta","Form","Field","htmlFor","id","Input","Label","pointing","DropdownComponent","Dropdown","selection","onChange","param","data","DropdownAddableComponent","state","options","_this","handleAddition","e","_ref3","setState","text","toConsumableArray","_this$props","this","_this$props$meta","search","allowAdditions","onAddItem","React","Component","undefined","latitude","latFloat","parseFloat","isNaN","longitude","longFloat","isDate","match","dateRange","isRange","q1","qualifier1","q2","qualifier2","d1","date1","d2","date2","m1","moment","replace","m2","isSameOrAfter","isAfter","isBefore","NameParts","nameOptions","columns","Row","verticalAlign","validate","placeholder","langOptions","lang","isoVal","iso6392T","iso6392B","sort","b","langSearch","query","re","RegExp","escapeRegExp","filter","opt","test","LanguageSelector","scrolling","get","requestWrapper","post","put","method","asyncToGenerator","regenerator_default","mark","_callee","url","body","request","_args","wrap","_context","prev","next","length","JSON","stringify","objectSpread","headers","Accept","mode","credentials","abrupt","fetch","stop","_x","parseJSON","res","status","ok","json","sent","parseXML","_callee2","parser","xml","_context2","parse","DOMParser","parseFromString","_x2","isFetched","fetchedProjects","ProjectSelector","projects","_this2","then","obj","nid","title","catch","err","console","warn","changeFunc","optional","event","newVal","prevVal","find","project","VariantNames","variantOptions","stackable","components_ProjectSelector","components_LanguageSelector","Divider","components_SegmentRepeater","cwrc","setEntityRoot","setSearchRoot","PublicEntityDialog","showCreateNewButton","showNoLinkButton","registerEntitySources","person","Map","set","viaf","wikidata","getty","dbpedia","place","geonames","organization","EntityLookup","hasLookup","handleSearchClick","entityType","popSearch","parentEl","document","querySelector","success","result","uri","repository","log","handleClearClick","renderName","field","marginBottom","renderURI","display","overflow","textOverflow","buttonLabel","includeCertainty","certaintyOptions","includeClear","entityLabel","charAt","toUpperCase","slice","Icon","IdentityGroup","Group","substring","DescriptiveNoteComponent","rows","DescriptiveNote","ProjectNoteComponent","ProjectNote","dateQualifierOptions","dateRangeQualifierOptions","dateTypeOptions","marginTop","components_EntityLookup","stretched","DateRepeater","MessageDialog","modalOpen","handleOpen","handleClose","onClose","call","Modal","open","closeOnDimmerClick","Header","Content","Actions","getLayoutMobileStatuses","createSelector","layout","innerWidth","isMobileSM","isMobileXS","isMobile","getUrlParameter","results","exec","decodeURIComponent","getEntityId","routing","location","isPersonPostDone","entities","isPersonPostPending","isPersonPostError","getPersonPostError","getPersonPostData","isPersonGetDone","isPersonGetPending","isPersonGetError","getPersonGetError","getPersonGetData","isPersonPutDone","isPersonPutPending","isPersonPutError","getPersonPutError","getPersonPutData","isPlacePostDone","isPlacePostPending","isPlacePostError","getPlacePostError","getPlacePostData","isPlaceGetDone","isPlaceGetPending","isPlaceGetError","getPlaceGetError","getPlaceGetData","isPlacePutDone","isPlacePutPending","isPlacePutError","getPlacePutError","getPlacePutData","isOrganizationPostDone","isOrganizationPostPending","isOrganizationPostError","getOrganizationPostError","getOrganizationPostData","isOrganizationGetDone","isOrganizationGetPending","isOrganizationGetError","getOrganizationGetError","getOrganizationGetData","isOrganizationPutDone","isOrganizationPutPending","isOrganizationPutError","getOrganizationPutError","getOrganizationPutData","IS_NODE","navigator","userAgent","toLowerCase","indexOf","getCollectionId","collectionId","window","Cookies","setCollectionId","expires","path","getCollections","response","docs","collections","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","d","PID","fgs_label_s","return","CollectionsDialog","loading","handleChange","handleCancel","close","filteredCollections","collection","closeOnEscape","closeOnDocumentClick","fluid","factualityOptions","genderOptions","personNameTypeOptions","personVariantTypeOptions","personDateTypeOptions","nonPersonVariantTypeOptions","nonPersonDateTypeOptions","createXMLFromPath","parent","childText","currParent","tags","split","tag","hasAtt","tagName","el","ownerDocument","createElementNS","attName","attValue","lastIndexOf","setAttribute","appendChild","createTextNode","getDateString","date","month","getMonth","day","getDate","year","getFullYear","padStart","join","addIdentityXML","identityEl","values","identity","standardName","standardNameEl","namePartsLang","parentElement","setAttributeNS","nameParts","namePartEl","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","namePart","namePartType","variants","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","variant","variantEl","variantType","noteEl","encodeURIComponent","parts","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","part","sameAs","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","sameAsEl","idno","cert","addNotesXML","description","descriptiveNote","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","note","projectNote","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","addSourcesXML","sources","bibl","listBibl","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","biblEl","ref","addIdentityJSON","firstElementChild","textContent","getAttribute","prefName","querySelectorAll","forEach","orgName","index2","addNotesJSON","firstChild","addSourcesJSON","xml2json","xmlDoc","dates","nodeName","properties","trait","factuality","gender","sex","occupation","nationality","affiliation","org","address","country","region","geo","latLong","getXmlFromJson","dateTypeEl","dateEl","traitEl","sexEl","occ","occEl","nat","natEl","aff","affEl","json2xmlPerson","descEl","locEl","addressEl","removeChild","json2xmlPlace","json2xmlOrganization","xmlStr","XMLSerializer","serializeToString","isEntityLocked","locked","getPerson","Error","xml2jsonPerson","postPerson","_callee3","_context3","collectionPID","tei","_x3","putPerson","_ref4","_callee4","_context4","_x4","_x5","getPlace","_ref5","_callee5","_context5","xml2jsonPlace","_x6","postPlace","_ref6","_callee6","_context6","_x7","putPlace","_ref7","_callee7","_context7","_x8","_x9","getOrganization","_ref8","_callee8","_context8","xml2jsonOrganization","_x10","postOrganization","_ref9","_callee9","_context9","_x11","putOrganization","_ref10","_callee10","_context10","_x12","_x13","POST_PERSON","payload","PUT_PERSON","GET_PERSON","POST_PLACE","PUT_PLACE","GET_PLACE","POST_ORGANIZATION","PUT_ORGANIZATION","GET_ORGANIZATION","PersonComponent","closeForm","channel","BroadcastChannel","postMessage","doSampleLoad","dispatch","initialize","entityId","nextProps","nextState","initialValues","np","vr","handleSubmit","invalid","submitting","MessageDialog_MessageDialog","pid","bind","active","inverted","Loader","message","CollectionsDialog_CollectionsDialog","onSubmit","components_IdentityGroup","change","components_DateRepeater","multiple","NotesGroup_DescriptiveNote","NotesGroup_ProjectNote","Message","textAlign","disabled","connect","_getPerson","_putPerson","_postPerson","reduxForm","form","errors","PersonEdit","login","PersonForm","countries","PlaceComponent","_getPlace","_putPlace","_postPlace","PlaceEdit","PlaceForm","OrganizationComponent","_getOrganization","_putOrganization","_postOrganization","OrganizationEdit","OrganizationForm","routeRoot","routingFnCreator","useFor","sidebarExternalLinks","routes","exact","Route","Person","nameEdit","Place","Organization","sidebar","sidebarVisible","pick","all","getRoutes","getMetaRoutes","getRouterRoutes","withRouter","pathname","currentRoute","matchPath","toggleSidebar","isLoggedIn","onlyRealRoutes","onlyRedirects","routesToRender","routesRendered","i","Tag","Switch","LOCATION_CHANGE","APPLICATION_INIT","initialState","sidebarOpened","promiseReducers","_promiseReducers","defineProperty","PENDING","REJECTED","action","FULFILLED","personGet","typeToReducer","personPut","personPost","placeGet","placePut","placePost","organizationGet","organizationPut","organizationPost","JWT_TOKEN","actions","ids","awral","ofFn","newBehaviours","behaviours","bindedAwral","asyncFunction","ACTION_NAME","_len","args","Array","_key","getState","basicArgs","defaultArgs","failBeforePendingPayload","fnPayload","isSuccess","failBeforePending","fail","pending","check","transformResult","finally","resolve","of","reduce","LOGIN_AUTH_SUCCESS","LOGIN_AUTH_FAIL","LOGOUT_AUTH_SUCCESS","token","awralLogin","_loginAPI","combineReducers","auth","routerReducer","reduxFormReducer","__INITIAL_STATE__","history","store","middlewares","localError","thunk","routerMiddleware","promiseMiddleware","enhancers","applyMiddleware","composedEnhancers","compose","createStore","rootReducer","configureStore","render","es","Date","now","styled_components_browser_esm","accentColor","secondaryTextColor","dividerColor","react_router_redux_es","parts_Header","addons_RoutingWrapper","parts_Footer","getElementById"],"mappings":"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","file":"static/js/main.b6667c02.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Logo_White.5ee3c5eb.png\";","module.exports = __webpack_public_path__ + \"static/media/Logo.af27906b.png\";","module.exports = \"data:image/png;base64,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\"","import styled, {css} from 'styled-components'\r\nimport {Dimmer, Sidebar, Container} from 'semantic-ui-react'\r\n\r\nexport const PageLayout = styled.div`\r\n\theight: 100%;\r\n`\r\n\r\nexport const MainLayout = styled.div`\r\n\tmin-height: calc(100% - 72px);\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tcolor: ${props => props.theme.primaryTextColor};\r\n\tbackground-color: ${props => props.theme.primaryColorText};\r\n`\r\n\r\nexport const MainContent = styled.main`\r\n\tflex-grow: 1;\r\n\tmin-height: calc(100% - 72px);\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n`\r\n\r\nexport const SidebarSemanticPusherStyled = styled(Sidebar.Pusher)`\r\n\theight: 100%;\r\n\t-webkit-overflow-scrolling: touch;\r\n\t${({isloggedin, ismobile}) => {\r\n\t\t// using `ismobile` attr instead of `media` util is much smoother\r\n\t\treturn (\r\n\t\t\tisloggedin &&\r\n\t\t\t!ismobile &&\r\n\t\t\tcss`\r\n\t\t\t\tmax-width: calc(100% - 150px);\r\n\t\t\t\t`\r\n\t\t)\r\n\t}};\r\n`\r\n\r\nexport const SidebarSemanticPushableStyled = styled(Sidebar.Pushable)`\r\n\tdisplay: initial;\r\n\t> .pusher {\r\n\t\toverflow: visible !important;\r\n\t}\r\n`\r\n\r\nexport const MainContainer = styled(Container)`\r\n\tpadding-left: 1rem;\r\n\tpadding-right: 1rem;\r\n\tmargin-top: 2em;\r\n\tmargin-bottom: 1em;\r\n\tflex-direction: column;\r\n\tdisplay: flex !important;\r\n\tflex-grow: 1;\r\n\t& > *:last-child {\r\n\t\tflex-grow: 1;\r\n\t}\r\n`\r\n\r\nexport const StyledDimmer = styled(Dimmer)`\r\n\tz-index: 55 !important;\r\n\tcursor: pointer;\r\n`\r\n","// @flow\r\nimport React from 'react'\r\nimport {Image as ImageComponent} from 'semantic-ui-react'\r\n\r\nconst LogoSmall = ({\r\n\twhite,\r\n\t...rest\r\n}: any) => {\r\n\tlet logoImg\r\n\tif (white === true) {\r\n\t\tlogoImg = require('../../../static/images/Logo_White.png')\r\n\t} else {\r\n\t\tlogoImg = require('../../../static/images/Logo.png')\r\n\t}\r\n\treturn <ImageComponent src={logoImg} {...rest} />\r\n}\r\n\r\nconst LogoLarge = ({\r\n\t...rest\r\n}: any) => {\r\n\tconst logoImg = require('../../../static/images/cwrc_logo_full_white_300.png')\r\n\treturn <ImageComponent src={logoImg} {...rest} />\r\n}\r\n\r\nexport {LogoSmall, LogoLarge}\r\n","import styled from 'styled-components'\r\n\r\nexport const StyledFooter = styled.footer`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tbackground-color: ${props => props.theme.primaryColorLight};\r\n\tcolor: ${props => props.theme.primaryTextColor};\r\n\theight: 80px;\r\n\tmin-height: 80px;\r\n\tpadding: 1rem;\r\n`\r\n","/**\r\n * @flow\r\n */\r\nimport React from 'react'\r\nimport {LogoLarge} from '../../elements/Logo'\r\nimport {StyledFooter} from './style'\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<StyledFooter>\r\n\t\t\t<a href='https://cwrc.ca' target='_blank' rel='noopener noreferrer'>\r\n\t\t\t\t<LogoLarge alt='CWRC / CSC: Canadian Writing Research Collaboratory' />\r\n\t\t\t</a>\r\n\t\t</StyledFooter>\r\n\t)\r\n}\r\n\r\nexport default Footer\r\n","// @flow\r\nexport const UI_TOGGLE_SIDEBAR = 'UI_TOGGLE_SIDEBAR'\r\nexport const UI_WINDOW_RESIZE = 'UI_WINDOW_RESIZE'\r\n\r\nexport const TOGGLE_SIDEBAR = () => ({\r\n\ttype: UI_TOGGLE_SIDEBAR\r\n})\r\n\r\nexport const WINDOW_RESIZE = (innerWidth: number) => ({\r\n\ttype: UI_WINDOW_RESIZE,\r\n\tpayload: {\r\n\t\tinnerWidth\r\n\t}\r\n})\r\n\r\nexport type UI_TOGGLE_SIDEBAR_TYPE = {type: 'UI_TOGGLE_SIDEBAR'}\r\nexport type UI_WINDOW_RESIZE_TYPE = {\r\n\ttype: 'UI_WINDOW_RESIZE',\r\n\tpayload: {innerWidth: number}\r\n}\r\n","import {css} from 'styled-components'\r\nimport _ from 'lodash'\r\n\r\nconst pxToEm = px => {\r\n\treturn px / 16 + 'em'\r\n}\r\n\r\nconst iWantToUseEm = true\r\n// NOTE: This grid don't match SUI's grid.\r\n// NOTE: RSUI has <Responsive> element!\r\n// You might don't need media template function for styled-components\r\nconst sizes = _.mapValues(\r\n\t{\r\n\t\txs: 0, // Extra small screen / phone\r\n\t\tsm: 480, // Small screen / phone\r\n\t\tmd: 768, // Medium screen / tablet\r\n\t\tlg: 1024, // Large screen / desktop\r\n\t\txl: 1200 // Extra large screen / wide desktop\r\n\t},\r\n\t(value, key) => {\r\n\t\t// NOTE: Please, read more about `em` before switching\r\n\t\t// https://stackoverflow.com/questions/22228568/switching-to-em-based-media-queries\r\n\t\treturn iWantToUseEm ? pxToEm(value) : value + 'px'\r\n\t}\r\n)\r\n\r\n// NOTE: @Metnew: this block may be rewritten more elegant (like the code below, from off docs)\r\nexport const media = {\r\n\txs: (...args) => css`\r\n\t  @media only screen and (max-width: ${sizes.sm}) {\r\n\t    ${css(...args)}\r\n\t  }\r\n\t`,\r\n\tsm: (...args) => css`\r\n\t  @media only screen and (max-width: ${sizes.md}) {\r\n\t    ${css(...args)}\r\n\t  }\r\n\t`,\r\n\tsmOnly: (...args) => css`\r\n\t\t@media only screen and (max-width: ${sizes.sm}) and (min-width: ${sizes.xs}) {\r\n\t\t\t${css(...args)}\r\n\t\t}\r\n\t`,\r\n\tmd: (...args) => css`\r\n\t  @media only screen and (max-width: ${sizes.lg}) {\r\n\t    ${css(...args)}\r\n\t  }\r\n\t`,\r\n\tmdOnly: (...args) => css`\r\n\t\t@media only screen and (max-width: ${sizes.md}) and (min-width: ${sizes.sm}) {\r\n\t\t\t${css(...args)}\r\n\t\t}\r\n\t`,\r\n\tlg: (...args) => css`\r\n\t  @media only screen and (min-width: ${sizes.lg}) {\r\n\t    ${css(...args)}\r\n\t  }\r\n\t`,\r\n\tlgOnly: (...args) => css`\r\n\t\t@media only screen and (max-width: ${sizes.xl}) and (min-width: ${sizes.lg}) {\r\n\t\t\t${css(...args)}\r\n\t\t}\r\n\t`,\r\n\txl: (...args) => css`\r\n\t  @media only screen and (min-width: ${sizes.xl}) {\r\n\t    ${css(...args)}\r\n\t  }\r\n\t`\r\n}\r\n","import styled from 'styled-components'\r\nimport {media} from '../../../styles/utils'\r\nimport {Button} from 'semantic-ui-react'\r\nexport const StyledHeader = styled.header`\r\n\tbackground: ${props => props.theme.primaryColor};\r\n\tborder-bottom: 1px solid ${props => props.theme.primaryColorDark};\r\n\tbox-shadow: inset 0 0 0 0 ${props => props.theme.primaryColorDark},\r\n\t\t0 2px 1px 0 ${props => props.theme.primaryColorDark};\r\n\tcolor: ${props => props.theme.primaryColorText};\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tflex-direction: column;\r\n\twidth: 100%;\r\n\tz-index: 444;\r\n\theight: 72px;\r\n`\r\n\r\nexport const HeaderInner = styled.div`\r\n\tdisplay: flex;\r\n\tpadding: 0 15px;\r\n`\r\n\r\nexport const PageTitle = styled.span`\r\n\tline-height: 1;\r\n\tfont-size: 24px;\r\n\talign-items: center;\r\n\tdisplay: flex;\r\n`\r\n\r\nexport const Navicon = styled.span`\r\n\twidth: 48px;\r\n\theight: 48px;\r\n\tpadding: 12px;\r\n\tline-height: 1;\r\n\tfont-size: 24px;\r\n\tdisplay: none;\r\n\t${media.md`\r\n\t\tdisplay: block;\r\n\t`};\r\n`\r\n\r\nexport const HeaderButton = styled(Button)`\r\n\t&#header-button {\r\n\t\talign-self: center;\r\n\t\tbox-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\r\n\t\tcolor: ${props => props.theme.primaryColorText}!important;\r\n\t\tbackground-color: ${props => props.theme.primaryColorDark}!important;\r\n\t}\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const Spacer = styled.span`flex-grow: 1;`\r\n","// @flow\r\nimport {createBrowserHistory, createMemoryHistory} from 'history'\r\nconst selectedHistory = process.env.BROWSER ? createBrowserHistory : createMemoryHistory\r\n\r\nexport const history = selectedHistory()\r\n","// @flow\r\nimport React from 'react'\r\nimport {Helmet} from 'react-helmet'\r\nimport {List} from 'semantic-ui-react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst Dashboard = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Helmet>\r\n\t\t\t\t<title>CWRC Entity Management</title>\r\n\t\t\t</Helmet>\r\n\t\t\t<List>\r\n\t\t\t\t<List.Item as={Link} to='./person'>Create Person</List.Item>\r\n\t\t\t\t<List.Item as={Link} to='./place'>Create Place</List.Item>\r\n\t\t\t\t<List.Item as={Link} to='./organization'>Create Organization</List.Item>\r\n\t\t\t</List>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dashboard\r\n","import styled from 'styled-components'\r\n\r\nexport const NotFoundLayout = styled.div`\r\n  display: flex;\r\n  flex-grow: 1;\r\n  align-items: center;\r\n`\r\n","// @flow\r\nimport React from 'react'\r\nimport {\r\n\tHeader,\r\n\tGrid,\r\n\tButton,\r\n\tSegment,\r\n\tPopup\r\n} from 'semantic-ui-react'\r\nimport {FieldArray} from 'redux-form'\r\n\r\nconst SegmentRepeater = ({\r\n\tfieldArrayName,\r\n\tcomponentLabel,\r\n\tRepeatableComponent,\r\n\t...rest\r\n}: any) => {\r\n\treturn (\r\n\t\t<FieldArray\r\n\t\t\tname={fieldArrayName}\r\n\t\t\tprops={{RepeatableComponent, componentLabel}}\r\n\t\t\tcomponent={renderSegment}\r\n\t\t\t{...rest}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nconst renderSegment = ({\r\n\tfields,\r\n\tRepeatableComponent,\r\n\theaderLabel,\r\n\tcomponentLabel,\r\n\tmeta: {touched, error, submitFailed},\r\n\t...rest\r\n}: any) => (\r\n\t<Segment secondary>\r\n\t\t<Segment clearing basic style={{padding: 0}}>\r\n\t\t\t<Header as=\"h4\" floated='left'>{headerLabel}</Header>\r\n\t\t\t<Popup size='tiny' position='right center' trigger={\r\n\t\t\t\t<Button type=\"button\" floated='right' size='tiny' color='grey' icon='plus' onClick={() => fields.push({})}/>\r\n\t\t\t} content={`Add ${componentLabel}`} />\r\n\t\t</Segment>\r\n\t\t{fields.map((name, index) => (\r\n\t\t\t<Segment key={index} clearing>\r\n\t\t\t\t<Grid>\r\n\t\t\t\t\t<Grid.Column width={15}>\r\n\t\t\t\t\t\t<RepeatableComponent name={name} {...rest}/>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column width={1}>\r\n\t\t\t\t\t\t<Popup size='tiny' position='right center' trigger={\r\n\t\t\t\t\t\t\t<Button type=\"button\" floated=\"right\" size='tiny' color='red' icon='minus' onClick={() => fields.remove(index)}/>\r\n\t\t\t\t\t\t} content={`Remove ${componentLabel}`} />\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Segment>\r\n\t\t))}\r\n\t</Segment>\r\n)\r\n\r\nexport default SegmentRepeater\r\n","// @flow\r\nimport React from 'react'\r\nimport {\r\n\tForm,\r\n\tLabel,\r\n\tDropdown,\r\n\tInput as InputComponent\r\n} from 'semantic-ui-react'\r\n\r\nconst InputField = ({\r\n\tinput,\r\n\tlabel,\r\n\tlabelText = null,\r\n\trequired,\r\n\twidth,\r\n\tfloated,\r\n\tinline,\r\n\tsize,\r\n\tmeta: {touched, error},\r\n\t...rest\r\n}: any) => (\r\n\t<Form.Field error={!!(touched && error)} inline={inline} required={required} floated={floated}>\r\n\t\t<label htmlFor={rest.id || rest.name || ''}>{label}</label>\r\n\t\t<InputComponent\r\n\t\t\tlabel={labelText}\r\n\t\t\t{...input}\r\n\t\t\t{...rest}\r\n\t\t/>\r\n\t\t{touched && error ? (\r\n\t\t\t<Label basic color=\"red\" pointing={inline ? 'left' : 'above'}>\r\n\t\t\t\t{error}\r\n\t\t\t</Label>\r\n\t\t) : null}\r\n\t</Form.Field>\r\n)\r\n\r\nconst DropdownComponent = ({\r\n\tinput,\r\n\tlabel,\r\n\tmeta: {touched, error},\r\n\trequired,\r\n\twidth,\r\n\tfloated,\r\n\t...rest\r\n}: any) => (\r\n\t<Form.Field error={!!(touched && error)} required={required} inline floated={floated} width={width}>\r\n\t\t<label htmlFor={rest.id || rest.name || ''}>{label}</label>\r\n\t\t<Dropdown\r\n\t\t\t{...input}\r\n\t\t\t{...rest}\r\n\t\t\tselection\r\n\t\t\tfloated={floated}\r\n\t\t\tvalue={input.value}\r\n\t\t\tonChange={(param, data) => { input.onChange(data.value) }}\r\n\t\t/>\r\n\t\t{touched && error ? (\r\n\t\t\t<Label basic color=\"red\" pointing=\"left\">\r\n\t\t\t\t{error}\r\n\t\t\t</Label>\r\n\t\t) : null}\r\n\t</Form.Field>\r\n)\r\n\r\n/**\r\n * Allows for the addition of custom values\r\n */\r\nclass DropdownAddableComponent extends React.Component<Props, State> {\r\n\tstate = {options: this.props.options}\r\n\r\n\thandleAddition = (e, {value}) => {\r\n\t\tthis.setState({\r\n\t\t\toptions: [{text: value, value}, ...this.state.options]\r\n\t\t})\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst {\r\n\t\t\tinput,\r\n\t\t\tlabel,\r\n\t\t\tmeta: {touched, error},\r\n\t\t\trequired,\r\n\t\t\twidth,\r\n\t\t\tfloated,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\t\tconst options = this.state.options\r\n\t\treturn (\r\n\t\t\t<Form.Field error={!!(touched && error)} required={required} inline floated={floated} width={width}>\r\n\t\t\t\t<label htmlFor={rest.id || rest.name || ''}>{label}</label>\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\t{...input}\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tallowAdditions\r\n\t\t\t\t\toptions={options}\r\n\t\t\t\t\tfloated={floated}\r\n\t\t\t\t\tvalue={input.value}\r\n\t\t\t\t\tonChange={(param, data) => { input.onChange(data.value) }}\r\n\t\t\t\t\tonAddItem={this.handleAddition}\r\n\t\t\t\t/>\r\n\t\t\t\t{touched && error ? (\r\n\t\t\t\t\t<Label basic color=\"red\" pointing>\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</Label>\r\n\t\t\t\t) : null}\r\n\t\t\t</Form.Field>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport {InputField, DropdownComponent, DropdownAddableComponent}\r\n","// @flow\r\nimport moment from 'moment'\r\n\r\nexport const required = value => {\r\n\tif (value === '' || value === null || value === undefined) {\r\n\t\treturn 'Required'\r\n\t} else {\r\n\t\treturn undefined\r\n\t}\r\n}\r\n\r\nexport const latitude = value => {\r\n\tif (value !== undefined) {\r\n\t\tlet latFloat = parseFloat(value)\r\n\t\tif (isNaN(latFloat)) {\r\n\t\t\treturn 'Not a number'\r\n\t\t} else if (latFloat < 0 || latFloat > 90) {\r\n\t\t\treturn 'Out of bounds (0 <= x <= 90)'\r\n\t\t}\r\n\t}\r\n\treturn undefined\r\n}\r\n\r\nexport const longitude = value => {\r\n\tif (value !== undefined) {\r\n\t\tlet longFloat = parseFloat(value)\r\n\t\tif (isNaN(longFloat)) {\r\n\t\t\treturn 'Not a number'\r\n\t\t} else if (longFloat < -180 || longFloat > 180) {\r\n\t\t\treturn 'Out of bounds (-180 <= x <= 180)'\r\n\t\t}\r\n\t}\r\n\treturn undefined\r\n}\r\n\r\nexport const isDate = value => {\r\n\tif (value !== undefined) {\r\n\t\tif (value.match(/^\\d{4}-\\d{2}-\\d{2}$/) !== null) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\tif (value.match(/^\\d{4}-\\d{2}$/) !== null) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\tif (value.match(/^\\d{4}$/) !== null) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\treturn 'Not a valid date'\r\n\t}\r\n\treturn undefined\r\n}\r\n\r\nexport const dateRange = (dateRange: Object) => {\r\n\tif (dateRange.isRange) {\r\n\t\tconst q1 = dateRange.qualifier1\r\n\t\tconst q2 = dateRange.qualifier2\r\n\t\tif (q1 !== undefined && q2 !== undefined) {\r\n\t\t\tif (q1 === q2) return {qualifier2: 'No duplicate qualifiers'}\r\n\t\t\tconst d1 = dateRange.date1\r\n\t\t\tconst d2 = dateRange.date2\r\n\t\t\tif (d1 !== undefined && d2 !== undefined && isDate(d1) === undefined && isDate(d2) === undefined) {\r\n\t\t\t\tconst m1 = moment(d1.replace(/-/g, '/'))\r\n\t\t\t\tconst m2 = moment(d2.replace(/-/g, '/'))\r\n\t\t\t\tif (q1 === 'from-iso' && q2 === 'to-iso' && m1.isSameOrAfter(m2)) return {date2: 'To date must occur after From date'}\r\n\t\t\t\tif (q2 === 'from-iso' && q1 === 'to-iso' && m2.isSameOrAfter(m1)) return {date2: 'From date must occur before To date'}\r\n\t\t\t\tif (q1 === 'from-iso' && q2 === 'notAfter-iso' && m1.isAfter(m2)) return {date2: 'Not After date must occur after From date'}\r\n\t\t\t\tif (q2 === 'from-iso' && q1 === 'notAfter-iso' && m2.isAfter(m1)) return {date2: 'From date must occur before Not After date'}\r\n\t\t\t\tif (q1 === 'from-iso' && q2 === 'notBefore-iso' && m1.isBefore(m2)) return {date2: 'Not Before date must occur before From date'}\r\n\t\t\t\tif (q2 === 'from-iso' && q1 === 'notBefore-iso' && m2.isBefore(m1)) return {date2: 'From date must occur after Not Before date'}\r\n\t\t\t\tif (q1 === 'notBefore-iso' && q2 === 'notAfter-iso' && m1.isAfter(m2)) return {date2: 'Not After date must occur after Not Before date'}\r\n\t\t\t\tif (q2 === 'notBefore-iso' && q1 === 'notAfter-iso' && m2.isAfter(m1)) return {date2: 'Not Before date must occur before Not After date'}\r\n\t\t\t\tif (q1 === 'notBefore-iso' && q2 === 'to-iso' && m1.isAfter(m2)) return {date2: 'To date must occur after Not Before date'}\r\n\t\t\t\tif (q2 === 'notBefore-iso' && q1 === 'to-iso' && m2.isAfter(m1)) return {date2: 'Not Before date must occur before To date'}\r\n\t\t\t\tif (q1 === 'notAfter-iso' && q2 === 'to-iso' && m1.isAfter(m2)) return {date2: 'To date must occur before Not After date'}\r\n\t\t\t\tif (q2 === 'notAfter-iso' && q1 === 'to-iso' && m2.isAfter(m1)) return {date2: 'Not After date must occur after To date'}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn undefined\r\n}\r\n","// @flow\r\nimport React from 'react'\r\nimport {\r\n\tGrid\r\n} from 'semantic-ui-react'\r\nimport {Field} from 'redux-form'\r\nimport {InputField, DropdownAddableComponent} from './FormControls'\r\nimport {required} from './FieldValidation'\r\n\r\nconst NameParts = ({\r\n\tname,\r\n\tnameOptions\r\n}: any) => (\r\n\t<Grid columns='equal'>\r\n\t\t<Grid.Row verticalAlign='middle'>\r\n\t\t\t<Grid.Column>\r\n\t\t\t\t<Field\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\tinline\r\n\t\t\t\t\tlabel='Name Part'\r\n\t\t\t\t\tname={`${name}.value`}\r\n\t\t\t\t\tplaceholder='Name Part'\r\n\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={6}>\r\n\t\t\t\t{nameOptions === null\r\n\t\t\t\t\t? <Field\r\n\t\t\t\t\t\tname={`${name}.type`}\r\n\t\t\t\t\t\tlabel='Name Type'\r\n\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\tinline\r\n\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t: <Field\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\tname={`${name}.type`}\r\n\t\t\t\t\t\toptions={nameOptions}\r\n\t\t\t\t\t\tlabel='Name Type'\r\n\t\t\t\t\t\tplaceholder='Name Type'\r\n\t\t\t\t\t\tcomponent={DropdownAddableComponent}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid.Row>\r\n\t</Grid>\r\n)\r\n\r\nexport default NameParts\r\n","// @flow\r\nimport React from 'react'\r\nimport {Field} from 'redux-form'\r\nimport {DropdownComponent} from './FormControls'\r\nimport _ from 'lodash'\r\n\r\nimport iso6392 from 'iso-639-2'\r\n\r\nconst langOptions = iso6392.map(lang => {\r\n\tconst isoVal = lang.iso6392T === null ? lang.iso6392B : lang.iso6392T\r\n\treturn {\r\n\t\ttext: lang.name,\r\n\t\tvalue: isoVal,\r\n\t\tkey: isoVal\r\n\t}\r\n})\r\n\r\nlangOptions.sort((a, b) => {\r\n\tif (a.text > b.text) {\r\n\t\treturn 1\r\n\t}\r\n\tif (a.text < b.text) {\r\n\t\treturn -1\r\n\t}\r\n\treturn 0\r\n})\r\n\r\nconst langSearch = (options: array, query: string) => {\r\n\tconst re = new RegExp('^' + _.escapeRegExp(query), 'i')\r\n\tlet filteredOptions = _.filter(options, opt =>\r\n\t\tre.test(opt.text)\r\n\t)\r\n\treturn filteredOptions\r\n}\r\n\r\nconst LanguageSelector = ({\r\n\tinput,\r\n\t...rest\r\n}: any) => (\r\n\t<Field\r\n\t\t{...input}\r\n\t\t{...rest}\r\n\t\tsearch={langSearch}\r\n\t\tscrolling\r\n\t\toptions={langOptions}\r\n\t\tplaceholder='Optional'\r\n\t\tcomponent={DropdownComponent}/>\r\n)\r\n\r\nexport default LanguageSelector\r\n","/**\r\n * @flow\r\n * @file Simple fetch wrapper\r\n */\r\nimport fetch from 'isomorphic-fetch'\r\n\r\n// USAGE:\r\nexport const get = requestWrapper('GET')\r\n// get('https://www.google.com')\r\nexport const post = requestWrapper('POST')\r\n// post('https://www.google.com', data)\r\nexport const put = requestWrapper('PUT')\r\n// put('https://www.google.com', data)\r\n\r\n// Create request wrapper for certain method\r\nfunction requestWrapper (method: 'GET' | 'POST' | 'DELETE' | 'PUT' | 'PATCH') {\r\n\t// Creates request to `url` with `data`\r\n\treturn async (url: string, data: any = null) => {\r\n\t\tconst body = data ? {body: JSON.stringify(data)} : {}\r\n\r\n\t\tconst request = {\r\n\t\t\tmethod,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tmode: process.env.NODE_ENV === 'development' ? 'cors' : 'same-origin',\r\n\t\t\tcredentials: 'same-origin',\r\n\t\t\t...body\r\n\t\t}\r\n\r\n\t\treturn fetch(url, request)\r\n\t}\r\n}\r\n","// @flow\r\nexport {get, post, put} from './simpleFetch'\r\n\r\nexport const parseJSON = async function (res: Response): Object {\r\n\tconst data = await res.json()\r\n\tconst {status, ok} = res\r\n\treturn {data, ok, status}\r\n}\r\n\r\nexport const parseXML = async function (res: Response): Object {\r\n\tlet text = await res.text()\r\n\ttry {\r\n\t\ttext = JSON.parse(text)\r\n\t} catch (e) {\r\n\t}\r\n\tconst parser = new DOMParser()\r\n\tconst xml = parser.parseFromString(text, 'text/xml')\r\n\tconst {status, ok} = res\r\n\treturn {data: xml, ok, status}\r\n}\r\n","// @flow\r\nimport React from 'react'\r\nimport {Field} from 'redux-form'\r\nimport {DropdownComponent} from './FormControls'\r\nimport {get, parseJSON} from '../../../api/utils'\r\nimport {required} from './FieldValidation'\r\n\r\nlet isFetched = false\r\nlet fetchedProjects = []\r\n\r\nclass ProjectSelector extends React.Component<Props, State> {\r\n\t// static propTypes = {\r\n\t// \tname: String,\r\n\t// \tlabel: String\r\n\t// }\r\n\tstate = {\r\n\t\tprojects: []\r\n\t}\r\n\r\n\tstatic isFetched = false\r\n\r\n\tcomponentDidMount () {\r\n\t\tif (!isFetched) {\r\n\t\t\tget(process.env.REACT_APP_ENTITIES_HOST + '/projects/json-lookup').then(parseJSON).then(res => {\r\n\t\t\t\tconst projects = []\r\n\t\t\t\tfor (let key in res.data) {\r\n\t\t\t\t\tconst obj = res.data[key]\r\n\t\t\t\t\tprojects.push({\r\n\t\t\t\t\t\tkey: 'node/' + obj.nid,\r\n\t\t\t\t\t\tvalue: 'node/' + obj.nid,\r\n\t\t\t\t\t\ttext: obj.title\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tprojects.sort((a, b) => {\r\n\t\t\t\t\tif (a.text > b.text) {\r\n\t\t\t\t\t\treturn 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a.text < b.text) {\r\n\t\t\t\t\t\treturn -1\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0\r\n\t\t\t\t})\r\n\t\t\t\tthis.setState({projects})\r\n\t\t\t\tisFetched = true\r\n\t\t\t\tfetchedProjects = projects\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.warn('error fetching projects!', err)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.setState({projects: fetchedProjects})\r\n\t\t}\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst name = this.props.name\r\n\t\tconst label = this.props.label\r\n\t\tconst changeFunc = this.props.changeFunc\r\n\t\tconst optional = this.props.optional\r\n\r\n\t\treturn (\r\n\t\t\t<Field\r\n\t\t\t\tname={`${name}.value`}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\toptions={this.state.projects}\r\n\t\t\t\tplaceholder={optional ? 'Optional' : 'Select Project'}\r\n\t\t\t\trequired={!optional}\r\n\t\t\t\tvalidate={optional ? [] : [required]}\r\n\t\t\t\tcomponent={DropdownComponent}\r\n\t\t\t\tonChange={(event, newVal, prevVal) => {\r\n\t\t\t\t\tconst match = fetchedProjects.find(project => {\r\n\t\t\t\t\t\treturn project.value === newVal\r\n\t\t\t\t\t})\r\n\t\t\t\t\tchangeFunc(`${name}.title`, match.text)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default ProjectSelector\r\n","// @flow\r\nimport React from 'react'\r\nimport {Field} from 'redux-form'\r\nimport {Grid, Header, Divider} from 'semantic-ui-react'\r\nimport {DropdownAddableComponent} from '../components/FormControls'\r\nimport SegmentRepeater from '../components/SegmentRepeater'\r\nimport NameParts from '../components/NameParts'\r\nimport LanguageSelector from '../components/LanguageSelector'\r\nimport ProjectSelector from '../components/ProjectSelector'\r\nimport {required} from '../components/FieldValidation'\r\n\r\nconst VariantNames = ({\r\n\tname,\r\n\tvariantOptions,\r\n\tnameOptions,\r\n\tchangeFunc\r\n}: any) => (\r\n\t<div>\r\n\t\t<Header as=\"h4\">Variant Name</Header>\r\n\t\t<Grid stackable>\r\n\t\t\t<Grid.Column width={6}>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tname={`${name}.type`}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\tlabel='Variant Type'\r\n\t\t\t\t\toptions={variantOptions}\r\n\t\t\t\t\tplaceholder='Select Type'\r\n\t\t\t\t\tcomponent={DropdownAddableComponent}/>\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={5}>\r\n\t\t\t\t<ProjectSelector\r\n\t\t\t\t\tname={`${name}.project`}\r\n\t\t\t\t\tlabel='Project'\r\n\t\t\t\t\toptional={true}\r\n\t\t\t\t\tchangeFunc={changeFunc}\r\n\t\t\t\t/>\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={5}>\r\n\t\t\t\t<LanguageSelector\r\n\t\t\t\t\tname={`${name}.lang`}\r\n\t\t\t\t\tlabel=\"Language\"/>\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid>\r\n\t\t<Divider/>\r\n\t\t<SegmentRepeater\r\n\t\t\tfieldArrayName={`${name}.parts`}\r\n\t\t\theaderLabel=\"Components\"\r\n\t\t\tcomponentLabel=\"Component\"\r\n\t\t\tnameOptions={nameOptions}\r\n\t\t\tRepeatableComponent={NameParts}\r\n\t\t/>\r\n\t</div>\r\n)\r\n\r\nexport default VariantNames\r\n","// @flow\r\nimport React from 'react'\r\nimport {\r\n\tGrid, Button, Popup, Icon, Header\r\n} from 'semantic-ui-react'\r\nimport {Field} from 'redux-form'\r\nimport {DropdownComponent} from '../components/FormControls'\r\n\r\nimport '../../../static/bootstrap/bootstrap-scoped.css'\r\n\r\nimport cwrc from 'cwrc-tei-entities-lookup'\r\nimport viaf from 'viaf-entity-lookup'\r\nimport dbpedia from 'dbpedia-entity-lookup'\r\nimport wikidata from 'wikidata-entity-lookup'\r\nimport getty from 'getty-entity-lookup'\r\nimport geonames from 'geonames-entity-lookup'\r\n\r\nimport PublicEntityDialog from 'cwrc-public-entity-dialogs'\r\n\r\ncwrc.setEntityRoot('https://dev-02.cwrc.ca/islandora/object')\r\ncwrc.setSearchRoot('https://dev-02.cwrc.ca/islandora/cwrc_entities/v1')\r\n\r\nPublicEntityDialog.showCreateNewButton(false)\r\nPublicEntityDialog.showNoLinkButton(false)\r\nPublicEntityDialog.registerEntitySources({\r\n\tperson: (new Map()).set('cwrc', cwrc).set('viaf', viaf).set('wikidata', wikidata).set('getty', getty).set('dbpedia', dbpedia),\r\n\tplace: (new Map()).set('geonames', geonames).set('cwrc', cwrc).set('viaf', viaf).set('dbpedia', dbpedia).set('wikidata', wikidata),\r\n\torganization: (new Map()).set('cwrc', cwrc).set('viaf', viaf).set('wikidata', wikidata).set('dbpedia', dbpedia),\r\n\ttitle: (new Map()).set('cwrc', cwrc).set('viaf', viaf).set('wikidata', wikidata).set('dbpedia', dbpedia)\r\n})\r\n\r\nclass EntityLookup extends React.Component<Props, State> {\r\n\tstate = { hasLookup: false }\r\n\r\n\thandleSearchClick = () => {\r\n\t\tconst name = this.props.name\r\n\t\tconst entityType = this.props.entityType\r\n\t\tconst changeFunc = this.props.changeFunc\r\n\r\n\t\tPublicEntityDialog.popSearch[entityType]({\r\n\t\t\tquery: '',\r\n\t\t\tparentEl: document.querySelector('body'),\r\n\t\t\tsuccess: (result) => {\r\n\t\t\t\tchangeFunc(`${name}.name`, result.name)\r\n\t\t\t\tchangeFunc(`${name}.idno`, result.uri)\r\n\t\t\t\tchangeFunc(`${name}.type`, result.repository)\r\n\t\t\t\tthis.setState({ hasLookup: true })\r\n\t\t\t},\r\n\t\t\terror: (error) => {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\thandleClearClick = () => {\r\n\t\tconst name = this.props.name\r\n\t\tconst changeFunc = this.props.changeFunc\r\n\t\tchangeFunc(`${name}.name`, '')\r\n\t\tchangeFunc(`${name}.idno`, '')\r\n\t\tchangeFunc(`${name}.type`, '')\r\n\t\tthis.setState({ hasLookup: false })\r\n\t}\r\n\r\n\trenderName = (field) => (\r\n\t\t<Header as='h5' style={{marginBottom: '0.2em'}}>{field.input.value}</Header>\r\n\t)\r\n\r\n\trenderURI = (field) => {\r\n\t\tif (field.input.value !== undefined) {\r\n\t\t\treturn <a href={field.input.value} style={{display: 'block', overflow: 'hidden', textOverflow: 'ellipsis'}} target='_blank' rel=\"noopener noreferrer\">{field.input.value}</a>\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst name = this.props.name\r\n\t\tconst buttonLabel = this.props.buttonLabel\r\n\t\tconst includeCertainty = this.props.includeCertainty\r\n\t\tconst certaintyOptions = this.props.certaintyOptions\r\n\t\tconst includeClear = this.props.includeClear\r\n\t\tconst entityType = this.props.entityType\r\n\t\tconst entityLabel = entityType.charAt(0).toUpperCase() + entityType.slice(1)\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t<Grid.Row verticalAlign='top'>\r\n\t\t\t\t\t\t{this.state.hasLookup === false &&\r\n\t\t\t\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t\t\t\t<Button type=\"button\" size='tiny' color='grey' onClick={() => this.handleSearchClick()}>\r\n\t\t\t\t\t\t\t\t<Icon name='search' />{buttonLabel}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t<Field name={`${name}.name`} component={this.renderName} />\r\n\t\t\t\t\t\t\t<Field name={`${name}.idno`} component={this.renderURI} />\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t{includeCertainty &&\r\n\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t<Field name={`${name}.cert`}\r\n\t\t\t\t\t\t\t\tlabel='Certainty' placeholder='Optional' component={DropdownComponent} options={certaintyOptions}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{(includeClear && this.state.hasLookup) &&\r\n\t\t\t\t\t\t<Grid.Column width={1}>\r\n\t\t\t\t\t\t\t<Popup size='tiny' position='right center' trigger={\r\n\t\t\t\t\t\t\t\t<Button type=\"button\" size='tiny' color='red' icon='minus' onClick={() => this.handleClearClick()} />\r\n\t\t\t\t\t\t\t} content={`Clear ${entityLabel}`} />\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Grid.Row>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default EntityLookup\r\n","// @flow\r\nimport React from 'react'\r\nimport {Segment} from 'semantic-ui-react'\r\nimport SegmentRepeater from './SegmentRepeater'\r\nimport NameParts from './NameParts'\r\nimport VariantNames from './VariantNames'\r\nimport LanguageSelector from './LanguageSelector'\r\nimport EntityLookup from './EntityLookup'\r\nimport {InputField} from './FormControls'\r\nimport {Field} from 'redux-form'\r\nimport {required} from './FieldValidation'\r\n\r\nconst IdentityGroup = ({\r\n\tentityType,\r\n\tnameOptions,\r\n\tvariantOptions,\r\n\tcertaintyOptions,\r\n\tchangeFunc\r\n}: any) => (\r\n\t<Segment.Group>\r\n\t\t<Segment>\r\n\t\t\t<Field\r\n\t\t\t\trequired\r\n\t\t\t\tvalidate={[required]}\r\n\t\t\t\tplaceholder=\"e.g. Last Name, First Name (for indexing purposes)\"\r\n\t\t\t\tname=\"identity.standardName\"\r\n\t\t\t\tlabel=\"Standard Name\"\r\n\t\t\t\tinline\r\n\t\t\t\tcomponent={InputField}\r\n\t\t\t/>\r\n\t\t\t<Segment basic>\r\n\t\t\t\t<LanguageSelector\r\n\t\t\t\t\tlabel=\"Language\"\r\n\t\t\t\t\tname=\"identity.namePartsLang\"\r\n\t\t\t\t/>\r\n\t\t\t\t<SegmentRepeater\r\n\t\t\t\t\tfieldArrayName=\"identity.nameParts\"\r\n\t\t\t\t\theaderLabel=\"Components\"\r\n\t\t\t\t\tcomponentLabel=\"Component\"\r\n\t\t\t\t\tnameOptions={nameOptions}\r\n\t\t\t\t\tRepeatableComponent={NameParts}\r\n\t\t\t\t/>\r\n\t\t\t</Segment>\r\n\t\t</Segment>\r\n\t\t<SegmentRepeater\r\n\t\t\tfieldArrayName=\"identity.variants\"\r\n\t\t\theaderLabel=\"Variant Name(s)\"\r\n\t\t\tcomponentLabel=\"Variant Name\"\r\n\t\t\tRepeatableComponent={VariantNames}\r\n\t\t\tnameOptions={nameOptions}\r\n\t\t\tvariantOptions={variantOptions}\r\n\t\t\tchangeFunc={changeFunc}\r\n\t\t/>\r\n\t\t<SegmentRepeater\r\n\t\t\tfieldArrayName=\"identity.sameAs\"\r\n\t\t\theaderLabel=\"Same As\"\r\n\t\t\tcomponentLabel=\"Same As\"\r\n\t\t\tRepeatableComponent={EntityLookup}\r\n\t\t\tbuttonLabel={'Add ' + entityType.charAt(0).toUpperCase() + entityType.substring(1)}\r\n\t\t\tincludeCertainty={true}\r\n\t\t\tcertaintyOptions={certaintyOptions}\r\n\t\t\tentityType={entityType}\r\n\t\t\tchangeFunc={changeFunc}\r\n\t\t/>\r\n\t</Segment.Group>\r\n)\r\n\r\nexport default IdentityGroup\r\n","// @flow\r\nimport React from 'react'\r\nimport {Grid} from 'semantic-ui-react'\r\nimport SegmentRepeater from './SegmentRepeater'\r\nimport LanguageSelector from './LanguageSelector'\r\nimport ProjectSelector from './ProjectSelector'\r\nimport {Field} from 'redux-form'\r\n\r\nconst DescriptiveNoteComponent = ({name}: String) => (\r\n\t<Grid>\r\n\t\t<Grid.Row>\r\n\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t<LanguageSelector label=\"Language\" name={`${name}.lang`}/>\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid.Row>\r\n\t\t<Grid.Row>\r\n\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t<Field\r\n\t\t\t\t\twidth={10}\r\n\t\t\t\t\tname={`${name}.value`}\r\n\t\t\t\t\tcomponent='textarea'\r\n\t\t\t\t\trows={3}\r\n\t\t\t\t\tplaceholder=\"Add your note here.\"/>\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid.Row>\r\n\t</Grid>\r\n)\r\n\r\nconst DescriptiveNote = () => (\r\n\t<SegmentRepeater\r\n\t\tfieldArrayName=\"description.descriptiveNote\"\r\n\t\theaderLabel=\"General Description(s)\"\r\n\t\tcomponentLabel=\"Note\"\r\n\t\tRepeatableComponent={DescriptiveNoteComponent}\r\n\t/>\r\n)\r\n\r\nconst ProjectNoteComponent = ({name, changeFunc}: any) => (\r\n\t<Grid>\r\n\t\t<Grid.Row>\r\n\t\t\t<Grid.Column width={8}>\r\n\t\t\t\t<ProjectSelector label=\"Project\" name={`${name}.project`} changeFunc={changeFunc}/>\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={8}>\r\n\t\t\t\t<LanguageSelector label=\"Language\" name={`${name}.lang`}/>\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid.Row>\r\n\t\t<Grid.Row>\r\n\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t<Field\r\n\t\t\t\t\twidth={10}\r\n\t\t\t\t\tname={`${name}.value`}\r\n\t\t\t\t\tcomponent='textarea'\r\n\t\t\t\t\trows={3}\r\n\t\t\t\t\tplaceholder=\"Add your note here.\"/>\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid.Row>\r\n\t</Grid>\r\n)\r\n\r\nconst ProjectNote = ({changeFunc}: any) => (\r\n\t<SegmentRepeater\r\n\t\tfieldArrayName=\"description.projectNote\"\r\n\t\theaderLabel=\"Project-Specific Note(s)\"\r\n\t\tcomponentLabel=\"Description\"\r\n\t\tchangeFunc={changeFunc}\r\n\t\tRepeatableComponent={ProjectNoteComponent}\r\n\t/>\r\n)\r\n\r\nexport {DescriptiveNote, ProjectNote}\r\n","// @flow\r\nimport React from 'react'\r\nimport {\r\n\tHeader,\r\n\tGrid,\r\n\tButton,\r\n\tIcon,\r\n\tSegment,\r\n\tPopup\r\n} from 'semantic-ui-react'\r\nimport {Field, FieldArray} from 'redux-form'\r\nimport {DropdownComponent, InputField} from './FormControls'\r\n// import DateComponent from './DateComponent'\r\nimport EntityLookup from './EntityLookup'\r\nimport {required, isDate} from '../components/FieldValidation'\r\n\r\nconst dateQualifierOptions = [\r\n\t{key: 'when-iso', text: 'When', value: 'when-iso'},\r\n\t{key: 'from-iso', text: 'From', value: 'from-iso'},\r\n\t{key: 'to-iso', text: 'To', value: 'to-iso'},\r\n\t{key: 'notBefore-iso', text: 'Not before', value: 'notBefore-iso'},\r\n\t{key: 'notAfter-iso', text: 'Not after', value: 'notAfter-iso'}\r\n]\r\n\r\nconst dateRangeQualifierOptions = [\r\n\t{key: 'from-iso', text: 'From', value: 'from-iso'},\r\n\t{key: 'to-iso', text: 'To', value: 'to-iso'},\r\n\t{key: 'notBefore-iso', text: 'Not before', value: 'notBefore-iso'},\r\n\t{key: 'notAfter-iso', text: 'Not after', value: 'notAfter-iso'}\r\n]\r\n\r\nconst certaintyOptions = [\r\n\t{key: 'high', text: 'High', value: 'high'},\r\n\t{key: 'medium', text: 'Medium', value: 'medium'},\r\n\t{key: 'low', text: 'Low', value: 'low'},\r\n\t{key: 'unknown', text: 'Unknown', value: 'unknown'}\r\n]\r\n\r\nconst DateRepeater = ({\r\n\tfieldArrayName,\r\n\tcomponentLabel,\r\n\tdateTypeOptions,\r\n\tchangeFunc,\r\n\t...rest\r\n}: any) => {\r\n\treturn (\r\n\t\t<FieldArray\r\n\t\t\tname={fieldArrayName}\r\n\t\t\tprops={{componentLabel, changeFunc, dateTypeOptions}}\r\n\t\t\tcomponent={renderSegment}\r\n\t\t\t{...rest}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nconst renderSegment = ({\r\n\tfields,\r\n\theaderLabel,\r\n\tcomponentLabel,\r\n\tchangeFunc,\r\n\tdateTypeOptions,\r\n\tmeta: {touched, error, submitFailed},\r\n\t...rest\r\n}: any) => (\r\n\t<Segment secondary>\r\n\t\t<Segment clearing basic style={{padding: 0}}>\r\n\t\t\t<Header as=\"h4\" floated='left'>{headerLabel}</Header>\r\n\t\t\t<Button type=\"button\" floated='right' size='tiny' color='grey' onClick={() => fields.push({isRange: true})}>\r\n\t\t\t\t<Icon name='plus' />Date Range\r\n\t\t\t</Button>\r\n\t\t\t<Button type=\"button\" floated='right' size='tiny' color='grey' onClick={() => fields.push({isRange: false})}>\r\n\t\t\t\t<Icon name='plus' />Simple Date\r\n\t\t\t</Button>\r\n\t\t</Segment>\r\n\t\t{fields.map((name, index) => {\r\n\t\t\tconst field = fields.get(index)\r\n\t\t\tlet isRange = field.isRange\r\n\t\t\tif (isRange === undefined) {\r\n\t\t\t\tisRange = field.date1 !== undefined && field.date2 !== undefined\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Segment key={index}>\r\n\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t\t\t<Grid.Row columns={2}>\r\n\t\t\t\t\t\t\t\t\t{!isRange &&\r\n\t\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.date1`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required, isDate]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Date'\r\n\t\t\t\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='YYYY-MM-DD'/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Type'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{marginTop: '1em'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.type`}\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions={dateTypeOptions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Date Type'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t{!isRange &&\r\n\t\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Qualifier'\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.qualifier1`}\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions={dateQualifierOptions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Qualifier'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.cert`}\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t{isRange &&\r\n\t\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.date1`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required, isDate]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Date 1'\r\n\t\t\t\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='YYYY-MM-DD'/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Qualifier'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{marginTop: '1em'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.qualifier1`}\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions={dateRangeQualifierOptions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Qualifier'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Type'\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.type`}\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions={dateTypeOptions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Date Type'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t{isRange &&\r\n\t\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.date2`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required, isDate]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Date 2'\r\n\t\t\t\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='YYYY-MM-DD'/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Qualifier'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{marginTop: '1em'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.qualifier2`}\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions={dateRangeQualifierOptions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Qualifier'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}.cert`}\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Grid.Row>\r\n\t\t\t\t\t\t\t\t<Grid.Row>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<EntityLookup\r\n\t\t\t\t\t\t\t\t\t\t\tbuttonLabel='Add Place'\r\n\t\t\t\t\t\t\t\t\t\t\tname={`${name}.place`}\r\n\t\t\t\t\t\t\t\t\t\t\tentityType='place'\r\n\t\t\t\t\t\t\t\t\t\t\tchangeFunc={changeFunc}\r\n\t\t\t\t\t\t\t\t\t\t\tincludeClear={true}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid.Row>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t<Grid.Column width={4} stretched>\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tname={`${name}.note`}\r\n\t\t\t\t\t\t\t\tcomponent=\"textarea\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Note\"/>\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t<Grid.Column width={1}>\r\n\t\t\t\t\t\t\t<Popup size='tiny' position='right center' trigger={\r\n\t\t\t\t\t\t\t\t<Button type=\"button\" floated=\"right\" size='tiny' color='red' icon='minus' onClick={() => fields.remove(index)}/>\r\n\t\t\t\t\t\t\t} content={`Remove ${componentLabel}`} />\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Segment>\r\n\t\t\t)\r\n\t\t})}\r\n\t</Segment>\r\n)\r\n\r\nexport default DateRepeater\r\n","// @flow\r\nimport React, { Component } from 'react'\r\nimport { Button, Icon, Modal } from 'semantic-ui-react'\r\n\r\nexport default class MessageDialog extends Component {\r\n\tstatic propTypes = {\r\n\t\theader: String,\r\n\t\tcontent: String,\r\n\t\tonClose: Function\r\n\t}\r\n\tstate = { modalOpen: true }\r\n\r\n\thandleOpen = () => this.setState({ modalOpen: true })\r\n\r\n\thandleClose = () => {\r\n\t\tthis.setState({ modalOpen: false })\r\n\t\tthis.props.onClose.call()\r\n\t}\r\n\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\topen={this.state.modalOpen}\r\n\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\tstyle={{position: 'relative'}}\r\n\t\t\t\tcloseOnDimmerClick={false}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header>{this.props.header}</Modal.Header>\r\n\t\t\t\t<Modal.Content>{this.props.content}</Modal.Content>\r\n\t\t\t\t<Modal.Actions>\r\n\t\t\t\t\t<Button color='green' onClick={this.handleClose}>\r\n\t\t\t\t\t\t<Icon name='checkmark' /> Ok!\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Actions>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t}\r\n}\r\n","// @flow\r\nimport {createSelector} from 'reselect'\r\nimport type {State as AuthState} from 'reducers/auth'\r\nimport type {State as LayoutState} from 'reducers/layout'\r\nimport type {State as EntitiesLinksState} from 'reducers/links'\r\nimport type {GlobalState} from 'reducers'\r\n\r\nexport const getAuthState = (state: GlobalState): AuthState => state.auth\r\nexport const getLayoutState = (state: GlobalState): LayoutState => state.layout\r\nexport const getEntitiesLinksState = (state: GlobalState): EntitiesLinksState =>\r\n\tstate.entities.links\r\n\r\nexport const getWindowInnerWidth = (window: Object): number => {\r\n\tconst defaultWindowInnerWidth = 1025\r\n\treturn window && window.innerWidth\r\n\t\t? window.innerWidth\r\n\t\t: defaultWindowInnerWidth\r\n}\r\n\r\nexport const getLayoutMobileStatuses = createSelector(\r\n\tgetLayoutState,\r\n\t({innerWidth}) => {\r\n\t\tconst isMobile: boolean = innerWidth < 1025 // 1024px - breakpoint\r\n\t\tconst isMobileXS: boolean = innerWidth < 481\r\n\t\tconst isMobileSM: boolean = innerWidth > 480 && innerWidth < 767\r\n\t\treturn {isMobileSM, isMobileXS, isMobile}\r\n\t}\r\n)\r\n\r\nconst getUrlParameter = (search, name) => {\r\n\tname = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]')\r\n\tvar regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)')\r\n\tvar results = regex.exec(search)\r\n\treturn results === null ? undefined : decodeURIComponent(results[1].replace(/\\+/g, ' '))\r\n}\r\n\r\nexport const getEntityId = state => {\r\n\treturn getUrlParameter(state.routing.location.search, 'entityId')\r\n}\r\n\r\nexport const getCollectionId = state => {\r\n\tlet search\r\n\t// can't figure out a good way to send state from CollectionsSvc so use window location instead\r\n\tif (state !== undefined) {\r\n\t\tsearch = state.routing.location.search\r\n\t} else {\r\n\t\tsearch = window.location.search\r\n\t}\r\n\treturn getUrlParameter(search, 'collectionId')\r\n}\r\n\r\nexport const isPersonPostDone =\tstate => state.entities.person.post.status === 'done'\r\nexport const isPersonPostPending = state => state.entities.person.post.status === 'pending'\r\nexport const isPersonPostError = state => state.entities.person.post.status === 'error'\r\nexport const getPersonPostError = state => state.entities.person.post.error\r\nexport const getPersonPostData = state => state.entities.person.post.data\r\n\r\nexport const isPersonGetDone =\tstate => state.entities.person.get.status === 'done'\r\nexport const isPersonGetPending = state => state.entities.person.get.status === 'pending'\r\nexport const isPersonGetError = state => state.entities.person.get.status === 'error'\r\nexport const getPersonGetError = state => state.entities.person.get.error\r\nexport const getPersonGetData = state => state.entities.person.get.data\r\n\r\nexport const isPersonPutDone =\tstate => state.entities.person.put.status === 'done'\r\nexport const isPersonPutPending = state => state.entities.person.put.status === 'pending'\r\nexport const isPersonPutError = state => state.entities.person.put.status === 'error'\r\nexport const getPersonPutError = state => state.entities.person.put.error\r\nexport const getPersonPutData = state => state.entities.person.put.data\r\n\r\nexport const isPlacePostDone =\tstate => state.entities.place.post.status === 'done'\r\nexport const isPlacePostPending = state => state.entities.place.post.status === 'pending'\r\nexport const isPlacePostError = state => state.entities.place.post.status === 'error'\r\nexport const getPlacePostError = state => state.entities.place.post.error\r\nexport const getPlacePostData = state => state.entities.place.post.data\r\n\r\nexport const isPlaceGetDone =\tstate => state.entities.place.get.status === 'done'\r\nexport const isPlaceGetPending = state => state.entities.place.get.status === 'pending'\r\nexport const isPlaceGetError = state => state.entities.place.get.status === 'error'\r\nexport const getPlaceGetError = state => state.entities.place.get.error\r\nexport const getPlaceGetData = state => state.entities.place.get.data\r\n\r\nexport const isPlacePutDone =\tstate => state.entities.place.put.status === 'done'\r\nexport const isPlacePutPending = state => state.entities.place.put.status === 'pending'\r\nexport const isPlacePutError = state => state.entities.place.put.status === 'error'\r\nexport const getPlacePutError = state => state.entities.place.put.error\r\nexport const getPlacePutData = state => state.entities.place.put.data\r\n\r\nexport const isOrganizationPostDone =\tstate => state.entities.organization.post.status === 'done'\r\nexport const isOrganizationPostPending = state => state.entities.organization.post.status === 'pending'\r\nexport const isOrganizationPostError = state => state.entities.organization.post.status === 'error'\r\nexport const getOrganizationPostError = state => state.entities.organization.post.error\r\nexport const getOrganizationPostData = state => state.entities.organization.post.data\r\n\r\nexport const isOrganizationGetDone =\tstate => state.entities.organization.get.status === 'done'\r\nexport const isOrganizationGetPending = state => state.entities.organization.get.status === 'pending'\r\nexport const isOrganizationGetError = state => state.entities.organization.get.status === 'error'\r\nexport const getOrganizationGetError = state => state.entities.organization.get.error\r\nexport const getOrganizationGetData = state => state.entities.organization.get.data\r\n\r\nexport const isOrganizationPutDone =\tstate => state.entities.organization.put.status === 'done'\r\nexport const isOrganizationPutPending = state => state.entities.organization.put.status === 'pending'\r\nexport const isOrganizationPutError = state => state.entities.organization.put.status === 'error'\r\nexport const getOrganizationPutError = state => state.entities.organization.put.error\r\nexport const getOrganizationPutData = state => state.entities.organization.put.data\r\n","// @flow\r\nimport Cookies from 'js-cookie'\r\nimport {get, parseJSON} from '../utils'\r\nimport {getCollectionId as getCollectionIdFromURL} from '../../selectors'\r\n\r\nconst IS_NODE = navigator.userAgent.toLowerCase().indexOf('node.js') !== -1\r\n\r\nexport const getCollectionId = (entityType) => {\r\n\tif (IS_NODE) { // can't access cookies when using react-snapshot\r\n\t\treturn ''\r\n\t} else {\r\n\t\t// collectionId in URL overrides any set cookie\r\n\t\tconst collectionId = getCollectionIdFromURL()\r\n\t\tif (collectionId !== undefined) {\r\n\t\t\treturn collectionId\r\n\t\t} else {\r\n\t\t\treturn Cookies.get(`${process.env.REACT_APP_COLLECTIONS_COOKIE_BASE}-${entityType}`)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const setCollectionId = (entityType, id) => {\r\n\tconst expiry = 1 / 12 // 2 hours\r\n\tCookies.set(`${process.env.REACT_APP_COLLECTIONS_COOKIE_BASE}-${entityType}`, id, { expires: expiry, path: '/' })\r\n}\r\n\r\nexport const getCollections = async () => {\r\n\treturn get(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_COLLECTIONS_BASE}`)\r\n\t\t.then(parseJSON)\r\n\t\t.catch(err => {\r\n\t\t\tconsole.warn('error fetching collections!', err)\r\n\t\t\tif (process.env.NODE_ENV === 'development') {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tresponse: {\r\n\t\t\t\t\t\t\tdocs: [\r\n\t\t\t\t\t\t\t\t{PID: 'cwrc:personEntityCollection', fgs_label_s: 'CWRC Person Entity Collection'},\r\n\t\t\t\t\t\t\t\t{PID: 'cwrc:organizationEntityCollection', fgs_label_s: 'CWRC Organization Entity Collection'},\r\n\t\t\t\t\t\t\t\t{PID: 'cwrc:placeEntityCollection', fgs_label_s: 'CWRC Place Entity Collection'},\r\n\t\t\t\t\t\t\t\t{PID: 'reed:personEntityCollection', fgs_label_s: 'Reed Person Entity Collection'},\r\n\t\t\t\t\t\t\t\t{PID: 'reed:organizationEntityCollection', fgs_label_s: 'Reed Organization Entity Collection'},\r\n\t\t\t\t\t\t\t\t{PID: 'reed:placeEntityCollection', fgs_label_s: 'Reed Place Entity Collection'}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tresponse: {\r\n\t\t\t\t\t\t\tdocs: []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t\t.then(res => {\r\n\t\t\tconst collections = []\r\n\t\t\tfor (let d of res.data.response.docs) {\r\n\t\t\t\tcollections.push({\r\n\t\t\t\t\tvalue: d.PID,\r\n\t\t\t\t\ttext: d.fgs_label_s\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn collections\r\n\t\t})\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Grid, Button, Icon, Modal, Dropdown } from 'semantic-ui-react'\r\nimport {getCollections, setCollectionId} from '../../../api/CollectionsSvc'\r\n\r\nexport default class CollectionsDialog extends Component {\r\n\tstatic propTypes = {\r\n\t\tentityType: String\r\n\t}\r\n\tstate = {\r\n\t\tmodalOpen: true,\r\n\t\tcollections: [],\r\n\t\tvalue: undefined,\r\n\t\tloading: true,\r\n\t\terror: false\r\n\t}\r\n\r\n\thandleOpen = () => this.setState({ modalOpen: true })\r\n\r\n\thandleChange = (e, { value }) => this.setState({value: value})\r\n\r\n\thandleClose = () => {\r\n\t\tif (this.state.value === undefined) {\r\n\t\t\treturn false\r\n\t\t} else {\r\n\t\t\tthis.setState({ modalOpen: false })\r\n\t\t\tsetCollectionId(this.props.entityType, this.state.value)\r\n\t\t}\r\n\t}\r\n\r\n\thandleCancel = () => window.close()\r\n\r\n\tcomponentDidMount () {\r\n\t\tconst entityType = this.props.entityType\r\n\t\tgetCollections().then(collections => {\r\n\t\t\tif (collections.length > 0) {\r\n\t\t\t\tconst filteredCollections = collections.filter(collection => collection.value.indexOf(`:${entityType}`) !== -1)\r\n\t\t\t\tthis.setState({loading: false, collections: filteredCollections, value: collections[0].value})\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({loading: false, error: true, collections: []})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst value = this.state.value\r\n\t\tconst loading = this.state.loading\r\n\t\tconst error = this.state.error\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\topen={this.state.modalOpen}\r\n\t\t\t\tcloseOnEscape={false}\r\n\t\t\t\tcloseOnDocumentClick={false}\r\n\t\t\t\tcloseOnDimmerClick={false}\r\n\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\tstyle={{position: 'relative', overflow: 'visible'}} // overflow visible needed for dropdown\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header>CWRC Collections</Modal.Header>\r\n\t\t\t\t<Modal.Content>\r\n\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t<Grid.Column width={6}>\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tplaceholder={error ? 'You do not have access to any CWRC collections' : 'Select collection'}\r\n\t\t\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\t\t\tselection\r\n\t\t\t\t\t\t\t\tscrolling\r\n\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\t\t\toptions={this.state.collections}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t<Grid.Column width={8}>\r\n\t\t\t\t\t\t\t<p>Please choose a CWRC collection in which to create the entity.<br/>\r\n\t\t\t\t\t\t\tYour choice will be used for all new entities created in this editing session.</p>\r\n\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Modal.Content>\r\n\t\t\t\t<Modal.Actions>\r\n\t\t\t\t\t<Button onClick={this.handleCancel}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color='green' onClick={this.handleClose}>\r\n\t\t\t\t\t\t<Icon name='checkmark' /> Use selected collection\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Actions>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t}\r\n}\r\n","export const factualityOptions = [\r\n\t{key: '', text: '', value: ''},\r\n\t{key: 'real', text: 'Real', value: 'real'},\r\n\t{key: 'fictional', text: 'Fictional', value: 'fictional'}\r\n]\r\n\r\nexport const certaintyOptions = [\r\n\t{key: '', text: '', value: ''},\r\n\t{key: 'high', text: 'High', value: 'high'},\r\n\t{key: 'medium', text: 'Medium', value: 'medium'},\r\n\t{key: 'low', text: 'Low', value: 'low'},\r\n\t{key: 'unknown', text: 'Unknown', value: 'unknown'}\r\n]\r\n\r\nexport const genderOptions = [\r\n\t{key: '', text: '', value: ''},\r\n\t{key: 'cisGender', text: 'cisGender', value: 'cisGender'},\r\n\t{key: 'cisWoman', text: 'cisWoman', value: 'cisWoman'},\r\n\t{key: 'cisMan', text: 'cisMan', value: 'cisMan'},\r\n\t{key: 'woman', text: 'woman', value: 'woman'},\r\n\t{key: 'man', text: 'man', value: 'man'},\r\n\t{key: 'transgender', text: 'transgender', value: 'transgender'},\r\n\t{key: 'transwoman', text: 'transwoman', value: 'transwoman'},\r\n\t{key: 'transman', text: 'transman', value: 'transman'},\r\n\t{key: 'androgynous', text: 'androgynous', value: 'androgynous'},\r\n\t{key: 'genderqueer', text: 'genderqueer', value: 'genderqueer'},\r\n\t{key: 'genderselfreported', text: 'genderselfreported', value: 'genderselfreported'}\r\n]\r\n\r\nexport const personNameTypeOptions = [\r\n\t{key: 'forename', text: 'Forename', value: 'forename'},\r\n\t{key: 'surname', text: 'Surname', value: 'surname'},\r\n\t{key: 'generational', text: 'Generational', value: 'generational'},\r\n\t{key: 'role', text: 'Role', value: 'role'}\r\n]\r\n\r\nexport const personVariantTypeOptions = [\r\n\t{key: 'birth', text: 'birth', value: 'birth'},\r\n\t{key: 'married', text: 'married', value: 'married'},\r\n\t{key: 'indexed', text: 'indexed', value: 'indexed'},\r\n\t{key: 'pseudonym', text: 'pseudonym', value: 'pseudonym'},\r\n\t{key: 'nickname', text: 'nickname', value: 'nickname'},\r\n\t{key: 'religious', text: 'religious', value: 'religious'},\r\n\t{key: 'royal', text: 'royal', value: 'royal'},\r\n\t{key: 'self-constructed', text: 'self-constructed', value: 'self-constructed'},\r\n\t{key: 'styled', text: 'styled', value: 'styled'},\r\n\t{key: 'titled', text: 'titled', value: 'titled'},\r\n\t{key: 'orlando_standard', text: 'orlando standard', value: 'orlando_standard'},\r\n\t{key: 'descriptive', text: 'descriptive', value: 'descriptive'},\r\n\t{key: 'popular', text: 'popular', value: 'popular'},\r\n\t{key: 'acronym', text: 'acronym', value: 'acronym'},\r\n\t{key: 'alternate', text: 'alternate', value: 'alternate'},\r\n\t{key: 'deprecated', text: 'deprecated', value: 'deprecated'},\r\n\t{key: 'historic', text: 'historic', value: 'historic'}\r\n]\r\n\r\nexport const personDateTypeOptions = [\r\n\t{key: 'birth', text: 'Birth', value: 'birth'},\r\n\t{key: 'death', text: 'Death', value: 'death'},\r\n\t{key: 'floruit', text: 'Floruit', value: 'floruit'}\r\n]\r\n\r\nexport const nonPersonVariantTypeOptions = [\r\n\t{key: 'indexed', text: 'indexed', value: 'indexed'},\r\n\t{key: 'nickname', text: 'nickname', value: 'nickname'},\r\n\t{key: 'orlando_standard', text: 'orlando standard', value: 'orlando_standard'},\r\n\t{key: 'descriptive', text: 'descriptive', value: 'descriptive'},\r\n\t{key: 'popular', text: 'popular', value: 'popular'},\r\n\t{key: 'acronym', text: 'acronym', value: 'acronym'},\r\n\t{key: 'alternate', text: 'alternate', value: 'alternate'},\r\n\t{key: 'deprecated', text: 'deprecated', value: 'deprecated'},\r\n\t{key: 'historic', text: 'historic', value: 'historic'}\r\n]\r\n\r\nexport const nonPersonDateTypeOptions = [\r\n\t{key: 'establishment', text: 'Establishment', value: 'establishment'},\r\n\t{key: 'dissolution', text: 'Dissolution', value: 'dissolution'},\r\n\t{key: 'flourished', text: 'Flourished', value: 'flourished'}\r\n]\r\n","// @flow\r\n\r\nexport function createXMLFromPath (parent: Element, path: String, childText?: String) {\r\n\tlet currParent = parent\r\n\tif (path !== undefined && path !== '') {\r\n\t\tlet tags = path.split('/')\r\n\t\tfor (let tag of tags) {\r\n\t\t\tlet hasAtt = tag.indexOf('[') !== -1\r\n\t\t\tlet tagName\r\n\t\t\tif (hasAtt) {\r\n\t\t\t\ttagName = tag.slice(0, tag.indexOf('['))\r\n\t\t\t} else {\r\n\t\t\t\ttagName = tag\r\n\t\t\t}\r\n\t\t\tlet el = parent.ownerDocument.createElementNS('http://www.tei-c.org/ns/1.0', tagName)\r\n\t\t\tif (hasAtt) {\r\n\t\t\t\tlet attName = tag.slice(tag.indexOf('@') + 1, tag.indexOf('='))\r\n\t\t\t\tlet attValue = tag.slice(tag.indexOf('\"') + 1, tag.lastIndexOf('\"'))\r\n\t\t\t\tattValue = decodeURIComponent(attValue)\r\n\t\t\t\tel.setAttribute(attName, attValue)\r\n\t\t\t}\r\n\t\t\tcurrParent.appendChild(el)\r\n\r\n\t\t\tcurrParent = el\r\n\t\t}\r\n\t}\r\n\tif (childText !== undefined) {\r\n\t\tcurrParent.appendChild(currParent.ownerDocument.createTextNode(childText))\r\n\t}\r\n\r\n\treturn currParent\r\n}\r\n\r\nexport function getDateString (date: String) {\r\n\tlet d\r\n\tif (typeof date === 'string') {\r\n\t\t// handling for weird date stuff\r\n\t\t// see https://stackoverflow.com/a/31732581\r\n\t\t// d = new Date(date.replace(/-/g, '/'))\r\n\t\treturn date\r\n\t} else {\r\n\t\td = date\r\n\t}\r\n\r\n\tlet month = '' + (d.getMonth() + 1)\r\n\tlet day = '' + d.getDate()\r\n\tlet year = '' + d.getFullYear()\r\n\r\n\tyear = year.padStart(4, '0')\r\n\tmonth = month.padStart(2, '0')\r\n\tday = day.padStart(2, '0')\r\n\r\n\treturn [year, month, day].join('-')\r\n}\r\n\r\nexport function addIdentityXML (parentEl: Element, identityEl: String, values: Object) {\r\n\tlet title = parentEl.ownerDocument.querySelector('fileDesc > titleStmt > title')\r\n\tcreateXMLFromPath(title, '', values.identity.standardName)\r\n\t// standard name\r\n\tlet standardNameEl = createXMLFromPath(parentEl, `${identityEl}[@type=\"standard\"]/name`, values.identity.standardName)\r\n\tif (values.identity.namePartsLang) {\r\n\t\tstandardNameEl.parentElement.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:lang', values.identity.namePartsLang)\r\n\t}\r\n\t// name components\r\n\tif (values.identity.nameParts) {\r\n\t\tlet namePartEl = createXMLFromPath(parentEl, `${identityEl}[@type=\"preferred\"]`)\r\n\t\tfor (let namePart of values.identity.nameParts) {\r\n\t\t\tif (values.identity.namePartsLang) {\r\n\t\t\t\tnamePartEl.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:lang', values.identity.namePartsLang)\r\n\t\t\t}\r\n\t\t\tif (namePart.type === 'role') {\r\n\t\t\t\tcreateXMLFromPath(namePartEl, 'roleName', namePart.value)\r\n\t\t\t} else if (namePart.type === 'generational') {\r\n\t\t\t\tcreateXMLFromPath(namePartEl, 'genName', namePart.value)\r\n\t\t\t} else {\r\n\t\t\t\tlet namePartType = namePart.type\r\n\t\t\t\tif (namePartType == null || namePartType === '') {\r\n\t\t\t\t\tnamePartType = 'undefined'\r\n\t\t\t\t}\r\n\t\t\t\tnamePartType = namePartType.replace(/\\s+/g, '_')\r\n\t\t\t\tcreateXMLFromPath(namePartEl, `name[@type=\"${namePartType}\"]`, namePart.value)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// name variants\r\n\tif (values.identity.variants) {\r\n\t\tfor (let variant of values.identity.variants) {\r\n\t\t\tlet variantEl = createXMLFromPath(parentEl, `${identityEl}[@type=\"variant\"]`)\r\n\t\t\tif (variant.lang) {\r\n\t\t\t\tvariantEl.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:lang', variant.lang)\r\n\t\t\t}\r\n\r\n\t\t\tlet variantType = variant.type\r\n\t\t\tif (variantType == null || variantType === '') {\r\n\t\t\t\tvariantType = 'undefined'\r\n\t\t\t}\r\n\t\t\tvariantType = variantType.replace(/\\s+/g, '_')\r\n\t\t\tvariantEl.setAttribute('role', variantType)\r\n\r\n\t\t\tif (variant.project) {\r\n\t\t\t\tlet noteEl = createXMLFromPath(variantEl, 'note')\r\n\t\t\t\tcreateXMLFromPath(noteEl, 'label', 'Name preferred by')\r\n\t\t\t\tcreateXMLFromPath(noteEl, `desc/orgName[@ref=\"${encodeURIComponent(process.env.REACT_APP_ENTITIES_HOST + '/' + variant.project.value)}\"]`, variant.project.title)\r\n\t\t\t}\r\n\t\t\tif (variant.parts) {\r\n\t\t\t\tfor (let part of variant.parts) {\r\n\t\t\t\t\tif (part.type === 'role') {\r\n\t\t\t\t\t\tcreateXMLFromPath(variantEl, 'roleName', part.value)\r\n\t\t\t\t\t} else if (part.type === 'generational') {\r\n\t\t\t\t\t\tcreateXMLFromPath(variantEl, 'genName', part.value)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet namePartType = part.type\r\n\t\t\t\t\t\tif (namePartType == null || namePartType === '') {\r\n\t\t\t\t\t\t\tnamePartType = 'undefined'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnamePartType = namePartType.replace(/\\s+/g, '_')\r\n\t\t\t\t\t\tcreateXMLFromPath(variantEl, `name[@type=\"${namePartType}\"]`, part.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// same as\r\n\tif (values.identity.sameAs) {\r\n\t\tfor (let sameAs of values.identity.sameAs) {\r\n\t\t\tlet sameAsEl = createXMLFromPath(parentEl, `idno[@type=\"${sameAs.type}\"]`, sameAs.idno)\r\n\t\t\tif (sameAs.cert) {\r\n\t\t\t\tsameAsEl.setAttribute('cert', sameAs.cert)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function addNotesXML (parentEl: Element, values: Object) {\r\n\t// description\r\n\tif (values.description.descriptiveNote) {\r\n\t\tfor (let note of values.description.descriptiveNote) {\r\n\t\t\tlet noteEl = createXMLFromPath(parentEl, 'note[@type=\"general\"]', note.value)\r\n\t\t\tif (note.lang) {\r\n\t\t\t\tnoteEl.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:lang', note.lang)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// project note\r\n\tif (values.description.projectNote) {\r\n\t\tfor (let note of values.description.projectNote) {\r\n\t\t\tlet noteEl = createXMLFromPath(parentEl, 'note[@type=\"project-specific\"]', note.value)\r\n\t\t\tif (note.lang) {\r\n\t\t\t\tnoteEl.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:lang', note.lang)\r\n\t\t\t}\r\n\t\t\tif (note.project) {\r\n\t\t\t\tcreateXMLFromPath(noteEl, `respons[@locus=\"value\"]/desc/orgName[@ref=\"${encodeURIComponent(process.env.REACT_APP_ENTITIES_HOST + '/' + note.project.value)}\"]`, note.project.title)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function addSourcesXML (parentEl: Element, values: Object) {\r\n\t// sources\r\n\tif (values.sources.bibl) {\r\n\t\tlet listBibl = createXMLFromPath(parentEl, 'listBibl')\r\n\t\tfor (let bibl of values.sources.bibl) {\r\n\t\t\tlet biblEl = createXMLFromPath(listBibl, 'bibl', bibl.name)\r\n\t\t\tlet ref = createXMLFromPath(biblEl, 'ref')\r\n\t\t\tref.setAttribute('source', bibl.type)\r\n\t\t\tref.setAttribute('target', bibl.idno)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function addIdentityJSON (parentEl: Element, identityEl: String, values: Object) {\r\n\tlet standardNameEl = parentEl.querySelector(`${identityEl}[type=\"standard\"]`)\r\n\tvalues.identity.standardName = standardNameEl.firstElementChild.textContent\r\n\tvalues.identity.namePartsLang = standardNameEl.getAttribute('xml:lang')\r\n\r\n\tlet prefName = parentEl.querySelector(`${identityEl}[type=\"preferred\"]`)\r\n\tif (prefName) {\r\n\t\tvalues.identity.namePartsLang = prefName.getAttribute('xml:lang')\r\n\t\tvalues.identity.nameParts = []\r\n\t\tprefName.querySelectorAll('name').forEach((el, index) => {\r\n\t\t\tvalues.identity.nameParts.push({\r\n\t\t\t\ttype: el.getAttribute('type'),\r\n\t\t\t\tvalue: el.textContent\r\n\t\t\t})\r\n\t\t})\r\n\t\tprefName.querySelectorAll('roleName').forEach((el, index) => {\r\n\t\t\tvalues.identity.nameParts.push({\r\n\t\t\t\ttype: 'role',\r\n\t\t\t\tvalue: el.textContent\r\n\t\t\t})\r\n\t\t})\r\n\t\tprefName.querySelectorAll('genName').forEach((el, index) => {\r\n\t\t\tvalues.identity.nameParts.push({\r\n\t\t\t\ttype: 'generational',\r\n\t\t\t\tvalue: el.textContent\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tvalues.identity.variants = []\r\n\tparentEl.querySelectorAll(`${identityEl}[type=\"variant\"]`).forEach((variantEl, index) => {\r\n\t\tlet ref = ''\r\n\t\tlet title = ''\r\n\t\tlet orgName = variantEl.querySelector('orgName')\r\n\t\tif (orgName) {\r\n\t\t\tref = orgName.getAttribute('ref').match(/node\\/\\d+$/)\r\n\t\t\tif (ref !== null) {\r\n\t\t\t\tref = ref[0]\r\n\t\t\t} else {\r\n\t\t\t\tref = ''\r\n\t\t\t}\r\n\t\t\ttitle = orgName.textContent\r\n\t\t}\r\n\t\tlet variant = {\r\n\t\t\tproject: {\r\n\t\t\t\tvalue: ref,\r\n\t\t\t\ttitle\r\n\t\t\t},\r\n\t\t\tlang: variantEl.getAttribute('xml:lang'),\r\n\t\t\ttype: variantEl.getAttribute('role'),\r\n\t\t\tparts: []\r\n\t\t}\r\n\r\n\t\tvariantEl.querySelectorAll('name').forEach((namePartEl, index2) => {\r\n\t\t\tvariant.parts.push({\r\n\t\t\t\ttype: namePartEl.getAttribute('type'),\r\n\t\t\t\tvalue: namePartEl.textContent\r\n\t\t\t})\r\n\t\t})\r\n\t\tvariantEl.querySelectorAll('roleName').forEach((namePartEl, index2) => {\r\n\t\t\tvariant.parts.push({\r\n\t\t\t\ttype: 'role',\r\n\t\t\t\tvalue: namePartEl.textContent\r\n\t\t\t})\r\n\t\t})\r\n\t\tvariantEl.querySelectorAll('genName').forEach((namePartEl, index2) => {\r\n\t\t\tvariant.parts.push({\r\n\t\t\t\ttype: 'generational',\r\n\t\t\t\tvalue: namePartEl.textContent\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tvalues.identity.variants.push(variant)\r\n\t})\r\n\r\n\tvalues.identity.sameAs = []\r\n\tparentEl.querySelectorAll('idno').forEach((el, index) => {\r\n\t\tvalues.identity.sameAs.push({\r\n\t\t\ttype: el.getAttribute('type'),\r\n\t\t\tcert: el.getAttribute('cert'),\r\n\t\t\tidno: el.textContent\r\n\t\t})\r\n\t})\r\n}\r\n\r\nexport function addNotesJSON (parentEl: Element, values: Object) {\r\n\tvalues.description.descriptiveNote = []\r\n\tparentEl.querySelectorAll('note[type=\"general\"]').forEach((el, index) => {\r\n\t\tvalues.description.descriptiveNote.push({\r\n\t\t\tvalue: el.textContent,\r\n\t\t\tlang: el.getAttribute('xml:lang')\r\n\t\t})\r\n\t})\r\n\r\n\tvalues.description.projectNote = []\r\n\tparentEl.querySelectorAll('note[type=\"project-specific\"]').forEach((el, index) => {\r\n\t\tlet ref = ''\r\n\t\tlet title = ''\r\n\t\tlet orgName = el.querySelector('orgName')\r\n\t\tif (orgName) {\r\n\t\t\tref = orgName.getAttribute('ref').match(/node\\/\\d+$/)\r\n\t\t\tif (ref !== null) {\r\n\t\t\t\tref = ref[0]\r\n\t\t\t} else {\r\n\t\t\t\tref = ''\r\n\t\t\t}\r\n\t\t\ttitle = orgName.textContent\r\n\t\t}\r\n\r\n\t\tvalues.description.projectNote.push({\r\n\t\t\tvalue: el.firstChild.textContent,\r\n\t\t\tlang: el.getAttribute('xml:lang'),\r\n\t\t\tproject: {\r\n\t\t\t\tvalue: ref,\r\n\t\t\t\ttitle\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}\r\n\r\nexport function addSourcesJSON (parentEl: Element, values: Object) {\r\n\tlet listBibl = parentEl.querySelector('listBibl')\r\n\tif (listBibl) {\r\n\t\tvalues.sources.bibl = []\r\n\t\tlistBibl.querySelectorAll('bibl').forEach((el, index) => {\r\n\t\t\tvalues.sources.bibl.push({\r\n\t\t\t\tname: el.textContent,\r\n\t\t\t\tidno: el.querySelector('ref').getAttribute('target')\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n","import {createXMLFromPath, getDateString, addIdentityXML, addNotesXML, addSourcesXML} from '../../utils/conversion_utilities'\r\n\r\nexport const json2xml = (values) => {\r\n\tlet xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\t<?xml-model href=\"http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng\" type=\"application/xml\" schematypens=\"http://relaxng.org/ns/structure/1.0\"?>\r\n\t<?xml-model href=\"http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng\" type=\"application/xml\"\r\n\t\tschematypens=\"http://purl.oclc.org/dsdl/schematron\"?>\r\n\t<TEI xmlns=\"http://www.tei-c.org/ns/1.0\">\r\n\t\t<teiHeader>\r\n\t\t\t<fileDesc>\r\n\t\t\t\t<titleStmt><title></title></titleStmt>\r\n\t\t\t\t<publicationStmt>\r\n\t\t\t\t\t<publisher>Canadian Writing Research Collaboratory (CWRC)</publisher>\r\n\t\t\t\t\t<availability><licence target=\"https://creativecommons.org/licenses/by/4.0/legalcode\"><p/></licence></availability>\r\n\t\t\t\t</publicationStmt>\r\n\t\t\t\t<notesStmt><note>Person entity record</note></notesStmt>\r\n\t\t\t\t<sourceDesc><p>born digital</p></sourceDesc>\r\n\t\t\t</fileDesc>\r\n\t\t</teiHeader>\r\n\t\t<text>\r\n\t\t\t<body>\r\n\t\t\t\t<listPerson><person></person></listPerson>\r\n\t\t\t</body>\r\n\t\t</text>\r\n\t</TEI>`\r\n\tlet xmlDoc\r\n\tif (window.DOMParser) {\r\n\t\tconst parser = new DOMParser()\r\n\t\txmlDoc = parser.parseFromString(xml, 'text/xml')\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n\r\n\tlet person = xmlDoc.querySelector('person')\r\n\r\n\taddIdentityXML(person, 'persName', values)\r\n\r\n\t// description\r\n\tif (values.description) {\r\n\t\t// dates\r\n\t\tif (values.description.dates) {\r\n\t\t\tfor (let date of values.description.dates) {\r\n\t\t\t\tlet dateTypeEl = createXMLFromPath(person, date.type)\r\n\t\t\t\tlet dateEl = createXMLFromPath(dateTypeEl, 'date')\r\n\t\t\t\tif (date.cert) {\r\n\t\t\t\t\tdateEl.setAttribute('cert', date.cert)\r\n\t\t\t\t}\r\n\t\t\t\tif (date.date1 && date.qualifier1) {\r\n\t\t\t\t\tdateEl.setAttribute(date.qualifier1, getDateString(date.date1))\r\n\t\t\t\t}\r\n\t\t\t\tif (date.date2 && date.qualifier2) {\r\n\t\t\t\t\tdateEl.setAttribute(date.qualifier2, getDateString(date.date2))\r\n\t\t\t\t}\r\n\t\t\t\tif (date.note) {\r\n\t\t\t\t\tcreateXMLFromPath(dateEl, 'note', date.note)\r\n\t\t\t\t}\r\n\t\t\t\tif (date.place) {\r\n\t\t\t\t\tcreateXMLFromPath(dateTypeEl, `placeName[@ref=\"${encodeURIComponent(date.place.idno)}\"]`, date.place.name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// properties\r\n\t\tlet props = values.description.properties\r\n\t\tif (props) {\r\n\t\t\t// factuality\r\n\t\t\tif (props.factuality) {\r\n\t\t\t\tlet traitEl = createXMLFromPath(person, 'trait[@type=\"factuality\"]')\r\n\t\t\t\tif (props.factuality.cert) {\r\n\t\t\t\t\ttraitEl.setAttribute('cert', props.factuality.cert)\r\n\t\t\t\t}\r\n\t\t\t\tcreateXMLFromPath(traitEl, 'ab', props.factuality.value)\r\n\t\t\t}\r\n\t\t\t// gender\r\n\t\t\tif (props.gender && props.gender.value && props.gender.value.length > 0) {\r\n\t\t\t\tlet sex = props.gender.value.join(' ')\r\n\t\t\t\tlet sexEl = createXMLFromPath(person, `sex[@value=\"${sex}\"]`)\r\n\t\t\t\tif (props.gender.cert) {\r\n\t\t\t\t\tsexEl.setAttribute('cert', props.gender.cert)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// occupation\r\n\t\t\tif (props.occupation) {\r\n\t\t\t\tfor (let occ of props.occupation) {\r\n\t\t\t\t\tlet occEl = createXMLFromPath(person, 'occupation', occ.value)\r\n\t\t\t\t\tif (occ.cert) {\r\n\t\t\t\t\t\toccEl.setAttribute('cert', occ.cert)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// nationality\r\n\t\t\tif (props.nationality) {\r\n\t\t\t\tfor (let nat of props.nationality) {\r\n\t\t\t\t\tlet natEl = createXMLFromPath(person, 'nationality', nat.value)\r\n\t\t\t\t\tif (nat.cert) {\r\n\t\t\t\t\t\tnatEl.setAttribute('cert', nat.cert)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// affiliation\r\n\t\t\tif (props.affiliation) {\r\n\t\t\t\tfor (let aff of props.affiliation) {\r\n\t\t\t\t\tlet affEl = createXMLFromPath(person, 'affiliation', aff.value)\r\n\t\t\t\t\tif (aff.cert) {\r\n\t\t\t\t\t\taffEl.setAttribute('cert', aff.cert)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\taddNotesXML(person, values)\r\n\t}\r\n\t// sources\r\n\tif (values.sources) {\r\n\t\taddSourcesXML(person, values)\r\n\t}\r\n\r\n\treturn xmlDoc\r\n}\r\n","// @flow\r\nimport {addIdentityJSON, addNotesJSON, addSourcesJSON} from '../../utils/conversion_utilities'\r\n\r\nexport const xml2json = (xmlDoc: XMLDocument) => {\r\n\tlet values = {\r\n\t\tidentity: {},\r\n\t\tdescription: {},\r\n\t\tsources: {}\r\n\t}\r\n\r\n\tlet person = xmlDoc.querySelector('person')\r\n\r\n\taddIdentityJSON(person, 'persName', values)\r\n\r\n\tvalues.description.dates = []\r\n\tlet dates = person.querySelectorAll('birth, death, floruit')\r\n\tdates.forEach((el, index) => {\r\n\t\tlet date = el.querySelector('date')\r\n\t\tlet date1 = date.getAttribute('when-iso')\r\n\t\tlet date2\r\n\t\tlet qualifier1\r\n\t\tlet qualifier2\r\n\t\tif (date1 === null) {\r\n\t\t\tdate1 = date.getAttribute('from-iso')\r\n\t\t\tdate2 = date.getAttribute('to-iso')\r\n\t\t\tqualifier1 = 'from-iso'\r\n\t\t\tqualifier2 = 'to-iso'\r\n\t\t\tif (date1 === null) {\r\n\t\t\t\tdate1 = date.getAttribute('notBefore-iso')\r\n\t\t\t\tqualifier1 = 'notBefore-iso'\r\n\t\t\t}\r\n\t\t\tif (date2 === null) {\r\n\t\t\t\tdate2 = date.getAttribute('notAfter-iso')\r\n\t\t\t\tqualifier2 = 'notAfter-iso'\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tqualifier1 = 'when-iso'\r\n\t\t}\r\n\t\tlet note = el.querySelector('note')\r\n\t\tif (note) {\r\n\t\t\tnote = note.textContent\r\n\t\t}\r\n\t\tlet place = el.querySelector('placeName')\r\n\t\tif (place) {\r\n\t\t\tlet name = place.textContent\r\n\t\t\tlet idno = place.getAttribute('ref')\r\n\t\t\tplace = {name, idno}\r\n\t\t}\r\n\t\tvalues.description.dates.push({\r\n\t\t\ttype: el.nodeName,\r\n\t\t\tdate1,\r\n\t\t\tdate2,\r\n\t\t\tqualifier1,\r\n\t\t\tqualifier2,\r\n\t\t\tnote,\r\n\t\t\tplace,\r\n\t\t\tcert: date.getAttribute('cert')\r\n\t\t})\r\n\t})\r\n\r\n\tvalues.description.properties = {}\r\n\tlet trait = person.querySelector('trait[type=\"factuality\"]')\r\n\tif (trait) {\r\n\t\tvalues.description.properties.factuality = {\r\n\t\t\tvalue: trait.querySelector('ab').textContent,\r\n\t\t\tcert: trait.getAttribute('cert')\r\n\t\t}\r\n\t}\r\n\r\n\tvalues.description.properties.gender = {}\r\n\tlet sex = person.querySelector('sex')\r\n\tif (sex) {\r\n\t\tvalues.description.properties.gender.cert = sex.getAttribute('cert')\r\n\t\tvalues.description.properties.gender.value = sex.getAttribute('value').split(' ')\r\n\t}\r\n\r\n\tvalues.description.properties.occupation = []\r\n\tperson.querySelectorAll('occupation').forEach((el, index) => {\r\n\t\tvalues.description.properties.occupation.push({\r\n\t\t\tvalue: el.textContent,\r\n\t\t\tcert: el.getAttribute('cert')\r\n\t\t})\r\n\t})\r\n\r\n\tvalues.description.properties.nationality = []\r\n\tperson.querySelectorAll('nationality').forEach((el, index) => {\r\n\t\tvalues.description.properties.nationality.push({\r\n\t\t\tvalue: el.textContent,\r\n\t\t\tcert: el.getAttribute('cert')\r\n\t\t})\r\n\t})\r\n\r\n\tvalues.description.properties.affiliation = []\r\n\tperson.querySelectorAll('affiliation').forEach((el, index) => {\r\n\t\tvalues.description.properties.affiliation.push({\r\n\t\t\tvalue: el.textContent,\r\n\t\t\tcert: el.getAttribute('cert')\r\n\t\t})\r\n\t})\r\n\r\n\taddNotesJSON(person, values)\r\n\r\n\taddSourcesJSON(person, values)\r\n\r\n\treturn values\r\n}\r\n","// @flow\r\nimport {addIdentityJSON, addNotesJSON, addSourcesJSON} from '../../utils/conversion_utilities'\r\n\r\nexport const xml2json = (xmlDoc: XMLDocument) => {\r\n\tlet values = {\r\n\t\tidentity: {},\r\n\t\tdescription: {},\r\n\t\tsources: {}\r\n\t}\r\n\r\n\tlet org = xmlDoc.querySelector('org')\r\n\r\n\taddIdentityJSON(org, 'orgName', values)\r\n\r\n\tvalues.description.dates = []\r\n\tlet dates = org.querySelectorAll('event')\r\n\tdates.forEach((date, index) => {\r\n\t\tlet date1 = date.getAttribute('when-iso')\r\n\t\tlet date2\r\n\t\tlet qualifier1\r\n\t\tlet qualifier2\r\n\t\tif (date1 === null) {\r\n\t\t\tdate1 = date.getAttribute('from-iso')\r\n\t\t\tdate2 = date.getAttribute('to-iso')\r\n\t\t\tqualifier1 = 'from-iso'\r\n\t\t\tqualifier2 = 'to-iso'\r\n\t\t\tif (date1 === null) {\r\n\t\t\t\tdate1 = date.getAttribute('notBefore-iso')\r\n\t\t\t\tqualifier1 = 'notBefore-iso'\r\n\t\t\t}\r\n\t\t\tif (date2 === null) {\r\n\t\t\t\tdate2 = date.getAttribute('notAfter-iso')\r\n\t\t\t\tqualifier2 = 'notAfter-iso'\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tqualifier1 = 'when-iso'\r\n\t\t}\r\n\t\tlet note = date.querySelector('desc > desc')\r\n\t\tif (note) {\r\n\t\t\tnote = note.textContent\r\n\t\t}\r\n\t\tlet place = date.querySelector('desc > placeName')\r\n\t\tif (place) {\r\n\t\t\tlet name = place.textContent\r\n\t\t\tlet idno = place.getAttribute('ref')\r\n\t\t\tplace = {name, idno}\r\n\t\t}\r\n\t\tvalues.description.dates.push({\r\n\t\t\ttype: date.getAttribute('type'),\r\n\t\t\tdate1,\r\n\t\t\tdate2,\r\n\t\t\tqualifier1,\r\n\t\t\tqualifier2,\r\n\t\t\tnote,\r\n\t\t\tplace,\r\n\t\t\tcert: date.getAttribute('cert')\r\n\t\t})\r\n\t})\r\n\r\n\tvalues.description.properties = {}\r\n\tlet factuality = org.querySelector('trait[type=\"factuality\"]')\r\n\tif (factuality) {\r\n\t\tvalues.description.properties.factuality = {\r\n\t\t\tvalue: factuality.querySelector('ab').textContent,\r\n\t\t\tcert: factuality.getAttribute('cert')\r\n\t\t}\r\n\t}\r\n\tlet type = org.querySelector('trait[type=\"orgType\"]')\r\n\tif (type) {\r\n\t\tvalues.description.properties.type = {\r\n\t\t\tvalue: type.querySelector('ab').textContent,\r\n\t\t\tcert: type.getAttribute('cert')\r\n\t\t}\r\n\t}\r\n\r\n\taddNotesJSON(org, values)\r\n\r\n\taddSourcesJSON(org, values)\r\n\r\n\treturn values\r\n}\r\n","// @flow\r\nimport {addIdentityJSON, addNotesJSON, addSourcesJSON} from '../../utils/conversion_utilities'\r\n\r\nexport const xml2json = (xmlDoc: XMLDocument) => {\r\n\tlet values = {\r\n\t\tidentity: {},\r\n\t\tdescription: {},\r\n\t\tsources: {}\r\n\t}\r\n\r\n\tlet place = xmlDoc.querySelector('place')\r\n\r\n\taddIdentityJSON(place, 'placeName', values)\r\n\r\n\tvalues.description.dates = []\r\n\tlet dates = place.querySelectorAll('event')\r\n\tdates.forEach((date, index) => {\r\n\t\tlet date1 = date.getAttribute('when-iso')\r\n\t\tlet date2\r\n\t\tlet qualifier1\r\n\t\tlet qualifier2\r\n\t\tif (date1 === null) {\r\n\t\t\tdate1 = date.getAttribute('from-iso')\r\n\t\t\tdate2 = date.getAttribute('to-iso')\r\n\t\t\tqualifier1 = 'from-iso'\r\n\t\t\tqualifier2 = 'to-iso'\r\n\t\t\tif (date1 === null) {\r\n\t\t\t\tdate1 = date.getAttribute('notBefore-iso')\r\n\t\t\t\tqualifier1 = 'notBefore-iso'\r\n\t\t\t}\r\n\t\t\tif (date2 === null) {\r\n\t\t\t\tdate2 = date.getAttribute('notAfter-iso')\r\n\t\t\t\tqualifier2 = 'notAfter-iso'\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tqualifier1 = 'when-iso'\r\n\t\t}\r\n\t\tlet note = date.querySelector('desc > desc')\r\n\t\tif (note) {\r\n\t\t\tnote = note.textContent\r\n\t\t}\r\n\t\tlet place = date.querySelector('desc > placeName')\r\n\t\tif (place) {\r\n\t\t\tlet name = place.textContent\r\n\t\t\tlet idno = place.getAttribute('ref')\r\n\t\t\tplace = {name, idno}\r\n\t\t}\r\n\t\tvalues.description.dates.push({\r\n\t\t\ttype: date.getAttribute('type'),\r\n\t\t\tdate1,\r\n\t\t\tdate2,\r\n\t\t\tqualifier1,\r\n\t\t\tqualifier2,\r\n\t\t\tnote,\r\n\t\t\tplace,\r\n\t\t\tcert: date.getAttribute('cert')\r\n\t\t})\r\n\t})\r\n\r\n\tvalues.description.properties = {}\r\n\tlet trait = place.querySelector('trait[type=\"factuality\"]')\r\n\tif (trait) {\r\n\t\tvalues.description.properties.factuality = {\r\n\t\t\tvalue: trait.querySelector('ab').textContent,\r\n\t\t\tcert: trait.getAttribute('cert')\r\n\t\t}\r\n\t}\r\n\r\n\tvalues.description.location = {}\r\n\tlet location = place.querySelector('location')\r\n\tif (location) {\r\n\t\tlet address = location.querySelector('addrLine')\r\n\t\tif (address) {\r\n\t\t\tvalues.description.location.address = address.textContent\r\n\t\t}\r\n\t\tlet country = location.querySelector('country')\r\n\t\tif (country) {\r\n\t\t\tvalues.description.location.country = {\r\n\t\t\t\tvalue: country.textContent,\r\n\t\t\t\tcert: country.getAttribute('cert')\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet region = location.querySelector('region')\r\n\t\tif (region) {\r\n\t\t\tvalues.description.location.region = {\r\n\t\t\t\tvalue: region.textContent,\r\n\t\t\t\tcert: region.getAttribute('cert')\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet geo = location.querySelector('geo')\r\n\t\tif (geo) {\r\n\t\t\tlet latLong = geo.textContent.split(' ')\r\n\t\t\tvalues.description.location.latitude = latLong[0]\r\n\t\t\tvalues.description.location.longitude = latLong[1]\r\n\t\t}\r\n\t}\r\n\r\n\taddNotesJSON(place, values)\r\n\r\n\taddSourcesJSON(place, values)\r\n\r\n\treturn values\r\n}\r\n","// @flow\r\nimport {get, put, post, parseJSON, parseXML} from '../utils'\r\n\r\nimport {json2xml as json2xmlPerson} from './Person/json2xml'\r\nimport {xml2json as xml2jsonPerson} from './Person/xml2json'\r\nimport {json2xml as json2xmlOrganization} from './Organization/json2xml'\r\nimport {xml2json as xml2jsonOrganization} from './Organization/xml2json'\r\nimport {json2xml as json2xmlPlace} from './Place/json2xml'\r\nimport {xml2json as xml2jsonPlace} from './Place/xml2json'\r\n\r\nimport {getCollectionId} from '../CollectionsSvc'\r\n\r\nconst getXmlFromJson = (type, data) => {\r\n\tlet xml\r\n\tif (type === 'person') {\r\n\t\txml = json2xmlPerson(data)\r\n\t} else if (type === 'place') {\r\n\t\txml = json2xmlPlace(data)\r\n\t} else if (type === 'organization') {\r\n\t\txml = json2xmlOrganization(data)\r\n\t}\r\n\tconst s = new XMLSerializer()\r\n\tconst xmlStr = s.serializeToString(xml)\r\n\tconsole.log(xmlStr)\r\n\treturn xmlStr\r\n}\r\n\r\nexport const isEntityLocked = async (id) => {\r\n\tif (process.env.NODE_ENV === 'development') {\r\n\t\treturn false;\r\n\t} else {\r\n\t\treturn get(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_LOCK_TEMPLATE}/${id}`)\r\n\t\t\t.then(parseJSON)\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.warn('error fetching lock status!', err)\r\n\t\t\t\t// if we can't determine if it's locked, best err on the side of caution\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\treturn res.data.locked\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\nexport const getPerson = async (id) => {\r\n\treturn isEntityLocked(id).then(res => {\r\n\t\tif (res === true) {\r\n\t\t\tthrow new Error('locked')\r\n\t\t} else {\r\n\t\t\tif (process.env.NODE_ENV === 'development') {\r\n\t\t\t\treturn get(`${process.env.REACT_APP_ENTITIES_HOST}/sample_person_entity.xml`)\r\n\t\t\t\t\t.then(parseXML)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\treturn xml2jsonPerson(res.data)\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthrow new Error(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\treturn get(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/person/${id}`)\r\n\t\t\t\t\t.then(parseXML)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\treturn xml2jsonPerson(res.data)\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthrow new Error(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const postPerson = async (data) => {\r\n\tconst xmlStr = getXmlFromJson('person', data)\r\n\tconst collectionId = getCollectionId('person')\r\n\treturn post(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/person`, {collectionPID: collectionId, tei: xmlStr}).then(parseJSON)\r\n}\r\n\r\nexport const putPerson = async (id, data) => {\r\n\tconst xmlStr = getXmlFromJson('person', data)\r\n\treturn put(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/person/${id}`, xmlStr).then(parseJSON)\r\n}\r\n\r\nexport const getPlace = async (id) => {\r\n\treturn isEntityLocked(id).then(res => {\r\n\t\tif (res === true) {\r\n\t\t\tthrow new Error('locked')\r\n\t\t} else {\r\n\t\t\tif (process.env.NODE_ENV === 'development') {\r\n\t\t\t\treturn get(`${process.env.REACT_APP_ENTITIES_HOST}/sample_place_entity.xml`)\r\n\t\t\t\t\t.then(parseXML)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\treturn xml2jsonPlace(res.data)\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthrow new Error(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\treturn get(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/place/${id}`)\r\n\t\t\t\t\t.then(parseXML)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\treturn xml2jsonPlace(res.data)\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthrow new Error(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const postPlace = async (data) => {\r\n\tconst xmlStr = getXmlFromJson('place', data)\r\n\tconst collectionId = getCollectionId('place')\r\n\treturn post(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/place`, {collectionPID: collectionId, tei: xmlStr}).then(parseJSON)\r\n}\r\nexport const putPlace = async (id, data) => {\r\n\tconst xmlStr = getXmlFromJson('place', data)\r\n\treturn put(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/place/${id}`, xmlStr).then(parseJSON)\r\n}\r\n\r\nexport const getOrganization = async (id) => {\r\n\treturn isEntityLocked(id).then(res => {\r\n\t\tif (res === true) {\r\n\t\t\tthrow new Error('locked')\r\n\t\t} else {\r\n\t\t\treturn get(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/organization/${id}`)\r\n\t\t\t\t.then(parseXML)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn xml2jsonOrganization(res.data)\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tthrow new Error(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const postOrganization = async (data) => {\r\n\tconst xmlStr = getXmlFromJson('organization', data)\r\n\tconst collectionId = getCollectionId('organization')\r\n\treturn post(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/organization`, {collectionPID: collectionId, tei: xmlStr}).then(parseJSON)\r\n}\r\n\r\nexport const putOrganization = async (id, data) => {\r\n\tconst xmlStr = getXmlFromJson('organization', data)\r\n\treturn put(`${process.env.REACT_APP_ENTITIES_HOST}/${process.env.REACT_APP_ENTITIES_BASE}/organization/${id}`, xmlStr).then(parseJSON)\r\n}\r\n","import {createXMLFromPath, getDateString, addIdentityXML, addNotesXML, addSourcesXML} from '../../utils/conversion_utilities'\r\n\r\nexport const json2xml = (values) => {\r\n\tlet xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\t<?xml-model href=\"http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng\" type=\"application/xml\" schematypens=\"http://relaxng.org/ns/structure/1.0\"?>\r\n\t<?xml-model href=\"http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng\" type=\"application/xml\"\r\n\t\tschematypens=\"http://purl.oclc.org/dsdl/schematron\"?>\r\n\t<TEI xmlns=\"http://www.tei-c.org/ns/1.0\">\r\n\t\t<teiHeader>\r\n\t\t\t<fileDesc>\r\n\t\t\t\t<titleStmt><title></title></titleStmt>\r\n\t\t\t\t<publicationStmt>\r\n\t\t\t\t\t<publisher>Canadian Writing Research Collaboratory (CWRC)</publisher>\r\n\t\t\t\t\t<availability><licence target=\"https://creativecommons.org/licenses/by/4.0/legalcode\"><p/></licence></availability>\r\n\t\t\t\t</publicationStmt>\r\n\t\t\t\t<notesStmt><note>Place entity record</note></notesStmt>\r\n\t\t\t\t<sourceDesc><p>born digital</p></sourceDesc>\r\n\t\t\t</fileDesc>\r\n\t\t</teiHeader>\r\n\t\t<text>\r\n\t\t\t<body>\r\n\t\t\t\t<listPlace><place></place></listPlace>\r\n\t\t\t</body>\r\n\t\t</text>\r\n\t</TEI>`\r\n\tlet xmlDoc\r\n\tif (window.DOMParser) {\r\n\t\tconst parser = new DOMParser()\r\n\t\txmlDoc = parser.parseFromString(xml, 'text/xml')\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n\r\n\tlet place = xmlDoc.querySelector('place')\r\n\r\n\taddIdentityXML(place, 'placeName', values)\r\n\r\n\t// description\r\n\tif (values.description) {\r\n\t\t// dates\r\n\t\tif (values.description.dates) {\r\n\t\t\tfor (let date of values.description.dates) {\r\n\t\t\t\tlet dateEl = createXMLFromPath(place, `event[@type=\"${date.type}\"]`)\r\n\t\t\t\tif (date.cert) {\r\n\t\t\t\t\tdateEl.setAttribute('cert', date.cert)\r\n\t\t\t\t}\r\n\t\t\t\tif (date.date1 && date.qualifier1) {\r\n\t\t\t\t\tdateEl.setAttribute(date.qualifier1, getDateString(date.date1))\r\n\t\t\t\t}\r\n\t\t\t\tif (date.date2 && date.qualifier2) {\r\n\t\t\t\t\tdateEl.setAttribute(date.qualifier2, getDateString(date.date2))\r\n\t\t\t\t}\r\n\t\t\t\tlet descEl = createXMLFromPath(dateEl, 'desc')\r\n\t\t\t\tcreateXMLFromPath(descEl, 'desc', date.note)\r\n\t\t\t\tif (date.place) {\r\n\t\t\t\t\tcreateXMLFromPath(descEl, `placeName[@ref=\"${encodeURIComponent(date.place.idno)}\"]`, date.place.name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// properties\r\n\t\tlet props = values.description.properties\r\n\t\tif (props) {\r\n\t\t\t// factuality\r\n\t\t\tif (props.factuality) {\r\n\t\t\t\tlet traitEl = createXMLFromPath(place, 'trait[@type=\"factuality\"]')\r\n\t\t\t\tif (props.factuality.cert) {\r\n\t\t\t\t\ttraitEl.setAttribute('cert', props.factuality.cert)\r\n\t\t\t\t}\r\n\t\t\t\tcreateXMLFromPath(traitEl, 'ab', props.factuality.value)\r\n\t\t\t}\r\n\t\t}\r\n\t\t// location\r\n\t\tlet location = values.description.location\r\n\t\tif (location) {\r\n\t\t\tlet locEl = createXMLFromPath(place, 'location')\r\n\t\t\tlet addressEl = createXMLFromPath(locEl, 'address')\r\n\t\t\t// address\r\n\t\t\tif (location.address) {\r\n\t\t\t\tcreateXMLFromPath(addressEl, 'addrLine', location.address)\r\n\t\t\t}\r\n\t\t\t// country\r\n\t\t\tif (location.country) {\r\n\t\t\t\tlet countryEl = createXMLFromPath(addressEl, 'country[@ref=\"ISO 3166-1\"]', location.country.value)\r\n\t\t\t\tcountryEl.setAttribute('cert', location.country.cert)\r\n\t\t\t}\r\n\t\t\t// region\r\n\t\t\tif (location.region) {\r\n\t\t\t\tcreateXMLFromPath(addressEl, `region[@cert=\"${location.region.cert}\"]`, location.region.value)\r\n\t\t\t}\r\n\t\t\t// lat long\r\n\t\t\tif (location.latitude || location.longitude) {\r\n\t\t\t\tcreateXMLFromPath(locEl, 'geo[@decls=\"#WGS\"]', location.latitude + ' ' + location.longitude)\r\n\t\t\t}\r\n\t\t}\r\n\t\taddNotesXML(place, values)\r\n\t}\r\n\t// sources\r\n\tif (values.sources) {\r\n\t\taddSourcesXML(place, values)\r\n\t}\r\n\r\n\txmlDoc.querySelectorAll('idno').forEach((idno) => {\r\n\t\tidno = idno.parentElement.removeChild(idno)\r\n\t\tplace.appendChild(idno)\r\n\t})\r\n\r\n\treturn xmlDoc\r\n}\r\n","import {createXMLFromPath, getDateString, addIdentityXML, addNotesXML, addSourcesXML} from '../../utils/conversion_utilities'\r\n\r\nexport const json2xml = (values) => {\r\n\tlet xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\t<?xml-model href=\"http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng\" type=\"application/xml\" schematypens=\"http://relaxng.org/ns/structure/1.0\"?>\r\n\t<?xml-model href=\"http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng\" type=\"application/xml\"\r\n\t\tschematypens=\"http://purl.oclc.org/dsdl/schematron\"?>\r\n\t<TEI xmlns=\"http://www.tei-c.org/ns/1.0\">\r\n\t\t<teiHeader>\r\n\t\t\t<fileDesc>\r\n\t\t\t\t<titleStmt><title></title></titleStmt>\r\n\t\t\t\t<publicationStmt>\r\n\t\t\t\t\t<publisher>Canadian Writing Research Collaboratory (CWRC)</publisher>\r\n\t\t\t\t\t<availability><licence target=\"https://creativecommons.org/licenses/by/4.0/legalcode\"><p/></licence></availability>\r\n\t\t\t\t</publicationStmt>\r\n\t\t\t\t<notesStmt><note>Organization entity record</note></notesStmt>\r\n\t\t\t\t<sourceDesc><p>born digital</p></sourceDesc>\r\n\t\t\t</fileDesc>\r\n\t\t</teiHeader>\r\n\t\t<text>\r\n\t\t\t<body>\r\n\t\t\t\t<listOrg><org></org></listOrg>\r\n\t\t\t</body>\r\n\t\t</text>\r\n\t</TEI>`\r\n\tlet xmlDoc\r\n\tif (window.DOMParser) {\r\n\t\tconst parser = new DOMParser()\r\n\t\txmlDoc = parser.parseFromString(xml, 'text/xml')\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n\r\n\tlet org = xmlDoc.querySelector('org')\r\n\r\n\taddIdentityXML(org, 'orgName', values)\r\n\r\n\t// description\r\n\tif (values.description) {\r\n\t\t// dates\r\n\t\tif (values.description.dates) {\r\n\t\t\tfor (let date of values.description.dates) {\r\n\t\t\t\tlet dateEl = createXMLFromPath(org, `event[@type=\"${date.type}\"]`)\r\n\t\t\t\tif (date.cert) {\r\n\t\t\t\t\tdateEl.setAttribute('cert', date.cert)\r\n\t\t\t\t}\r\n\t\t\t\tif (date.date1 && date.qualifier1) {\r\n\t\t\t\t\tdateEl.setAttribute(date.qualifier1, getDateString(date.date1))\r\n\t\t\t\t}\r\n\t\t\t\tif (date.date2 && date.qualifier2) {\r\n\t\t\t\t\tdateEl.setAttribute(date.qualifier2, getDateString(date.date2))\r\n\t\t\t\t}\r\n\t\t\t\tlet descEl = createXMLFromPath(dateEl, 'desc')\r\n\t\t\t\tcreateXMLFromPath(descEl, 'desc', date.note)\r\n\t\t\t\tif (date.place) {\r\n\t\t\t\t\tcreateXMLFromPath(descEl, `placeName[@ref=\"${encodeURIComponent(date.place.idno)}\"]`, date.place.name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// properties\r\n\t\tlet props = values.description.properties\r\n\t\tif (props) {\r\n\t\t\t// factuality\r\n\t\t\tif (props.factuality) {\r\n\t\t\t\tlet traitEl = createXMLFromPath(org, 'trait[@type=\"factuality\"]')\r\n\t\t\t\tif (props.factuality.cert) {\r\n\t\t\t\t\ttraitEl.setAttribute('cert', props.factuality.cert)\r\n\t\t\t\t}\r\n\t\t\t\tcreateXMLFromPath(traitEl, 'ab', props.factuality.value)\r\n\t\t\t}\r\n\t\t\t// type\r\n\t\t\tif (props.type) {\r\n\t\t\t\tlet traitEl = createXMLFromPath(org, 'trait[@type=\"orgType\"]')\r\n\t\t\t\tif (props.type.cert) {\r\n\t\t\t\t\ttraitEl.setAttribute('cert', props.type.cert)\r\n\t\t\t\t}\r\n\t\t\t\tcreateXMLFromPath(traitEl, 'ab', props.type.value)\r\n\t\t\t}\r\n\t\t}\r\n\t\taddNotesXML(org, values)\r\n\t}\r\n\t// sources\r\n\tif (values.sources) {\r\n\t\taddSourcesXML(org, values)\r\n\t}\r\n\r\n\treturn xmlDoc\r\n}\r\n","// @flow\r\nimport {getPerson, putPerson, postPerson, getPlace, putPlace, postPlace, getOrganization, putOrganization, postOrganization} from '../../api/EntitiesSvc'\r\n\r\n// these are imported into the component and then mapped to dispatch\r\nexport const POST_PERSON = (data) => ({\r\n\ttype: 'PERSON_POST',\r\n\tpayload: postPerson(data)\r\n})\r\nexport const PUT_PERSON = (id, data) => ({\r\n\ttype: 'PERSON_PUT',\r\n\tpayload: putPerson(id, data)\r\n})\r\nexport const GET_PERSON = (id) => ({\r\n\ttype: 'PERSON_GET',\r\n\tpayload: getPerson(id)\r\n})\r\n\r\nexport const POST_PLACE = (data) => ({\r\n\ttype: 'PLACE_POST',\r\n\tpayload: postPlace(data)\r\n})\r\nexport const PUT_PLACE = (id, data) => ({\r\n\ttype: 'PLACE_PUT',\r\n\tpayload: putPlace(id, data)\r\n})\r\nexport const GET_PLACE = (id) => ({\r\n\ttype: 'PLACE_GET',\r\n\tpayload: getPlace(id)\r\n})\r\n\r\nexport const POST_ORGANIZATION = (data) => ({\r\n\ttype: 'ORGANIZATION_POST',\r\n\tpayload: postOrganization(data)\r\n})\r\nexport const PUT_ORGANIZATION = (id, data) => ({\r\n\ttype: 'ORGANIZATION_PUT',\r\n\tpayload: putOrganization(id, data)\r\n})\r\nexport const GET_ORGANIZATION = (id) => ({\r\n\ttype: 'ORGANIZATION_GET',\r\n\tpayload: getOrganization(id)\r\n})\r\n","// @flow\r\nimport React, {Component} from 'react'\r\nimport {\r\n\tForm,\r\n\tHeader,\r\n\tMessage,\r\n\tGrid,\r\n\tButton,\r\n\tSegment,\r\n\tDimmer,\r\n\tLoader,\r\n\tPopup,\r\n\tRail\r\n} from 'semantic-ui-react'\r\nimport {connect} from 'react-redux'\r\nimport {\r\n\treduxForm,\r\n\tinitialize,\r\n\tField\r\n} from 'redux-form'\r\n\r\nimport IdentityGroup from '../../components/IdentityGroup'\r\nimport {DescriptiveNote, ProjectNote} from '../../components/NotesGroup'\r\nimport {InputField, DropdownComponent} from '../../components/FormControls'\r\nimport SegmentRepeater from '../../components/SegmentRepeater'\r\nimport DateRepeater from '../../components/DateRepeater'\r\nimport EntityLookup from '../../components/EntityLookup'\r\nimport MessageDialog from '../../components/MessageDialog'\r\nimport CollectionsDialog from '../../components/CollectionsDialog'\r\nimport {getCollectionId} from '../../../../api/CollectionsSvc'\r\n\r\nimport {personNameTypeOptions, personVariantTypeOptions, personDateTypeOptions, certaintyOptions, factualityOptions, genderOptions} from '../../components/options'\r\nimport {dateRange} from '../../components/FieldValidation'\r\n\r\nimport type {FormProps} from 'redux-form'\r\n\r\nimport BroadcastChannel from 'broadcast-channel'\r\n\r\nimport {\r\n\tgetEntityId,\r\n\r\n\tisPersonPostDone,\r\n\tisPersonPostPending,\r\n\tisPersonPostError,\r\n\tgetPersonPostError,\r\n\tgetPersonPostData,\r\n\r\n\tisPersonGetDone,\r\n\tisPersonGetPending,\r\n\tisPersonGetError,\r\n\tgetPersonGetError,\r\n\tgetPersonGetData,\r\n\r\n\tisPersonPutDone,\r\n\tisPersonPutPending,\r\n\tisPersonPutError,\r\n\tgetPersonPutError,\r\n\tgetPersonPutData} from '../../../../selectors'\r\n\r\nimport {GET_PERSON, PUT_PERSON, POST_PERSON} from '../../../../actions/entities'\r\n\r\nimport {xml2json} from '../../../../api/EntitiesSvc/Person/xml2json'\r\nimport {get, parseXML} from '../../../../api/utils'\r\n\r\ntype Props = FormProps\r\n\r\nclass PersonComponent extends Component<Props, State> {\r\n\tcloseForm = (id) => {\r\n\t\tconst channel = new BroadcastChannel('cwrc-entity-management-forms')\r\n\t\tchannel.postMessage(id)\r\n\t\tchannel.close()\r\n\t}\r\n\r\n\tdoSampleLoad = () => {\r\n\t\tget(process.env.PUBLIC_URL + '/sample_person_entity.xml').then(parseXML).then(res => {\r\n\t\t\tlet json = xml2json(res.data)\r\n\t\t\tconsole.log(json)\r\n\t\t\tthis.props.dispatch(initialize('PERSON_FORM', json))\r\n\t\t})\r\n\t}\r\n\r\n\tcomponentWillMount () {\r\n\t\tconst entityId = this.props.entityId\r\n\t\tif (entityId !== undefined) {\r\n\t\t\tthis.props.getPerson(entityId)\r\n\t\t}\r\n\t}\r\n\r\n\tshouldComponentUpdate (nextProps, nextState) {\r\n\t\tconst values = nextProps.initialValues\r\n\t\tif (values) {\r\n\t\t\tif (values.identity.nameParts) {\r\n\t\t\t\tvalues.identity.nameParts.forEach(np => {\r\n\t\t\t\t\tlet match = false\r\n\t\t\t\t\tfor (let n of personNameTypeOptions) {\r\n\t\t\t\t\t\tif (n.value === np.type) {\r\n\t\t\t\t\t\t\tmatch = true\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!match) {\r\n\t\t\t\t\t\tpersonNameTypeOptions.push({\r\n\t\t\t\t\t\t\tkey: np.type, value: np.type, text: np.type\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif (values.identity.variants) {\r\n\t\t\t\tvalues.identity.variants.forEach(vr => {\r\n\t\t\t\t\tlet match = false\r\n\t\t\t\t\tfor (let v of personVariantTypeOptions) {\r\n\t\t\t\t\t\tif (v.value === vr.type) {\r\n\t\t\t\t\t\t\tmatch = true\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!match) {\r\n\t\t\t\t\t\tpersonVariantTypeOptions.push({\r\n\t\t\t\t\t\t\tkey: vr.type, value: vr.type, text: vr.type\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst NationalityComponent = ({name}) => (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid verticalAlign='middle' columns='equal'>\r\n\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t// required\r\n\t\t\t\t\t\t\t// validate={[required]}\r\n\t\t\t\t\t\t\tlabel=\"Nationality\"\r\n\t\t\t\t\t\t\tname={`${name}.value`}\r\n\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\tname={`${name}.cert`}\r\n\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\tconst OccupationComponent = ({name}) => (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid verticalAlign='middle' columns='equal'>\r\n\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t// required\r\n\t\t\t\t\t\t\t// validate={[required]}\r\n\t\t\t\t\t\t\tlabel=\"Occupation\"\r\n\t\t\t\t\t\t\tname={`${name}.value`}\r\n\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\tname={`${name}.cert`}\r\n\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\tconst AffiliationComponent = ({name}) => (\r\n\t\t\t<div>\r\n\t\t\t\t<Grid verticalAlign='middle' columns='equal'>\r\n\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t// required\r\n\t\t\t\t\t\t\t// validate={[required]}\r\n\t\t\t\t\t\t\tlabel=\"Affiliation\"\r\n\t\t\t\t\t\t\tname={`${name}.value`}\r\n\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\tname={`${name}.cert`}\r\n\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\tconst {handleSubmit, invalid, submitting} = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t{this.props.isPersonPostDone ? (\r\n\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\theader=\"Entity Created!\"\r\n\t\t\t\t\t\tcontent={<p>New entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.getPersonPostData.data.pid + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.getPersonPostData.data.pid}</a></p>}\r\n\t\t\t\t\t\tonClose={this.closeForm.bind(this, this.props.getPersonPostData.data.pid)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isPersonPutDone ? (\r\n\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\theader=\"Entity Edited!\"\r\n\t\t\t\t\t\tcontent={<p>Entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.getPersonPutData.data.pid + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.getPersonPutData.data.pid}</a></p>}\r\n\t\t\t\t\t\tonClose={this.closeForm.bind(this, this.props.getPersonPutData.data.pid)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isPersonGetPending ? (\r\n\t\t\t\t\t<Dimmer active inverted>\r\n\t\t\t\t\t\t<Loader inverted>Loading Person</Loader>\r\n\t\t\t\t\t</Dimmer>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isPersonGetError\r\n\t\t\t\t\t? (this.props.getPersonGetError.message === 'locked' ? (\r\n\t\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\t\theader=\"Entity is Locked!\"\r\n\t\t\t\t\t\t\tcontent={<p>The entity <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.entityId + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.entityId}</a> is locked and therefore cannot be edited.</p>}\r\n\t\t\t\t\t\t\tonClose={this.closeForm.bind(this, undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\t\theader=\"Error Loading Entity!\"\r\n\t\t\t\t\t\t\tcontent={<p>An error occurred when loading the entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.entityId + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.entityId}</a><br/>It is probably encoded in an unsupported format and therefore cannot be edited.</p>}\r\n\t\t\t\t\t\t\tonClose={this.closeForm.bind(this, undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)) : ''}\r\n\t\t\t\t{this.props.entityId === undefined && this.props.getCollectionId === undefined ? (\r\n\t\t\t\t\t<CollectionsDialog entityType=\"person\"/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t<Form onSubmit={handleSubmit} error={invalid}>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Identity</Header>\r\n\r\n\t\t\t\t\t<IdentityGroup\r\n\t\t\t\t\t\tentityType=\"person\"\r\n\t\t\t\t\t\tnameOptions={personNameTypeOptions}\r\n\t\t\t\t\t\tvariantOptions={personVariantTypeOptions}\r\n\t\t\t\t\t\tcertaintyOptions={certaintyOptions}\r\n\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Description</Header>\r\n\r\n\t\t\t\t\t<Segment.Group>\r\n\t\t\t\t\t\t<DateRepeater\r\n\t\t\t\t\t\t\tfieldArrayName=\"description.dates\"\r\n\t\t\t\t\t\t\theaderLabel=\"Important Date(s)\"\r\n\t\t\t\t\t\t\tcomponentLabel=\"Date\"\r\n\t\t\t\t\t\t\tdateTypeOptions={personDateTypeOptions}\r\n\t\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Segment>\r\n\t\t\t\t\t\t\t<Header as='h4'>Properties</Header>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Factuality\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.properties.factuality.value\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\toptions={factualityOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.properties.factuality.cert'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Gender\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.properties.gender.value\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\t\t\t\tscrolling\r\n\t\t\t\t\t\t\t\t\t\t\toptions={genderOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.properties.gender.cert'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t<SegmentRepeater\r\n\t\t\t\t\t\t\tfieldArrayName=\"description.properties.nationality\"\r\n\t\t\t\t\t\t\theaderLabel=\"Nationality\"\r\n\t\t\t\t\t\t\tcomponentLabel=\"Nationality\"\r\n\t\t\t\t\t\t\tRepeatableComponent={NationalityComponent}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SegmentRepeater\r\n\t\t\t\t\t\t\tfieldArrayName=\"description.properties.occupation\"\r\n\t\t\t\t\t\t\theaderLabel=\"Occupation\"\r\n\t\t\t\t\t\t\tcomponentLabel=\"Occupation\"\r\n\t\t\t\t\t\t\tRepeatableComponent={OccupationComponent}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SegmentRepeater\r\n\t\t\t\t\t\t\tfieldArrayName=\"description.properties.affiliation\"\r\n\t\t\t\t\t\t\theaderLabel=\"Affiliation\"\r\n\t\t\t\t\t\t\tcomponentLabel=\"Affiliation\"\r\n\t\t\t\t\t\t\tRepeatableComponent={AffiliationComponent}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<DescriptiveNote />\r\n\t\t\t\t\t\t<ProjectNote changeFunc={this.props.change}/>\r\n\t\t\t\t\t</Segment.Group>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Sources</Header>\r\n\t\t\t\t\t<SegmentRepeater\r\n\t\t\t\t\t\tfieldArrayName=\"sources.bibl\"\r\n\t\t\t\t\t\theaderLabel=\"\"\r\n\t\t\t\t\t\tcomponentLabel=\"Source\"\r\n\t\t\t\t\t\tRepeatableComponent={EntityLookup}\r\n\t\t\t\t\t\tbuttonLabel='Add Source'\r\n\t\t\t\t\t\tentityType='title'\r\n\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Field key=\"non_field_errors\"\r\n\t\t\t\t\t\tname=\"non_field_errors\"\r\n\t\t\t\t\t\tcomponent={({meta: {error}}) => {\r\n\t\t\t\t\t\t\treturn error ? (\r\n\t\t\t\t\t\t\t\t<Message error>\r\n\t\t\t\t\t\t\t\t\t<Message.Header>{'Login failed :('}</Message.Header>\r\n\t\t\t\t\t\t\t\t\t<p>{error}</p>\r\n\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div style={{textAlign: 'center'}}>\r\n\t\t\t\t\t\t{/* <Button type=\"button\" content=\"Load Sample Person (local)\" icon=\"cloud download\" onClick={this.doSampleLoad}/> */}\r\n\t\t\t\t\t\t{/* <Button type=\"button\" content=\"Load Person (remote)\" icon=\"cloud download\" onClick={this.testGet}/> */}\r\n\t\t\t\t\t\t{invalid ? (\r\n\t\t\t\t\t\t\t<Popup size='tiny' position='right center' trigger={\r\n\t\t\t\t\t\t\t\t<span><Button content=\"Submit\" icon=\"sign in\" disabled={true}/></span>\r\n\t\t\t\t\t\t\t} content=\"Please fix invalid fields before submitting\"/>\r\n\t\t\t\t\t\t) : <Button content=\"Submit\" icon=\"sign in\" loading={submitting}/>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</Segment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst onSubmit = (values, dispatch, props) => {\r\n\tif (props.isPersonGetDone && props.entityId !== undefined) {\r\n\t\treturn props.putPerson(props.entityId, values)\r\n\t} else {\r\n\t\treturn props.postPerson(values)\r\n\t}\r\n}\r\n\r\nconst validate = values => {\r\n\tconst errors = {}\r\n\tif (values.description && values.description.dates) {\r\n\t\terrors.description = {\r\n\t\t\tdates: []\r\n\t\t}\r\n\t\tfor (const date of values.description.dates) {\r\n\t\t\tconst error = dateRange(date)\r\n\t\t\tif (error !== undefined) {\r\n\t\t\t\terrors.description.dates.push(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn errors\r\n}\r\n\r\n// i.e. model -> view\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tinitialValues: getPersonGetData(state),\r\n\t\tentityId: getEntityId(state),\r\n\t\tgetCollectionId: getCollectionId('person'),\r\n\r\n\t\tisPersonPostDone: isPersonPostDone(state),\r\n\t\tisPersonPostPending: isPersonPostPending(state),\r\n\t\tisPersonPostError: isPersonPostError(state),\r\n\t\tgetPersonPostError: getPersonPostError(state),\r\n\t\tgetPersonPostData: getPersonPostData(state),\r\n\r\n\t\tisPersonGetDone: isPersonGetDone(state),\r\n\t\tisPersonGetPending: isPersonGetPending(state),\r\n\t\tisPersonGetError: isPersonGetError(state),\r\n\t\tgetPersonGetError: getPersonGetError(state),\r\n\t\tgetPersonGetData: getPersonGetData(state),\r\n\r\n\t\tisPersonPutDone: isPersonPutDone(state),\r\n\t\tisPersonPutPending: isPersonPutPending(state),\r\n\t\tisPersonPutError: isPersonPutError(state),\r\n\t\tgetPersonPutError: getPersonPutError(state),\r\n\t\tgetPersonPutData: getPersonPutData(state)\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tasync getPerson (id) {\r\n\t\t\treturn dispatch(GET_PERSON(id))\r\n\t\t},\r\n\t\tasync putPerson (id, data) {\r\n\t\t\treturn dispatch(PUT_PERSON(id, data))\r\n\t\t},\r\n\t\tasync postPerson (data) {\r\n\t\t\treturn dispatch(POST_PERSON(data))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(reduxForm({\r\n\tform: 'PERSON_FORM',\r\n\tvalidate,\r\n\tonSubmit\r\n})(PersonComponent))\r\n","// @flow\r\nimport React from 'react'\r\nimport PersonForm from './components/PersonForm.jsx'\r\nimport {Helmet} from 'react-helmet'\r\n\r\nconst PersonEdit = ({login, errors}: Props) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Helmet>\r\n\t\t\t\t<title>CWRC: Person Entity</title>\r\n\t\t\t</Helmet>\r\n\t\t\t<PersonForm />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PersonEdit\r\n","export default [\r\n\t{'key': '', 'value': '', text: ''}, {'key': 'ABW', 'text': 'Aruba', 'value': 'ABW'}, {'key': 'AFG', 'text': 'Afghanistan', 'value': 'AFG'}, {'key': 'AGO', 'text': 'Angola', 'value': 'AGO'}, {'key': 'AIA', 'text': 'Anguilla', 'value': 'AIA'}, {'key': 'ALA', 'text': 'land Islands', 'value': 'ALA'}, {'key': 'ALB', 'text': 'Albania', 'value': 'ALB'}, {'key': 'AND', 'text': 'Andorra', 'value': 'AND'}, {'key': 'ARE', 'text': 'United Arab Emirates', 'value': 'ARE'}, {'key': 'ARG', 'text': 'Argentina', 'value': 'ARG'}, {'key': 'ARM', 'text': 'Armenia', 'value': 'ARM'}, {'key': 'ASM', 'text': 'American Samoa', 'value': 'ASM'}, {'key': 'ATA', 'text': 'Antarctica', 'value': 'ATA'}, {'key': 'ATF', 'text': 'French Southern and Antarctic Lands', 'value': 'ATF'}, {'key': 'ATG', 'text': 'Antigua and Barbuda', 'value': 'ATG'}, {'key': 'AUS', 'text': 'Australia', 'value': 'AUS'}, {'key': 'AUT', 'text': 'Austria', 'value': 'AUT'}, {'key': 'AZE', 'text': 'Azerbaijan', 'value': 'AZE'}, {'key': 'BDI', 'text': 'Burundi', 'value': 'BDI'}, {'key': 'BEL', 'text': 'Belgium', 'value': 'BEL'}, {'key': 'BEN', 'text': 'Benin', 'value': 'BEN'}, {'key': 'BFA', 'text': 'Burkina Faso', 'value': 'BFA'}, {'key': 'BGD', 'text': 'Bangladesh', 'value': 'BGD'}, {'key': 'BGR', 'text': 'Bulgaria', 'value': 'BGR'}, {'key': 'BHR', 'text': 'Bahrain', 'value': 'BHR'}, {'key': 'BHS', 'text': 'Bahamas', 'value': 'BHS'}, {'key': 'BIH', 'text': 'Bosnia and Herzegovina', 'value': 'BIH'}, {'key': 'BLM', 'text': 'Saint Barthlemy', 'value': 'BLM'}, {'key': 'SHN', 'text': 'Saint Helena, Ascension and Tristan da Cunha', 'value': 'SHN'}, {'key': 'BLR', 'text': 'Belarus', 'value': 'BLR'}, {'key': 'BLZ', 'text': 'Belize', 'value': 'BLZ'}, {'key': 'BMU', 'text': 'Bermuda', 'value': 'BMU'}, {'key': 'BOL', 'text': 'Bolivia', 'value': 'BOL'}, {'key': 'BES', 'text': 'Caribbean Netherlands', 'value': 'BES'}, {'key': 'BRA', 'text': 'Brazil', 'value': 'BRA'}, {'key': 'BRB', 'text': 'Barbados', 'value': 'BRB'}, {'key': 'BRN', 'text': 'Brunei', 'value': 'BRN'}, {'key': 'BTN', 'text': 'Bhutan', 'value': 'BTN'}, {'key': 'BVT', 'text': 'Bouvet Island', 'value': 'BVT'}, {'key': 'BWA', 'text': 'Botswana', 'value': 'BWA'}, {'key': 'CAF', 'text': 'Central African Republic', 'value': 'CAF'}, {'key': 'CAN', 'text': 'Canada', 'value': 'CAN'}, {'key': 'CCK', 'text': 'Cocos (Keeling) Islands', 'value': 'CCK'}, {'key': 'CHE', 'text': 'Switzerland', 'value': 'CHE'}, {'key': 'CHL', 'text': 'Chile', 'value': 'CHL'}, {'key': 'CHN', 'text': 'China', 'value': 'CHN'}, {'key': 'CIV', 'text': 'Ivory Coast', 'value': 'CIV'}, {'key': 'CMR', 'text': 'Cameroon', 'value': 'CMR'}, {'key': 'COD', 'text': 'DR Congo', 'value': 'COD'}, {'key': 'COG', 'text': 'Republic of the Congo', 'value': 'COG'}, {'key': 'COK', 'text': 'Cook Islands', 'value': 'COK'}, {'key': 'COL', 'text': 'Colombia', 'value': 'COL'}, {'key': 'COM', 'text': 'Comoros', 'value': 'COM'}, {'key': 'CPV', 'text': 'Cape Verde', 'value': 'CPV'}, {'key': 'CRI', 'text': 'Costa Rica', 'value': 'CRI'}, {'key': 'CUB', 'text': 'Cuba', 'value': 'CUB'}, {'key': 'CUW', 'text': 'Curaao', 'value': 'CUW'}, {'key': 'CXR', 'text': 'Christmas Island', 'value': 'CXR'}, {'key': 'CYM', 'text': 'Cayman Islands', 'value': 'CYM'}, {'key': 'CYP', 'text': 'Cyprus', 'value': 'CYP'}, {'key': 'CZE', 'text': 'Czechia', 'value': 'CZE'}, {'key': 'DEU', 'text': 'Germany', 'value': 'DEU'}, {'key': 'DJI', 'text': 'Djibouti', 'value': 'DJI'}, {'key': 'DMA', 'text': 'Dominica', 'value': 'DMA'}, {'key': 'DNK', 'text': 'Denmark', 'value': 'DNK'}, {'key': 'DOM', 'text': 'Dominican Republic', 'value': 'DOM'}, {'key': 'DZA', 'text': 'Algeria', 'value': 'DZA'}, {'key': 'ECU', 'text': 'Ecuador', 'value': 'ECU'}, {'key': 'EGY', 'text': 'Egypt', 'value': 'EGY'}, {'key': 'ERI', 'text': 'Eritrea', 'value': 'ERI'}, {'key': 'ESH', 'text': 'Western Sahara', 'value': 'ESH'}, {'key': 'ESP', 'text': 'Spain', 'value': 'ESP'}, {'key': 'EST', 'text': 'Estonia', 'value': 'EST'}, {'key': 'ETH', 'text': 'Ethiopia', 'value': 'ETH'}, {'key': 'FIN', 'text': 'Finland', 'value': 'FIN'}, {'key': 'FJI', 'text': 'Fiji', 'value': 'FJI'}, {'key': 'FLK', 'text': 'Falkland Islands', 'value': 'FLK'}, {'key': 'FRA', 'text': 'France', 'value': 'FRA'}, {'key': 'FRO', 'text': 'Faroe Islands', 'value': 'FRO'}, {'key': 'FSM', 'text': 'Micronesia', 'value': 'FSM'}, {'key': 'GAB', 'text': 'Gabon', 'value': 'GAB'}, {'key': 'GBR', 'text': 'United Kingdom', 'value': 'GBR'}, {'key': 'GEO', 'text': 'Georgia', 'value': 'GEO'}, {'key': 'GGY', 'text': 'Guernsey', 'value': 'GGY'}, {'key': 'GHA', 'text': 'Ghana', 'value': 'GHA'}, {'key': 'GIB', 'text': 'Gibraltar', 'value': 'GIB'}, {'key': 'GIN', 'text': 'Guinea', 'value': 'GIN'}, {'key': 'GLP', 'text': 'Guadeloupe', 'value': 'GLP'}, {'key': 'GMB', 'text': 'Gambia', 'value': 'GMB'}, {'key': 'GNB', 'text': 'Guinea-Bissau', 'value': 'GNB'}, {'key': 'GNQ', 'text': 'Equatorial Guinea', 'value': 'GNQ'}, {'key': 'GRC', 'text': 'Greece', 'value': 'GRC'}, {'key': 'GRD', 'text': 'Grenada', 'value': 'GRD'}, {'key': 'GRL', 'text': 'Greenland', 'value': 'GRL'}, {'key': 'GTM', 'text': 'Guatemala', 'value': 'GTM'}, {'key': 'GUF', 'text': 'French Guiana', 'value': 'GUF'}, {'key': 'GUM', 'text': 'Guam', 'value': 'GUM'}, {'key': 'GUY', 'text': 'Guyana', 'value': 'GUY'}, {'key': 'HKG', 'text': 'Hong Kong', 'value': 'HKG'}, {'key': 'HMD', 'text': 'Heard Island and McDonald Islands', 'value': 'HMD'}, {'key': 'HND', 'text': 'Honduras', 'value': 'HND'}, {'key': 'HRV', 'text': 'Croatia', 'value': 'HRV'}, {'key': 'HTI', 'text': 'Haiti', 'value': 'HTI'}, {'key': 'HUN', 'text': 'Hungary', 'value': 'HUN'}, {'key': 'IDN', 'text': 'Indonesia', 'value': 'IDN'}, {'key': 'IMN', 'text': 'Isle of Man', 'value': 'IMN'}, {'key': 'IND', 'text': 'India', 'value': 'IND'}, {'key': 'IOT', 'text': 'British Indian Ocean Territory', 'value': 'IOT'}, {'key': 'IRL', 'text': 'Ireland', 'value': 'IRL'}, {'key': 'IRN', 'text': 'Iran', 'value': 'IRN'}, {'key': 'IRQ', 'text': 'Iraq', 'value': 'IRQ'}, {'key': 'ISL', 'text': 'Iceland', 'value': 'ISL'}, {'key': 'ISR', 'text': 'Israel', 'value': 'ISR'}, {'key': 'ITA', 'text': 'Italy', 'value': 'ITA'}, {'key': 'JAM', 'text': 'Jamaica', 'value': 'JAM'}, {'key': 'JEY', 'text': 'Jersey', 'value': 'JEY'}, {'key': 'JOR', 'text': 'Jordan', 'value': 'JOR'}, {'key': 'JPN', 'text': 'Japan', 'value': 'JPN'}, {'key': 'KAZ', 'text': 'Kazakhstan', 'value': 'KAZ'}, {'key': 'KEN', 'text': 'Kenya', 'value': 'KEN'}, {'key': 'KGZ', 'text': 'Kyrgyzstan', 'value': 'KGZ'}, {'key': 'KHM', 'text': 'Cambodia', 'value': 'KHM'}, {'key': 'KIR', 'text': 'Kiribati', 'value': 'KIR'}, {'key': 'KNA', 'text': 'Saint Kitts and Nevis', 'value': 'KNA'}, {'key': 'KOR', 'text': 'South Korea', 'value': 'KOR'}, {'key': 'UNK', 'text': 'Kosovo', 'value': 'UNK'}, {'key': 'KWT', 'text': 'Kuwait', 'value': 'KWT'}, {'key': 'LAO', 'text': 'Laos', 'value': 'LAO'}, {'key': 'LBN', 'text': 'Lebanon', 'value': 'LBN'}, {'key': 'LBR', 'text': 'Liberia', 'value': 'LBR'}, {'key': 'LBY', 'text': 'Libya', 'value': 'LBY'}, {'key': 'LCA', 'text': 'Saint Lucia', 'value': 'LCA'}, {'key': 'LIE', 'text': 'Liechtenstein', 'value': 'LIE'}, {'key': 'LKA', 'text': 'Sri Lanka', 'value': 'LKA'}, {'key': 'LSO', 'text': 'Lesotho', 'value': 'LSO'}, {'key': 'LTU', 'text': 'Lithuania', 'value': 'LTU'}, {'key': 'LUX', 'text': 'Luxembourg', 'value': 'LUX'}, {'key': 'LVA', 'text': 'Latvia', 'value': 'LVA'}, {'key': 'MAC', 'text': 'Macau', 'value': 'MAC'}, {'key': 'MAF', 'text': 'Saint Martin', 'value': 'MAF'}, {'key': 'MAR', 'text': 'Morocco', 'value': 'MAR'}, {'key': 'MCO', 'text': 'Monaco', 'value': 'MCO'}, {'key': 'MDA', 'text': 'Moldova', 'value': 'MDA'}, {'key': 'MDG', 'text': 'Madagascar', 'value': 'MDG'}, {'key': 'MDV', 'text': 'Maldives', 'value': 'MDV'}, {'key': 'MEX', 'text': 'Mexico', 'value': 'MEX'}, {'key': 'MHL', 'text': 'Marshall Islands', 'value': 'MHL'}, {'key': 'MKD', 'text': 'Macedonia', 'value': 'MKD'}, {'key': 'MLI', 'text': 'Mali', 'value': 'MLI'}, {'key': 'MLT', 'text': 'Malta', 'value': 'MLT'}, {'key': 'MMR', 'text': 'Myanmar', 'value': 'MMR'}, {'key': 'MNE', 'text': 'Montenegro', 'value': 'MNE'}, {'key': 'MNG', 'text': 'Mongolia', 'value': 'MNG'}, {'key': 'MNP', 'text': 'Northern Mariana Islands', 'value': 'MNP'}, {'key': 'MOZ', 'text': 'Mozambique', 'value': 'MOZ'}, {'key': 'MRT', 'text': 'Mauritania', 'value': 'MRT'}, {'key': 'MSR', 'text': 'Montserrat', 'value': 'MSR'}, {'key': 'MTQ', 'text': 'Martinique', 'value': 'MTQ'}, {'key': 'MUS', 'text': 'Mauritius', 'value': 'MUS'}, {'key': 'MWI', 'text': 'Malawi', 'value': 'MWI'}, {'key': 'MYS', 'text': 'Malaysia', 'value': 'MYS'}, {'key': 'MYT', 'text': 'Mayotte', 'value': 'MYT'}, {'key': 'NAM', 'text': 'Namibia', 'value': 'NAM'}, {'key': 'NCL', 'text': 'New Caledonia', 'value': 'NCL'}, {'key': 'NER', 'text': 'Niger', 'value': 'NER'}, {'key': 'NFK', 'text': 'Norfolk Island', 'value': 'NFK'}, {'key': 'NGA', 'text': 'Nigeria', 'value': 'NGA'}, {'key': 'NIC', 'text': 'Nicaragua', 'value': 'NIC'}, {'key': 'NIU', 'text': 'Niue', 'value': 'NIU'}, {'key': 'NLD', 'text': 'Netherlands', 'value': 'NLD'}, {'key': 'NOR', 'text': 'Norway', 'value': 'NOR'}, {'key': 'NPL', 'text': 'Nepal', 'value': 'NPL'}, {'key': 'NRU', 'text': 'Nauru', 'value': 'NRU'}, {'key': 'NZL', 'text': 'New Zealand', 'value': 'NZL'}, {'key': 'OMN', 'text': 'Oman', 'value': 'OMN'}, {'key': 'PAK', 'text': 'Pakistan', 'value': 'PAK'}, {'key': 'PAN', 'text': 'Panama', 'value': 'PAN'}, {'key': 'PCN', 'text': 'Pitcairn Islands', 'value': 'PCN'}, {'key': 'PER', 'text': 'Peru', 'value': 'PER'}, {'key': 'PHL', 'text': 'Philippines', 'value': 'PHL'}, {'key': 'PLW', 'text': 'Palau', 'value': 'PLW'}, {'key': 'PNG', 'text': 'Papua New Guinea', 'value': 'PNG'}, {'key': 'POL', 'text': 'Poland', 'value': 'POL'}, {'key': 'PRI', 'text': 'Puerto Rico', 'value': 'PRI'}, {'key': 'PRK', 'text': 'North Korea', 'value': 'PRK'}, {'key': 'PRT', 'text': 'Portugal', 'value': 'PRT'}, {'key': 'PRY', 'text': 'Paraguay', 'value': 'PRY'}, {'key': 'PSE', 'text': 'Palestine', 'value': 'PSE'}, {'key': 'PYF', 'text': 'French Polynesia', 'value': 'PYF'}, {'key': 'QAT', 'text': 'Qatar', 'value': 'QAT'}, {'key': 'REU', 'text': 'Runion', 'value': 'REU'}, {'key': 'ROU', 'text': 'Romania', 'value': 'ROU'}, {'key': 'RUS', 'text': 'Russia', 'value': 'RUS'}, {'key': 'RWA', 'text': 'Rwanda', 'value': 'RWA'}, {'key': 'SAU', 'text': 'Saudi Arabia', 'value': 'SAU'}, {'key': 'SDN', 'text': 'Sudan', 'value': 'SDN'}, {'key': 'SEN', 'text': 'Senegal', 'value': 'SEN'}, {'key': 'SGP', 'text': 'Singapore', 'value': 'SGP'}, {'key': 'SGS', 'text': 'South Georgia', 'value': 'SGS'}, {'key': 'SJM', 'text': 'Svalbard and Jan Mayen', 'value': 'SJM'}, {'key': 'SLB', 'text': 'Solomon Islands', 'value': 'SLB'}, {'key': 'SLE', 'text': 'Sierra Leone', 'value': 'SLE'}, {'key': 'SLV', 'text': 'El Salvador', 'value': 'SLV'}, {'key': 'SMR', 'text': 'San Marino', 'value': 'SMR'}, {'key': 'SOM', 'text': 'Somalia', 'value': 'SOM'}, {'key': 'SPM', 'text': 'Saint Pierre and Miquelon', 'value': 'SPM'}, {'key': 'SRB', 'text': 'Serbia', 'value': 'SRB'}, {'key': 'SSD', 'text': 'South Sudan', 'value': 'SSD'}, {'key': 'STP', 'text': 'So Tom and Prncipe', 'value': 'STP'}, {'key': 'SUR', 'text': 'Suriname', 'value': 'SUR'}, {'key': 'SVK', 'text': 'Slovakia', 'value': 'SVK'}, {'key': 'SVN', 'text': 'Slovenia', 'value': 'SVN'}, {'key': 'SWE', 'text': 'Sweden', 'value': 'SWE'}, {'key': 'SWZ', 'text': 'Swaziland', 'value': 'SWZ'}, {'key': 'SXM', 'text': 'Sint Maarten', 'value': 'SXM'}, {'key': 'SYC', 'text': 'Seychelles', 'value': 'SYC'}, {'key': 'SYR', 'text': 'Syria', 'value': 'SYR'}, {'key': 'TCA', 'text': 'Turks and Caicos Islands', 'value': 'TCA'}, {'key': 'TCD', 'text': 'Chad', 'value': 'TCD'}, {'key': 'TGO', 'text': 'Togo', 'value': 'TGO'}, {'key': 'THA', 'text': 'Thailand', 'value': 'THA'}, {'key': 'TJK', 'text': 'Tajikistan', 'value': 'TJK'}, {'key': 'TKL', 'text': 'Tokelau', 'value': 'TKL'}, {'key': 'TKM', 'text': 'Turkmenistan', 'value': 'TKM'}, {'key': 'TLS', 'text': 'Timor-Leste', 'value': 'TLS'}, {'key': 'TON', 'text': 'Tonga', 'value': 'TON'}, {'key': 'TTO', 'text': 'Trinidad and Tobago', 'value': 'TTO'}, {'key': 'TUN', 'text': 'Tunisia', 'value': 'TUN'}, {'key': 'TUR', 'text': 'Turkey', 'value': 'TUR'}, {'key': 'TUV', 'text': 'Tuvalu', 'value': 'TUV'}, {'key': 'TWN', 'text': 'Taiwan', 'value': 'TWN'}, {'key': 'TZA', 'text': 'Tanzania', 'value': 'TZA'}, {'key': 'UGA', 'text': 'Uganda', 'value': 'UGA'}, {'key': 'UKR', 'text': 'Ukraine', 'value': 'UKR'}, {'key': 'UMI', 'text': 'United States Minor Outlying Islands', 'value': 'UMI'}, {'key': 'URY', 'text': 'Uruguay', 'value': 'URY'}, {'key': 'USA', 'text': 'United States', 'value': 'USA'}, {'key': 'UZB', 'text': 'Uzbekistan', 'value': 'UZB'}, {'key': 'VAT', 'text': 'Vatican City', 'value': 'VAT'}, {'key': 'VCT', 'text': 'Saint Vincent and the Grenadines', 'value': 'VCT'}, {'key': 'VEN', 'text': 'Venezuela', 'value': 'VEN'}, {'key': 'VGB', 'text': 'British Virgin Islands', 'value': 'VGB'}, {'key': 'VIR', 'text': 'United States Virgin Islands', 'value': 'VIR'}, {'key': 'VNM', 'text': 'Vietnam', 'value': 'VNM'}, {'key': 'VUT', 'text': 'Vanuatu', 'value': 'VUT'}, {'key': 'WLF', 'text': 'Wallis and Futuna', 'value': 'WLF'}, {'key': 'WSM', 'text': 'Samoa', 'value': 'WSM'}, {'key': 'YEM', 'text': 'Yemen', 'value': 'YEM'}, {'key': 'ZAF', 'text': 'South Africa', 'value': 'ZAF'}, {'key': 'ZMB', 'text': 'Zambia', 'value': 'ZMB'}, {'key': 'ZWE', 'text': 'Zimbabwe', 'value': 'ZWE'}]\r\n","// @flow\r\nimport React, {Component} from 'react'\r\nimport {\r\n\tForm,\r\n\tHeader,\r\n\tMessage,\r\n\tGrid,\r\n\tButton,\r\n\tSegment,\r\n\tDimmer,\r\n\tLoader,\r\n\tPopup,\r\n\tRail\r\n} from 'semantic-ui-react'\r\nimport {connect} from 'react-redux'\r\nimport {\r\n\treduxForm,\r\n\tinitialize,\r\n\tField\r\n} from 'redux-form'\r\n\r\nimport IdentityGroup from '../../components/IdentityGroup'\r\nimport {DescriptiveNote, ProjectNote} from '../../components/NotesGroup'\r\nimport {InputField, DropdownComponent} from '../../components/FormControls'\r\nimport SegmentRepeater from '../../components/SegmentRepeater'\r\nimport DateRepeater from '../../components/DateRepeater'\r\nimport EntityLookup from '../../components/EntityLookup'\r\nimport MessageDialog from '../../components/MessageDialog'\r\nimport CollectionsDialog from '../../components/CollectionsDialog'\r\nimport {getCollectionId} from '../../../../api/CollectionsSvc'\r\n\r\nimport {nonPersonVariantTypeOptions, nonPersonDateTypeOptions, factualityOptions, certaintyOptions} from '../../components/options'\r\nimport countries from '../../../../static/countries'\r\n\r\nimport {latitude, longitude, dateRange} from '../../components/FieldValidation'\r\n\r\nimport BroadcastChannel from 'broadcast-channel'\r\n\r\nimport type {FormProps} from 'redux-form'\r\n\r\nimport {\r\n\tgetEntityId,\r\n\r\n\tisPlacePostDone,\r\n\tisPlacePostPending,\r\n\tisPlacePostError,\r\n\tgetPlacePostError,\r\n\tgetPlacePostData,\r\n\r\n\tisPlaceGetDone,\r\n\tisPlaceGetPending,\r\n\tisPlaceGetError,\r\n\tgetPlaceGetError,\r\n\tgetPlaceGetData,\r\n\r\n\tisPlacePutDone,\r\n\tisPlacePutPending,\r\n\tisPlacePutError,\r\n\tgetPlacePutError,\r\n\tgetPlacePutData} from '../../../../selectors'\r\n\r\nimport {GET_PLACE, PUT_PLACE, POST_PLACE} from '../../../../actions/entities'\r\n\r\ntype Props = FormProps\r\n\r\nclass PlaceComponent extends Component<Props, State> {\r\n\tcloseForm = (id) => {\r\n\t\tconst channel = new BroadcastChannel('cwrc-entity-management-forms')\r\n\t\tchannel.postMessage(id)\r\n\t\tchannel.close()\r\n\t}\r\n\r\n\tcomponentWillMount () {\r\n\t\tconst entityId = this.props.entityId\r\n\t\tif (entityId !== undefined) {\r\n\t\t\tthis.props.getPlace(entityId)\r\n\t\t}\r\n\t}\r\n\r\n\tshouldComponentUpdate (nextProps, nextState) {\r\n\t\tconst values = nextProps.initialValues\r\n\t\tif (values) {\r\n\t\t\tif (values.identity.variants) {\r\n\t\t\t\tvalues.identity.variants.forEach(vr => {\r\n\t\t\t\t\tlet match = false\r\n\t\t\t\t\tfor (let v of nonPersonVariantTypeOptions) {\r\n\t\t\t\t\t\tif (v.value === vr.type) {\r\n\t\t\t\t\t\t\tmatch = true\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!match) {\r\n\t\t\t\t\t\tnonPersonVariantTypeOptions.push({\r\n\t\t\t\t\t\t\tkey: vr.type, value: vr.type, text: vr.type\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst {handleSubmit, invalid, submitting} = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t{this.props.isPlacePostDone ? (\r\n\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\theader=\"Entity Created!\"\r\n\t\t\t\t\t\tcontent={<p>New entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.getPlacePostData.data.pid + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.getPlacePostData.data.pid}</a></p>}\r\n\t\t\t\t\t\tonClose={this.closeForm.bind(this, this.props.getPlacePostData.data.pid)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isPlacePutDone ? (\r\n\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\theader=\"Entity Edited!\"\r\n\t\t\t\t\t\tcontent={<p>Entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.getPlacePutData.data.pid + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.getPlacePutData.data.pid}</a></p>}\r\n\t\t\t\t\t\tonClose={this.closeForm.bind(this, this.props.getPlacePutData.data.pid)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isPlaceGetPending ? (\r\n\t\t\t\t\t<Dimmer active inverted>\r\n\t\t\t\t\t\t<Loader inverted>Loading Place</Loader>\r\n\t\t\t\t\t</Dimmer>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isPlaceGetError\r\n\t\t\t\t\t? (this.props.getPlaceGetError.message === 'locked' ? (\r\n\t\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\t\theader=\"Entity is Locked!\"\r\n\t\t\t\t\t\t\tcontent={<p>The entity <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.entityId + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.entityId}</a> is locked and therefore cannot be edited.</p>}\r\n\t\t\t\t\t\t\tonClose={this.closeForm.bind(this, undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\t\theader=\"Error Loading Entity!\"\r\n\t\t\t\t\t\t\tcontent={<p>An error occurred when loading the entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.entityId + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.entityId}</a><br/>It is probably encoded in an unsupported format and therefore cannot be edited.</p>}\r\n\t\t\t\t\t\t\tonClose={this.closeForm.bind(this, undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)) : ''}\r\n\t\t\t\t{this.props.entityId === undefined && this.props.getCollectionId === undefined ? (\r\n\t\t\t\t\t<CollectionsDialog entityType=\"place\"/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t<Form onSubmit={handleSubmit} error={invalid}>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Identity</Header>\r\n\r\n\t\t\t\t\t<IdentityGroup\r\n\t\t\t\t\t\tentityType=\"place\"\r\n\t\t\t\t\t\tnameOptions={null}\r\n\t\t\t\t\t\tvariantOptions={nonPersonVariantTypeOptions}\r\n\t\t\t\t\t\tcertaintyOptions={certaintyOptions}\r\n\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Description</Header>\r\n\r\n\t\t\t\t\t<Segment.Group>\r\n\t\t\t\t\t\t<DateRepeater\r\n\t\t\t\t\t\t\tfieldArrayName=\"description.dates\"\r\n\t\t\t\t\t\t\theaderLabel=\"Important Date(s)\"\r\n\t\t\t\t\t\t\tcomponentLabel=\"Date\"\r\n\t\t\t\t\t\t\tdateTypeOptions={nonPersonDateTypeOptions}\r\n\t\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Segment>\r\n\t\t\t\t\t\t\t<Header as='h4'>Properties</Header>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Factuality\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.properties.factuality.value\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\toptions={factualityOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.properties.factuality.cert'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t\t<Header as='h4'>Location</Header>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Country\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.location.country.value\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\tsearch\r\n\t\t\t\t\t\t\t\t\t\t\tscrolling\r\n\t\t\t\t\t\t\t\t\t\t\toptions={countries}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.location.country.cert'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Region\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.location.region.value\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.location.region.cert'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\tlabel=\"Address\"\r\n\t\t\t\t\t\t\t\t\tname=\"description.location.address\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column width={3}>\r\n\t\t\t\t\t\t\t\t\t\t<Header as='h5'>Coordinates</Header>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column width={6}>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[latitude]}\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Latitude\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.location.latitude\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column width={7}>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[longitude]}\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Longitude'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.location.longitude'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t<DescriptiveNote />\r\n\t\t\t\t\t\t<ProjectNote changeFunc={this.props.change}/>\r\n\t\t\t\t\t</Segment.Group>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Sources</Header>\r\n\t\t\t\t\t<SegmentRepeater\r\n\t\t\t\t\t\tfieldArrayName=\"sources.bibl\"\r\n\t\t\t\t\t\theaderLabel=\"\"\r\n\t\t\t\t\t\tcomponentLabel=\"Source\"\r\n\t\t\t\t\t\tRepeatableComponent={EntityLookup}\r\n\t\t\t\t\t\tbuttonLabel='Add Source'\r\n\t\t\t\t\t\tentityType='title'\r\n\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Field key=\"non_field_errors\"\r\n\t\t\t\t\t\tname=\"non_field_errors\"\r\n\t\t\t\t\t\tcomponent={({meta: {error}}) => {\r\n\t\t\t\t\t\t\treturn error ? (\r\n\t\t\t\t\t\t\t\t<Message error>\r\n\t\t\t\t\t\t\t\t\t<Message.Header>{'Login failed :('}</Message.Header>\r\n\t\t\t\t\t\t\t\t\t<p>{error}</p>\r\n\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div style={{textAlign: 'center'}}>\r\n\t\t\t\t\t\t{invalid ? (\r\n\t\t\t\t\t\t\t<Popup size='tiny' position='right center' trigger={\r\n\t\t\t\t\t\t\t\t<span><Button content=\"Submit\" icon=\"sign in\" disabled={true}/></span>\r\n\t\t\t\t\t\t\t} content=\"Please fix invalid fields before submitting\"/>\r\n\t\t\t\t\t\t) : <Button content=\"Submit\" icon=\"sign in\" loading={submitting}/>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</Segment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst onSubmit = (values, dispatch, props) => {\r\n\tif (props.isPlaceGetDone && props.entityId !== undefined) {\r\n\t\treturn props.putPlace(props.entityId, values)\r\n\t} else {\r\n\t\treturn props.postPlace(values)\r\n\t}\r\n}\r\n\r\nconst validate = values => {\r\n\tconst errors = {}\r\n\tif (values.description && values.description.dates) {\r\n\t\terrors.description = {\r\n\t\t\tdates: []\r\n\t\t}\r\n\t\tfor (const date of values.description.dates) {\r\n\t\t\tconst error = dateRange(date)\r\n\t\t\tif (error !== undefined) {\r\n\t\t\t\terrors.description.dates.push(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn errors\r\n}\r\n\r\n// i.e. model -> view\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tinitialValues: getPlaceGetData(state),\r\n\t\tentityId: getEntityId(state),\r\n\t\tgetCollectionId: getCollectionId('place'),\r\n\r\n\t\tisPlacePostDone: isPlacePostDone(state),\r\n\t\tisPlacePostPending: isPlacePostPending(state),\r\n\t\tisPlacePostError: isPlacePostError(state),\r\n\t\tgetPlacePostError: getPlacePostError(state),\r\n\t\tgetPlacePostData: getPlacePostData(state),\r\n\r\n\t\tisPlaceGetDone: isPlaceGetDone(state),\r\n\t\tisPlaceGetPending: isPlaceGetPending(state),\r\n\t\tisPlaceGetError: isPlaceGetError(state),\r\n\t\tgetPlaceGetError: getPlaceGetError(state),\r\n\t\tgetPlaceGetData: getPlaceGetData(state),\r\n\r\n\t\tisPlacePutDone: isPlacePutDone(state),\r\n\t\tisPlacePutPending: isPlacePutPending(state),\r\n\t\tisPlacePutError: isPlacePutError(state),\r\n\t\tgetPlacePutError: getPlacePutError(state),\r\n\t\tgetPlacePutData: getPlacePutData(state)\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tasync getPlace (id) {\r\n\t\t\treturn dispatch(GET_PLACE(id))\r\n\t\t},\r\n\t\tasync putPlace (id, data) {\r\n\t\t\treturn dispatch(PUT_PLACE(id, data))\r\n\t\t},\r\n\t\tasync postPlace (data) {\r\n\t\t\treturn dispatch(POST_PLACE(data))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(reduxForm({\r\n\tform: 'PLACE_FORM',\r\n\tvalidate,\r\n\tonSubmit\r\n})(PlaceComponent))\r\n","// @flow\r\nimport React from 'react'\r\nimport PlaceForm from './components/PlaceForm.jsx'\r\nimport {Helmet} from 'react-helmet'\r\n\r\nconst PlaceEdit = ({login, errors}: Props) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Helmet>\r\n\t\t\t\t<title>CWRC: Place Entity</title>\r\n\t\t\t</Helmet>\r\n\t\t\t<PlaceForm />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PlaceEdit\r\n","// @flow\r\nimport React, {Component} from 'react'\r\nimport {\r\n\tForm,\r\n\tHeader,\r\n\tMessage,\r\n\tGrid,\r\n\tButton,\r\n\tSegment,\r\n\tDimmer,\r\n\tLoader,\r\n\tPopup,\r\n\tRail\r\n} from 'semantic-ui-react'\r\nimport {connect} from 'react-redux'\r\nimport {\r\n\treduxForm,\r\n\tinitialize,\r\n\tField\r\n} from 'redux-form'\r\n\r\nimport IdentityGroup from '../../components/IdentityGroup'\r\nimport {DescriptiveNote, ProjectNote} from '../../components/NotesGroup'\r\nimport {DropdownComponent, InputField} from '../../components/FormControls'\r\nimport SegmentRepeater from '../../components/SegmentRepeater'\r\nimport DateRepeater from '../../components/DateRepeater'\r\nimport EntityLookup from '../../components/EntityLookup'\r\nimport MessageDialog from '../../components/MessageDialog'\r\nimport CollectionsDialog from '../../components/CollectionsDialog'\r\nimport {getCollectionId} from '../../../../api/CollectionsSvc'\r\n\r\nimport {nonPersonVariantTypeOptions, nonPersonDateTypeOptions, factualityOptions, certaintyOptions} from '../../components/options'\r\nimport {dateRange} from '../../components/FieldValidation'\r\n\r\nimport BroadcastChannel from 'broadcast-channel'\r\n\r\nimport type {FormProps} from 'redux-form'\r\n\r\nimport {\r\n\tgetEntityId,\r\n\r\n\tisOrganizationPostDone,\r\n\tisOrganizationPostPending,\r\n\tisOrganizationPostError,\r\n\tgetOrganizationPostError,\r\n\tgetOrganizationPostData,\r\n\r\n\tisOrganizationGetDone,\r\n\tisOrganizationGetPending,\r\n\tisOrganizationGetError,\r\n\tgetOrganizationGetError,\r\n\tgetOrganizationGetData,\r\n\r\n\tisOrganizationPutDone,\r\n\tisOrganizationPutPending,\r\n\tisOrganizationPutError,\r\n\tgetOrganizationPutError,\r\n\tgetOrganizationPutData} from '../../../../selectors'\r\n\r\nimport {GET_ORGANIZATION, PUT_ORGANIZATION, POST_ORGANIZATION} from '../../../../actions/entities'\r\n\r\ntype Props = FormProps\r\n\r\nclass OrganizationComponent extends Component<Props, State> {\r\n\tcloseForm = (id) => {\r\n\t\tconst channel = new BroadcastChannel('cwrc-entity-management-forms')\r\n\t\tchannel.postMessage(id)\r\n\t\tchannel.close()\r\n\t}\r\n\r\n\tcomponentWillMount () {\r\n\t\tconst entityId = this.props.entityId\r\n\t\tif (entityId !== undefined) {\r\n\t\t\tthis.props.getOrganization(entityId)\r\n\t\t}\r\n\t}\r\n\r\n\tshouldComponentUpdate (nextProps, nextState) {\r\n\t\tconst values = nextProps.initialValues\r\n\t\tif (values) {\r\n\t\t\tif (values.identity.variants) {\r\n\t\t\t\tvalues.identity.variants.forEach(vr => {\r\n\t\t\t\t\tlet match = false\r\n\t\t\t\t\tfor (let v of nonPersonVariantTypeOptions) {\r\n\t\t\t\t\t\tif (v.value === vr.type) {\r\n\t\t\t\t\t\t\tmatch = true\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!match) {\r\n\t\t\t\t\t\tnonPersonVariantTypeOptions.push({\r\n\t\t\t\t\t\t\tkey: vr.type, value: vr.type, text: vr.type\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst {handleSubmit, invalid, submitting} = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Segment basic>\r\n\t\t\t\t{this.props.isOrganizationPostDone ? (\r\n\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\theader=\"Entity Created!\"\r\n\t\t\t\t\t\tcontent={<p>New entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.getOrganizationPostData.data.pid + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.getOrganizationPostData.data.pid}</a></p>}\r\n\t\t\t\t\t\tonClose={this.closeForm.bind(this, this.props.getOrganizationPostData.data.pid)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isOrganizationPutDone ? (\r\n\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\theader=\"Entity Edited!\"\r\n\t\t\t\t\t\tcontent={<p>Entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.getOrganizationPutData.data.pid + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.getOrganizationPutData.data.pid}</a></p>}\r\n\t\t\t\t\t\tonClose={this.closeForm.bind(this, this.props.getOrganizationPutData.data.pid)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isOrganizationGetPending ? (\r\n\t\t\t\t\t<Dimmer active inverted>\r\n\t\t\t\t\t\t<Loader inverted>Loading Organization</Loader>\r\n\t\t\t\t\t</Dimmer>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t{this.props.isOrganizationGetError\r\n\t\t\t\t\t? (this.props.getOrganizationGetError.message === 'locked' ? (\r\n\t\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\t\theader=\"Entity is Locked!\"\r\n\t\t\t\t\t\t\tcontent={<p>The entity <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.entityId + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.entityId}</a> is locked and therefore cannot be edited.</p>}\r\n\t\t\t\t\t\t\tonClose={this.closeForm.bind(this, undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<MessageDialog\r\n\t\t\t\t\t\t\theader=\"Error Loading Entity!\"\r\n\t\t\t\t\t\t\tcontent={<p>An error occurred when loading the entity: <a href={process.env.REACT_APP_ENTITIES_HOST + '/islandora/object/' + this.props.entityId + '/manage/datastreams'} target=\"_blank\" rel=\"noopener noreferrer\">{this.props.entityId}</a><br/>It is probably encoded in an unsupported format and therefore cannot be edited.</p>}\r\n\t\t\t\t\t\t\tonClose={this.closeForm.bind(this, undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)) : ''}\r\n\t\t\t\t{this.props.entityId === undefined && this.props.getCollectionId === undefined ? (\r\n\t\t\t\t\t<CollectionsDialog entityType=\"organization\"/>\r\n\t\t\t\t) : ''}\r\n\t\t\t\t<Form onSubmit={handleSubmit} error={invalid}>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Identity</Header>\r\n\r\n\t\t\t\t\t<IdentityGroup\r\n\t\t\t\t\t\tentityType=\"organization\"\r\n\t\t\t\t\t\tnameOptions={null}\r\n\t\t\t\t\t\tvariantOptions={nonPersonVariantTypeOptions}\r\n\t\t\t\t\t\tcertaintyOptions={certaintyOptions}\r\n\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Description</Header>\r\n\r\n\t\t\t\t\t<Segment.Group>\r\n\t\t\t\t\t\t<DateRepeater\r\n\t\t\t\t\t\t\tfieldArrayName=\"description.dates\"\r\n\t\t\t\t\t\t\theaderLabel=\"Important Date(s)\"\r\n\t\t\t\t\t\t\tcomponentLabel=\"Date\"\r\n\t\t\t\t\t\t\tdateTypeOptions={nonPersonDateTypeOptions}\r\n\t\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Segment>\r\n\t\t\t\t\t\t\t<Header as='h4'>Properties</Header>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Factuality\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.properties.factuality.value\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\toptions={factualityOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.properties.factuality.cert'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t\t<Segment basic>\r\n\t\t\t\t\t\t\t\t<Grid columns='equal'>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Organization Type\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"description.properties.type.value\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Optional\"\r\n\t\t\t\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={InputField}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t\t<Grid.Column>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Certainty'\r\n\t\t\t\t\t\t\t\t\t\t\tname='description.properties.type.cert'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Optional'\r\n\t\t\t\t\t\t\t\t\t\t\toptions={certaintyOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={DropdownComponent}/>\r\n\t\t\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t<DescriptiveNote />\r\n\t\t\t\t\t\t<ProjectNote changeFunc={this.props.change}/>\r\n\t\t\t\t\t</Segment.Group>\r\n\r\n\t\t\t\t\t<Header as=\"h2\">Sources</Header>\r\n\t\t\t\t\t<SegmentRepeater\r\n\t\t\t\t\t\tfieldArrayName=\"sources.bibl\"\r\n\t\t\t\t\t\theaderLabel=\"\"\r\n\t\t\t\t\t\tcomponentLabel=\"Source\"\r\n\t\t\t\t\t\tRepeatableComponent={EntityLookup}\r\n\t\t\t\t\t\tbuttonLabel='Add Source'\r\n\t\t\t\t\t\tentityType='title'\r\n\t\t\t\t\t\tchangeFunc={this.props.change}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Field key=\"non_field_errors\"\r\n\t\t\t\t\t\tname=\"non_field_errors\"\r\n\t\t\t\t\t\tcomponent={({meta: {error}}) => {\r\n\t\t\t\t\t\t\treturn error ? (\r\n\t\t\t\t\t\t\t\t<Message error>\r\n\t\t\t\t\t\t\t\t\t<Message.Header>{'Login failed :('}</Message.Header>\r\n\t\t\t\t\t\t\t\t\t<p>{error}</p>\r\n\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div style={{textAlign: 'center'}}>\r\n\t\t\t\t\t\t{invalid ? (\r\n\t\t\t\t\t\t\t<Popup size='tiny' position='right center' trigger={\r\n\t\t\t\t\t\t\t\t<span><Button content=\"Submit\" icon=\"sign in\" disabled={true}/></span>\r\n\t\t\t\t\t\t\t} content=\"Please fix invalid fields before submitting\"/>\r\n\t\t\t\t\t\t) : <Button content=\"Submit\" icon=\"sign in\" loading={submitting}/>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</Segment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst onSubmit = (values, dispatch, props) => {\r\n\tif (props.isOrganizationGetDone && props.entityId !== undefined) {\r\n\t\treturn props.putOrganization(props.entityId, values)\r\n\t} else {\r\n\t\treturn props.postOrganization(values)\r\n\t}\r\n}\r\n\r\nconst validate = values => {\r\n\tconst errors = {}\r\n\tif (values.description && values.description.dates) {\r\n\t\terrors.description = {\r\n\t\t\tdates: []\r\n\t\t}\r\n\t\tfor (const date of values.description.dates) {\r\n\t\t\tconst error = dateRange(date)\r\n\t\t\tif (error !== undefined) {\r\n\t\t\t\terrors.description.dates.push(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn errors\r\n}\r\n\r\n// i.e. model -> view\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tinitialValues: getOrganizationGetData(state),\r\n\t\tentityId: getEntityId(state),\r\n\t\tgetCollectionId: getCollectionId('organization'),\r\n\r\n\t\tisOrganizationPostDone: isOrganizationPostDone(state),\r\n\t\tisOrganizationPostPending: isOrganizationPostPending(state),\r\n\t\tisOrganizationPostError: isOrganizationPostError(state),\r\n\t\tgetOrganizationPostError: getOrganizationPostError(state),\r\n\t\tgetOrganizationPostData: getOrganizationPostData(state),\r\n\r\n\t\tisOrganizationGetDone: isOrganizationGetDone(state),\r\n\t\tisOrganizationGetPending: isOrganizationGetPending(state),\r\n\t\tisOrganizationGetError: isOrganizationGetError(state),\r\n\t\tgetOrganizationGetError: getOrganizationGetError(state),\r\n\t\tgetOrganizationGetData: getOrganizationGetData(state),\r\n\r\n\t\tisOrganizationPutDone: isOrganizationPutDone(state),\r\n\t\tisOrganizationPutPending: isOrganizationPutPending(state),\r\n\t\tisOrganizationPutError: isOrganizationPutError(state),\r\n\t\tgetOrganizationPutError: getOrganizationPutError(state),\r\n\t\tgetOrganizationPutData: getOrganizationPutData(state)\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tasync getOrganization (id) {\r\n\t\t\treturn dispatch(GET_ORGANIZATION(id))\r\n\t\t},\r\n\t\tasync putOrganization (id, data) {\r\n\t\t\treturn dispatch(PUT_ORGANIZATION(id, data))\r\n\t\t},\r\n\t\tasync postOrganization (data) {\r\n\t\t\treturn dispatch(POST_ORGANIZATION(data))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(reduxForm({\r\n\tform: 'ORG_FORM',\r\n\tvalidate,\r\n\tonSubmit\r\n})(OrganizationComponent))\r\n","// @flow\r\nimport React from 'react'\r\nimport OrganizationForm from './components/OrganizationForm.jsx'\r\nimport {Helmet} from 'react-helmet'\r\n\r\nconst OrganizationEdit = ({login, errors}: Props) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Helmet>\r\n\t\t\t\t<title>CWRC: Organization Entity</title>\r\n\t\t\t</Helmet>\r\n\t\t\t<OrganizationForm />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default OrganizationEdit\r\n","// @flow\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport _ from 'lodash'\r\n\r\nimport Dashboard from '../containers/Dashboard'\r\nimport NotFound from '../containers/NotFound'\r\n\r\nimport Person from '../containers/EntityForm/Person'\r\nimport Place from '../containers/EntityForm/Place'\r\nimport Organization from '../containers/EntityForm/Organization'\r\n\r\nimport type {RouteItem} from 'types'\r\n\r\nconst routeRoot = process.env.REACT_APP_ENTITIES_FORMS_PATH;\r\n\r\nfunction routingFnCreator (useFor: 'sidebar' | 'routing' | 'meta' | 'all' = 'all') {\r\n\tconst sidebarExternalLinks = [\r\n\t\t// {\r\n\t\t// \texternal: true,\r\n\t\t// \tpath: 'http://cwrc.ca',\r\n\t\t// \tmeta: {\r\n\t\t// \t\tsidebarVisible: true,\r\n\t\t// \t\ticon: 'home',\r\n\t\t// \t\tname: 'CWRC'\r\n\t\t// \t}\r\n\t\t// }\r\n\t]\r\n\r\n\tconst routes: Array<RouteItem> = [\r\n\t\t{\r\n\t\t\tpath: `${routeRoot}`,\r\n\t\t\texact: true,\r\n\t\t\ttag: Route,\r\n\t\t\tcomponent: Dashboard,\r\n\t\t\tmeta: {\r\n\t\t\t\ticon: 'tasks',\r\n\t\t\t\tname: 'Dashboard'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: `${routeRoot}person`,\r\n\t\t\texact: false,\r\n\t\t\ttag: Route,\r\n\t\t\tcomponent: Person,\r\n\t\t\tmeta: {\r\n\t\t\t\tname: 'Add a Person',\r\n\t\t\t\tnameEdit: 'Edit a Person',\r\n\t\t\t\ticon: 'user'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: `${routeRoot}place`,\r\n\t\t\texact: false,\r\n\t\t\ttag: Route,\r\n\t\t\tcomponent: Place,\r\n\t\t\tmeta: {\r\n\t\t\t\tname: 'Add a Place',\r\n\t\t\t\tnameEdit: 'Edit a Place',\r\n\t\t\t\ticon: 'world'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: `${routeRoot}organization`,\r\n\t\t\texact: false,\r\n\t\t\ttag: Route,\r\n\t\t\tcomponent: Organization,\r\n\t\t\tmeta: {\r\n\t\t\t\tname: 'Add an Organization',\r\n\t\t\t\tnameEdit: 'Edit an Organization',\r\n\t\t\t\ticon: 'users'\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Find the way to add/remove routes conditionally\r\n/*\r\n\t\t{\r\n\t\t\ttag: Route,\r\n\t\t\tcomponent: NotFound,\r\n\t\t\tmeta: {\r\n\t\t\t\tname: '404'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttag: Redirect,\r\n\t\t\tto: '/'\r\n\t\t}\r\n*/\r\n\t]\r\n\r\n\tconst fns = {\r\n\t\t// Returns routing for sidebar menu\r\n\t\tsidebar (x: Array<RouteItem> = routes.concat(sidebarExternalLinks)) {\r\n\t\t\treturn x\r\n\t\t\t\t.filter(a => a.meta && a.meta.sidebarVisible)\r\n\t\t\t\t.map(a => _.pick(a, ['path', 'meta', 'external', 'strict', 'exact']))\r\n\t\t},\r\n\t\t// Returns routing for React-Router\r\n\t\trouting (x: Array<RouteItem> = routes) {\r\n\t\t\treturn x\r\n\t\t\t\t.filter(a => a.tag)\r\n\t\t\t\t.map(a =>\r\n\t\t\t\t\t_.pick(a, [\r\n\t\t\t\t\t\t'path',\r\n\t\t\t\t\t\t'strict',\r\n\t\t\t\t\t\t'exact',\r\n\t\t\t\t\t\t'component',\r\n\t\t\t\t\t\t'tag',\r\n\t\t\t\t\t\t'to'\r\n\t\t\t\t\t])\r\n\t\t\t\t)\r\n\t\t},\r\n\t\t// Returns `meta` + path. used in Header\r\n\t\tmeta (x: Array<RouteItem> = routes) {\r\n\t\t\treturn x\r\n\t\t\t\t.filter(a => a.tag)\r\n\t\t\t\t.map(a =>\r\n\t\t\t\t\t_.pick(a, [\r\n\t\t\t\t\t\t'path',\r\n\t\t\t\t\t\t'strict',\r\n\t\t\t\t\t\t'exact',\r\n\t\t\t\t\t\t'meta'\r\n\t\t\t\t\t])\r\n\t\t\t\t)\r\n\t\t},\r\n\t\tall () {\r\n\t\t\treturn routes\r\n\t\t}\r\n\t}\r\n\r\n\treturn fns[useFor]\r\n}\r\n\r\nexport const getRoutes = routingFnCreator()\r\nexport const getMetaRoutes = routingFnCreator('meta')\r\nexport const getSidebarRoutes = routingFnCreator('sidebar')\r\nexport const getRouterRoutes = routingFnCreator('routing')\r\n","/**\r\n * @flow\r\n */\r\nimport React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {withRouter, matchPath} from 'react-router'\r\nimport _ from 'lodash'\r\nimport {TOGGLE_SIDEBAR} from '../../../actions/layout'\r\nimport {\r\n\tStyledHeader,\r\n\tHeaderInner,\r\n\tPageTitle\r\n} from './style'\r\nimport {Icon} from 'semantic-ui-react'\r\nimport {Spacer} from '../../../styles/base'\r\nimport {getMetaRoutes} from '../../../routing'\r\nimport {getLayoutMobileStatuses, getEntityId} from '../../../selectors'\r\n\r\ntype Props = {\r\n\ttitle: string,\r\n\ticon: string,\r\n\tisLoggedIn: boolean,\r\n\tisMobile: boolean\r\n}\r\n\r\nconst Header = ({title, icon, isLoggedIn, isMobile}: Props) => {\r\n\treturn (\r\n\t\t<StyledHeader>\r\n\t\t\t<HeaderInner>\r\n\t\t\t\t<PageTitle><Icon name={icon} size='large'/>&#160;{title}</PageTitle>\r\n\t\t\t\t<Spacer />\r\n\t\t\t</HeaderInner>\r\n\t\t</StyledHeader>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n\tconst {location: {pathname}} = props\r\n\tconst currentRoute = _.find(getMetaRoutes(), a => matchPath(pathname, a)) || {}\r\n\tif (currentRoute.meta === undefined) {\r\n\t\tconsole.warn(\"couldn't find current route!\")\r\n\t\tcurrentRoute.meta = {\r\n\t\t\tname: 'Title'\r\n\t\t}\r\n\t}\r\n\tconst entityId = getEntityId(state)\r\n\tlet title\r\n\tif (entityId && currentRoute.meta.nameEdit) {\r\n\t\ttitle = currentRoute.meta.nameEdit\r\n\t} else {\r\n\t\ttitle = currentRoute.meta.name\r\n\t}\r\n\tconst icon = currentRoute.meta.icon\r\n\tconst {isMobile} = getLayoutMobileStatuses(state)\r\n\treturn {\r\n\t\ttitle,\r\n\t\ticon,\r\n\t\tisMobile\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\ttoggleSidebar () {\r\n\t\tdispatch(TOGGLE_SIDEBAR())\r\n\t}\r\n})\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header))\r\n","/**\r\n * @flow\r\n */\r\nimport React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {withRouter} from 'react-router'\r\nimport {Switch} from 'react-router-dom'\r\nimport _ from 'lodash'\r\nimport type {RouteItem} from '../../../types'\r\n\r\ntype Props = {\r\n\troutesToRender: RouteItem[],\r\n\troutes: RouteItem[]\r\n}\r\n\r\nconst RoutingWrapper = (props: Props) => {\r\n\tconst {routesToRender} = props\r\n\t// render components that are inside Switch (main view)\r\n\tconst routesRendered = routesToRender.map((a: RouteItem, i) => {\r\n\t\t// Get tag for Route.\r\n\t\tconst Tag = a.tag\r\n\t\treturn (\r\n\t\t\t<Tag\r\n\t\t\t\tkey={i}\r\n\t\t\t\t{..._.pick(a, 'component', 'path', 'exact', 'strict', 'to')}\r\n\t\t\t/>\r\n\t\t)\r\n\t})\r\n\r\n\treturn <Switch>{routesRendered}</Switch>\r\n}\r\n\r\nfunction mapStateToProps (state, props) {\r\n\tconst {routes} = props\r\n\tconst onlyRealRoutes = routes.filter(a => a.component)\r\n\tconst onlyRedirects = routes.filter(a => a.to)\r\n\tconst routesToRender = onlyRealRoutes.concat(onlyRedirects)\r\n\r\n\treturn {\r\n\t\troutesToRender\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(RoutingWrapper))\r\n","// @flow\r\nexport const LOCATION_CHANGE = '@@router/LOCATION_CHANGE'\r\nexport type LOCATION_CHANGE_TYPE = {\r\n\ttype: '@@router/LOCATION_CHANGE',\r\n\tpayload: {\r\n\t\tpathname: string\r\n\t}\r\n}\r\n// XXX: DONT USE INTERNAL REDUX STUFF! e.g. @@INIT is an internal action\r\n// export const APP_INIT = '@@INIT'\r\nexport const APPLICATION_INIT = 'APPLICATION_INIT'\r\nexport type APPLICATION_INIT_TYPE = {\r\n\ttype: 'APPLICATION_INIT'\r\n}\r\n","// @flow\r\nimport {\r\n\tUI_TOGGLE_SIDEBAR,\r\n\tUI_WINDOW_RESIZE\r\n} from '../../actions/layout'\r\nimport {LOCATION_CHANGE} from '../../actions/common'\r\nimport type {LOCATION_CHANGE_TYPE} from '../../actions/common'\r\nimport type {\r\n\tUI_TOGGLE_SIDEBAR_TYPE,\r\n\tUI_WINDOW_RESIZE_TYPE\r\n} from '../../actions/layout'\r\n\r\nexport type State = {\r\n\tsidebarOpened: boolean,\r\n\tinnerWidth?: number\r\n}\r\n\r\ntype Action =\r\n\t| UI_TOGGLE_SIDEBAR_TYPE\r\n\t| UI_WINDOW_RESIZE_TYPE\r\n\t| LOCATION_CHANGE_TYPE\r\n\r\nexport const initialState: State = {\r\n\tsidebarOpened: false\r\n}\r\n\r\nexport function layout (state: State = initialState, action: Action): State {\r\n\tswitch (action.type) {\r\n\tcase UI_WINDOW_RESIZE: {\r\n\t\tconst {innerWidth} = action.payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tinnerWidth\r\n\t\t}\r\n\t}\r\n\tcase UI_TOGGLE_SIDEBAR:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tsidebarOpened: !state.sidebarOpened\r\n\t\t}\r\n\tcase LOCATION_CHANGE:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tsidebarOpened: false\r\n\t\t}\r\n\tdefault:\r\n\t\treturn state\r\n\t}\r\n}\r\n","// @flow\r\nimport typeToReducer from 'type-to-reducer'\r\nimport { PENDING, FULFILLED, REJECTED } from 'redux-promise-middleware'\r\n\r\nexport type State = {\r\n    status: 'none' | 'pending' | 'done' | 'error',\r\n    error: Object,\r\n    data: Object\r\n}\r\n\r\nconst initialState : State = {\r\n\tstatus: 'none',\r\n\terror: null,\r\n\tdata: null\r\n}\r\n\r\nconst PERSON_POST_TYPE = 'PERSON_POST'\r\nconst PERSON_PUT_TYPE = 'PERSON_PUT'\r\nconst PERSON_GET_TYPE = 'PERSON_GET'\r\n\r\nconst PLACE_POST_TYPE = 'PLACE_POST'\r\nconst PLACE_GET_TYPE = 'PLACE_GET'\r\nconst PLACE_PUT_TYPE = 'PLACE_PUT'\r\n\r\nconst ORGANIZATION_POST_TYPE = 'ORGANIZATION_POST'\r\nconst ORGANIZATION_GET_TYPE = 'ORGANIZATION_GET'\r\nconst ORGANIZATION_PUT_TYPE = 'ORGANIZATION_PUT'\r\n\r\nconst promiseReducers = {\r\n\t[PENDING]: () => ({...initialState, status: 'pending'}),\r\n\t[REJECTED]: (state, action) => ({...initialState, status: 'error', error: action.payload}),\r\n\t[FULFILLED]: (state, action) => ({...initialState, status: 'done', data: action.payload})\r\n}\r\n\r\nexport const personGet = typeToReducer({\r\n\t[ PERSON_GET_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const personPut = typeToReducer({\r\n\t[ PERSON_PUT_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const personPost = typeToReducer({\r\n\t[ PERSON_POST_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const placeGet = typeToReducer({\r\n\t[ PLACE_GET_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const placePut = typeToReducer({\r\n\t[ PLACE_PUT_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const placePost = typeToReducer({\r\n\t[ PLACE_POST_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const organizationGet = typeToReducer({\r\n\t[ ORGANIZATION_GET_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const organizationPut = typeToReducer({\r\n\t[ ORGANIZATION_PUT_TYPE ]: promiseReducers\r\n}, initialState)\r\n\r\nexport const organizationPost = typeToReducer({\r\n\t[ ORGANIZATION_POST_TYPE ]: promiseReducers\r\n}, initialState)\r\n","// @flow\r\nimport Cookies from 'js-cookie'\r\n// By default, we don't use localStorage, but store2 is already installed\r\n// import store from 'store2'\r\nexport const JWT_TOKEN = 'JWT_TOKEN'\r\n\r\nexport function getLocalToken (): string | null {\r\n\treturn Cookies.get(JWT_TOKEN)\r\n}\r\n\r\nexport function resetLocalToken () {\r\n\tCookies.remove(JWT_TOKEN)\r\n}\r\n\r\nexport function setLocalToken (token: string) {\r\n\tCookies.set(JWT_TOKEN, token, {expires: 365})\r\n}\r\n\r\nexport const isLoggedIn = () => !!getLocalToken()\r\n","const actionCreator = status => ({\r\n\tdispatch,\r\n\tACTION_NAME,\r\n\tgetState,\r\n\t...rest\r\n}) => {\r\n\tdispatch({type: `${ACTION_NAME}_${status.toUpperCase()}`, ...rest})\r\n}\r\n\r\nconst getDefaultBehaviours = () => {\r\n\tconst actions = [\r\n\t\t'pending',\r\n\t\t'success',\r\n\t\t'fail',\r\n\t\t'finally'\r\n\t].map(a => {\r\n\t\treturn {[a]: actionCreator(a)}\r\n\t})\r\n\r\n\tconst id = a => a\r\n\tconst ids = ['meta', 'check', 'fnPayload', 'transformResult', 'resolve'].map(\r\n\t\ta => ({\r\n\t\t\t[a]: id\r\n\t\t})\r\n\t)\r\n\r\n\treturn actions.concat(ids).reduce((a, b) => {\r\n\t\treturn Object.assign({}, a, b)\r\n\t})\r\n}\r\n\r\n/**\r\n  Create default Awral\r\n  Awral is not recommended for production usage now\r\n  But it can make your work with actions even simpler.\r\n  NOTE: I strongly recommend you check Awral sources!\r\n  Awral is 910 bytes gzipped!\r\n  {@link https://github.com/Metnew/awral}\r\n*/\r\nfunction Awral (asyncFunction) {\r\n\treturn ACTION_NAME => (...args) => async (dispatch, getState) => {\r\n\t\tconst basicArgs = {dispatch, getState, ACTION_NAME}\r\n\t\tconst meta = this.meta.apply(basicArgs, args) || null\r\n\t\tconst defaultArgs = {...basicArgs, meta}\r\n\r\n\t\tif (this.failBeforePending) {\r\n\t\t\tconst failBeforePendingPayload = this.failBeforePending.apply(\r\n\t\t\t\tdefaultArgs,\r\n\t\t\t\targs\r\n\t\t\t)\r\n\t\t\tif (failBeforePendingPayload) {\r\n\t\t\t\treturn this.fail({\r\n\t\t\t\t\t...defaultArgs,\r\n\t\t\t\t\tpayload: failBeforePendingPayload,\r\n\t\t\t\t\terror: true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.pending && this.pending(defaultArgs)\r\n\t\tconst fnPayload = this.fnPayload.apply(defaultArgs, args)\r\n\t\t// FIXME: We should catch errors inside\t`asyncFunction`\r\n\t\t// try {} catch (e) {}\r\n\t\tconst res = await asyncFunction(fnPayload)\r\n\t\tconst isSuccess = this.check(res)\r\n\t\tconst status = isSuccess ? {success: true} : {error: true}\r\n\t\tconst payload = this.transformResult(res)\r\n\r\n\t\tif (isSuccess) {\r\n\t\t\tthis.success({...defaultArgs, payload})\r\n\t\t} else {\r\n\t\t\tthis.fail({...defaultArgs, payload, error: true})\r\n\t\t}\r\n\t\tthis.finally && this.finally(defaultArgs)\r\n\t\treturn this.resolve({payload, status})\r\n\t}\r\n}\r\n\r\nconst ofFn = function (newBehaviours = {}) {\r\n\tconst behaviours = {...this.behaviours, ...newBehaviours}\r\n\tconst bindedAwral = Awral.bind(behaviours)\r\n\tbindedAwral.behaviours = behaviours\r\n\tbindedAwral.of = ofFn.bind(bindedAwral)\r\n\treturn bindedAwral\r\n}\r\n\r\nexport default ofFn.call({behaviours: getDefaultBehaviours()})\r\n","// @flow\r\nimport Awral from './awral'\r\n/**\r\n * `parseJSON()` adds property \"ok\"\r\n *  that identicates that response is OK\r\n *\r\n *  This func to determinates is response from API was successful or failed\r\n *\r\n * @param  {Object} result - response from API\r\n * @return {Boolean} - indicates was request successful or not\r\n */\r\nconst check = (result: Object = {ok: false}): boolean => result.ok\r\n// see ./awral\r\nconst failBeforePending = null\r\nconst transformResult = a => a.data\r\n// disable dispatch of *_FINALLY actions\r\nconst finallyAction = null\r\n\r\n/**\r\n  Create default Awral\r\n  Awral is not recommended for production usage now\r\n  But it can make your work with actions even simpler.\r\n  NOTE: I strongly recommend you check Awral's sources!\r\n  Awral is 910 bytes gzipped!\r\n  some docs here: {@link https://github.com/Metnew/awral}\r\n*/\r\nexport const awral = Awral.of({check, failBeforePending, transformResult, finally: finallyAction})\r\n","// @flow\r\nimport {post} from '../../api/utils'\r\n\r\nexport type LoginDataType = {\r\n\tusername: string,\r\n\tpassword: string\r\n}\r\n\r\nexport async function loginAPI (data: LoginDataType) {\r\n\treturn post('/auth', data)\r\n}\r\n","// @flow\r\nimport {awral} from '../../actions/utils'\r\nimport {loginAPI} from '../../api/AuthSvc'\r\nimport {setLocalToken, resetLocalToken} from '../../api/LocalStorageCookiesSvc'\r\n\r\nexport const LOGIN_AUTH_SUCCESS = 'LOGIN_AUTH_SUCCESS'\r\nexport const LOGIN_AUTH_FAIL = 'LOGIN_AUTH_FAIL'\r\n\r\nexport type LOGIN_AUTH_SUCCESS_TYPE = {\r\n\ttype: 'LOGIN_AUTH_SUCCESS',\r\n\tpayload: {token: string}\r\n}\r\nexport type LOGIN_AUTH_FAIL_TYPE = {\r\n\ttype: 'LOGIN_AUTH_FAIL',\r\n\tpayload: {errors: Object}\r\n}\r\n\r\nexport const LOGOUT_AUTH_SUCCESS = 'LOGOUT_AUTH_SUCCESS'\r\nexport type LOGOUT_AUTH_SUCCESS_TYPE = {type: 'LOGOUT_AUTH_SUCCESS'}\r\n\r\n/**\r\n  Awral is not recommended for production usage now\r\n  But it can make your work with actions even simpler.\r\n  NOTE: I strongly recommend you check Awral's sources!\r\n  Awral is 910 bytes gzipped!\r\n  {@link https://github.com/Metnew/awral}\r\n*/\r\nconst awralLogin = awral.of({\r\n\tpending: null,\r\n\tsuccess ({payload, dispatch}) {\r\n\t\tsetLocalToken(payload.token)\r\n\t\tdispatch({type: LOGIN_AUTH_SUCCESS, payload})\r\n\t}\r\n})\r\n\r\nexport const LOGIN_AUTH = awralLogin(loginAPI)('LOGIN_AUTH')\r\n\r\nexport const LOGOUT_AUTH = () => dispatch => {\r\n\tresetLocalToken()\r\n\tdispatch({type: LOGOUT_AUTH_SUCCESS})\r\n}\r\n","// @flow\r\nimport {isLoggedIn as hasLocalToken} from '../../api/LocalStorageCookiesSvc'\r\nimport {\r\n\tLOGIN_AUTH_FAIL,\r\n\tLOGIN_AUTH_SUCCESS,\r\n\tLOGOUT_AUTH_SUCCESS\r\n} from '../../actions/auth'\r\nimport {APPLICATION_INIT} from '../../actions/common'\r\n\r\nimport type {\r\n\tLOGIN_AUTH_FAIL_TYPE,\r\n\tLOGIN_AUTH_SUCCESS_TYPE,\r\n\tLOGOUT_AUTH_SUCCESS_TYPE\r\n} from '../../actions/auth'\r\nimport type {APPLICATION_INIT_TYPE} from '../../actions/common'\r\n\r\nexport type State = {\r\n\tisLoggedIn: boolean\r\n}\r\n\r\ntype Action =\r\n\t| APPLICATION_INIT_TYPE\r\n\t| LOGIN_AUTH_FAIL_TYPE\r\n\t| LOGIN_AUTH_SUCCESS_TYPE\r\n\t| LOGOUT_AUTH_SUCCESS_TYPE\r\n\r\nexport const initialState: State = {\r\n\tisLoggedIn: hasLocalToken()\r\n}\r\n\r\nexport function auth (state: State = initialState, action: Action): State {\r\n\tswitch (action.type) {\r\n\tcase APPLICATION_INIT:\r\n\t\treturn {...initialState, ...state}\r\n\tcase LOGOUT_AUTH_SUCCESS: {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tisLoggedIn: false\r\n\t\t}\r\n\t}\r\n\tcase LOGIN_AUTH_FAIL: {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tisLoggedIn: false\r\n\t\t}\r\n\t}\r\n\tcase LOGIN_AUTH_SUCCESS: {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tisLoggedIn: true\r\n\t\t}\r\n\t}\r\n\tdefault:\r\n\t\treturn state\r\n\t}\r\n}\r\n","// @flow\r\nimport {combineReducers} from 'redux'\r\nimport {routerReducer} from 'react-router-redux'\r\nimport {reducer as reduxFormReducer} from 'redux-form'\r\n\r\nimport type {State as AuthState} from 'reducers/auth'\r\nimport type {State as LayoutState} from 'reducers/layout'\r\nimport type {State as EntityState} from 'reducers/entities'\r\n\r\nimport {layout} from './layout'\r\nimport {personGet, personPut, personPost, placeGet, placePut, placePost, organizationGet, organizationPost, organizationPut} from './entities'\r\nimport {auth} from './auth'\r\n\r\n// Root reducer\r\nexport default combineReducers({\r\n\tlayout,\r\n\tauth,\r\n\tentities: combineReducers({\r\n\t\tperson: combineReducers({\r\n\t\t\tget: personGet,\r\n\t\t\tput: personPut,\r\n\t\t\tpost: personPost\r\n\t\t}),\r\n\t\tplace: combineReducers({\r\n\t\t\tget: placeGet,\r\n\t\t\tput: placePut,\r\n\t\t\tpost: placePost\r\n\t\t}),\r\n\t\torganization: combineReducers({\r\n\t\t\tget: organizationGet,\r\n\t\t\tput: organizationPut,\r\n\t\t\tpost: organizationPost\r\n\t\t})\r\n\t}),\r\n\trouting: routerReducer,\r\n\tform: reduxFormReducer\r\n})\r\n\r\nexport type GlobalState = {layout: LayoutState} & {auth: AuthState} &\r\n    {\r\n        entities: {\r\n            person: {\r\n                get: EntityState,\r\n                put: EntityState,\r\n                post: EntityState\r\n            },\r\n            place: {\r\n                get: EntityState,\r\n                put: EntityState,\r\n                post: EntityState\r\n            },\r\n            organization: {\r\n                get: EntityState,\r\n                put: EntityState,\r\n                post: EntityState\r\n            }\r\n        }\r\n    }\r\n","// @flow\nimport React from 'react'\nimport {render} from 'react-snapshot'\n\nimport {ThemeProvider} from 'styled-components'\nimport theme from './styles/theme'\n// import 'semantic-ui-css/semantic.css'\nimport './semantic/dist/semantic.css'\n// import './styles/global'\n\nimport {PageLayout, MainLayout, MainContent, MainContainer} from './containers/App/style'\nimport Footer from './components/parts/Footer'\nimport Header from './components/parts/Header'\n\nimport {createBrowserHistory} from 'history'\n\nimport {Provider} from 'react-redux'\nimport {ConnectedRouter} from 'react-router-redux'\n\nimport RoutingWrapper from './components/addons/RoutingWrapper'\nimport {getRouterRoutes, getRoutes} from './routing'\n\nimport type {GlobalState} from './reducers'\n\nimport configureStore from './app/configureStore'\n\nconst initialState: GlobalState = window.__INITIAL_STATE__ || {}\n\nconst history = createBrowserHistory()\n\nconst store = configureStore(initialState, history)\n\nconsole.log('__INITIAL_STATE__:', initialState)\nrender(\n\t<Provider store={store} key={Date.now()}>\n\t\t<ThemeProvider theme={theme}>\n\t\t\t<ConnectedRouter history={history}>\n\t\t\t\t<PageLayout>\n\t\t\t\t\t<Header />\n\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t<MainContent>\n\t\t\t\t\t\t\t<MainContainer>\n\t\t\t\t\t\t\t\t<RoutingWrapper routes={getRouterRoutes(getRoutes())} />\n\t\t\t\t\t\t\t</MainContainer>\n\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t</MainContent>\n\t\t\t\t\t</MainLayout>\n\t\t\t\t</PageLayout>\n\t\t\t</ConnectedRouter>\n\t\t</ThemeProvider>\n\t</Provider>,\n\tdocument.getElementById('root')\n)\n","// @flow\r\nimport thunk from 'redux-thunk'\r\nimport {createStore, applyMiddleware, compose} from 'redux'\r\nimport {routerMiddleware} from 'react-router-redux'\r\nimport promiseMiddleware from 'redux-promise-middleware'\r\nimport rootReducer from '../../reducers'\r\n\r\nconst isPromise = value => value !== null && typeof value === 'object' && typeof value.then === 'function'\r\n\r\nconst showErrors = true\r\n\r\nexport default (initialState: Object, history: History) => {\r\n\tconst middlewares = []\r\n\r\n\t// https://stackoverflow.com/a/44139604\r\n\tmiddlewares.push(() => next => action => {\r\n\t\tif (!isPromise(action.payload)) {\r\n\t\t\treturn next(action)\r\n\t\t}\r\n\r\n\t\tif (!action.meta || !action.meta.localError) {\r\n\t\t\treturn next(action).catch(error => {\r\n\t\t\t\tif (showErrors) {\r\n\t\t\t\t\tconsole.warn(`${action.type} unhandled rejection caught at middleware with reason: ${JSON.stringify(error.message)}.`)\r\n\t\t\t\t}\r\n\t\t\t\treturn error\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\n\tmiddlewares.push(thunk)\r\n\tmiddlewares.push(routerMiddleware(history))\r\n\tmiddlewares.push(promiseMiddleware())\r\n\r\n\tconst enhancers = middlewares.map(a => applyMiddleware(a))\r\n\tconst getComposeFunc = () => {\r\n\t\treturn compose\r\n\t}\r\n\tconst composeFunc = getComposeFunc()\r\n\tconst composedEnhancers = composeFunc.apply(null, enhancers)\r\n\r\n\tconst store = createStore(\r\n\t\trootReducer,\r\n\t\tinitialState,\r\n\t\tcomposedEnhancers\r\n\t)\r\n\r\n\treturn store\r\n}\r\n","export default {\r\n\tprimaryColorDark: '#2E2A25',\r\n\tprimaryColor: '#AC1E35',\r\n\tprimaryColorLight: '#55565A',\r\n\tprimaryColorText: '#FFFFFF',\r\n\taccentColor: '#cc0000',\r\n\tprimaryTextColor: '#3f3f3f',\r\n\tsecondaryTextColor: '#3f3f3f',\r\n\tdividerColor: '#BDBDBD'\r\n}\r\n"],"sourceRoot":""}